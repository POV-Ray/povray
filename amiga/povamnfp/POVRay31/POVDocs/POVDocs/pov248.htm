<HTML>
<HEAD>
<TITLE>POV-Ray 3.1 Documentation - Surface of Revolution</TITLE>
</HEAD>
<BODY BGCOLOR="#FFCC66" TEXT="#000000" LINK="#0000FF" VLINK="#000080" ALINK="#FF0000">
<P ALIGN="CENTER">
Previous:<A HREF="pov247.htm">Superquadric Ellipsoid</A>&nbsp;&nbsp;
<A HREF="povuser.htm">Main Index</A>&nbsp;&nbsp;
Next:<A HREF="pov249.htm">Text</A>
</P>
<HR>
<BR>
<H4><A NAME="_Ref411680043"><A NAME="_Toc414199083"><A NAME="_Toc429993593">Surface of Revolution</A></A></A></H4>
<P>The <b><code>sor</code></b> object is a <I>surface of revolution</I> generated by rotating the graph of a function about the y-axis. This function describes the dependence of the radius from the position on the rotation axis. The syntax is:</P>
<I><DL>
<DT>SOR:</DT>
</I><b><code><DD>sor {</code></b> <I>Number_Of_Points</I><b><code>,</DD>
</code></b><DD>&#9;<I>&lt;Point_1&gt;</I><b><code>,</code></b><I> &lt;Point_2&gt;</I><b><code>,</code></b><I> ... &lt;Point_n&gt;</DD>
</I><DD>&#9;<I>[ </I><b><code>open</code></b><I> ]</DD>
</I><DD>&#9;<I>[SOR_MODIFIERS...]</DD>
</I><DD> <b><code>}</DD>
</code></b><I><DT>SOR_MODIFIER:</DT>
</I><b><code><DD>sturm</code></b>   |   <I>OBJECT_MODIFIER</DD>
</DL>
</I><P>The float value <I>Number_Of_Points</I> specifies the number of 2-D vectors which follow. The points <I>&lt;Point_1&gt;</I> through <I>&lt;Point_n&gt;</I> are two-dimensional vectors consisting of the radius and the corresponding height, i.e. the position on the rotation axis. These points are smoothly connected (the curve is passing through the specified points) and rotated about the y-axis to form the SOR object. The first and last points are only used to determine the slopes of the function at the start and end point. They do not actually lie on the curve.  The function used for the SOR object is similar to the splines used for the lathe object. The difference is that the SOR object is less flexible because it underlies the restrictions of any mathematical function, i.e. to any given point y on the rotation axis belongs at most one function value, i.e. one radius value. You can't rotate closed curves with the SOR object.</P>
<P>The optional keyword <b><code>open</code></b> allows you to remove the caps on the SOR object. If you do this you shouldn't use it with CSG anymore because the results may be wrong.</P>
<P>The SOR object is useful for creating bottles, vases, and things like that. A simple vase could look like this:</P>
<PRE> #declare Vase = sor {
  7,
  &lt;0.000000, 0.000000&gt;
  &lt;0.118143, 0.000000&gt;
  &lt;0.620253, 0.540084&gt;
  &lt;0.210970, 0.827004&gt;
  &lt;0.194093, 0.962025&gt;
  &lt;0.286920, 1.000000&gt;
  &lt;0.468354, 1.033755&gt;
  open
 }</PRE>
<P>One might ask why there is any need for a SOR object if there is already a lathe object which is much more flexible. The reason is quite simple. The intersection test with a SOR object involves solving a cubic polynomial while the test with a lathe object requires to solve of a 6th order polynomial (you need a cubic spline for the same smoothness). Since most SOR and lathe objects will have several segments this will make a great difference in speed. The roots of the 3rd order polynomial will also be more accurate and easier to find.</P>
<P>The <b><code>sturm</code></b> keyword may be added to specify the slower but more accurate Sturmian root solver.  It may be used with the surface of revolution object if the shape does not render properly.</P>
<P>The following explanations are for the mathematically interested reader who wants to know how the surface of revolution is calculated. Though it is not necessary to read on it might help in understanding the SOR object.</P>
<P>The function that is rotated about the y-axis to get the final SOR object is given by</P>
<B><P ALIGN="CENTER"><IMG SRC="Image98.gif" WIDTH=427 HEIGHT=54></P>
</B><P>with radius <I>r</I> and height <I>h</I>. Since this is a cubic function in h it has enough flexibility to allow smooth curves.</P>
<P>The curve itself is defined by a set of n points P(i), i=0...n-1, which are interpolated using one function for every segment of the curve. A segment j, j=1...n-3, goes from point P(j) to point P(j+1) and uses points P(j-1) and P(j+2) to determine the slopes at the endpoints. If there are n points we will have n-3 segments. This means that we need at least four points to get a proper curve.</P>
<P>The coefficients A(j), B(j), C(j) and D(j) are calculated for every segment using the equation</P>
<B><P ALIGN="CENTER"><IMG SRC="Image99.gif" WIDTH=390 HEIGHT=479></P>
</B><P>where r(j) is the radius and h(j) is the height of point P(j).</P>
<P>The figure below shows the configuration of the points P(i), the location of segment j, and the curve that is defined by this segment.</P>
<B><P ALIGN="CENTER"><IMG SRC="Image100.gif" WIDTH=359 HEIGHT=297></P>
<P ALIGN="CENTER">Segment j of n-3 segments in a point configuration of n points. </P>
<P ALIGN="CENTER">The points describe the curve of a surface of revolution.'</P>
</B>
<BR>
<HR>
<P ALIGN="CENTER">
Previous:<A HREF="pov247.htm">Superquadric Ellipsoid</A>&nbsp;&nbsp;
<A HREF="povuser.htm">Main Index</A>&nbsp;&nbsp;
Next:<A HREF="pov249.htm">Text</A>
</P>
</BODY>
</HTML>
