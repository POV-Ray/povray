------------------------------------------------------------------------------
POV-Ray Revision History
------------------------------------------------------------------------------
Notes:

- POV-Ray's actual revision history after version 3.7.0 is non-linear. This
  digest presents this history from the perspective of the main development
  branch, ignoring version numbers associated with side branches, and listing
  changes in the order they were included in the main branch rather than
  chronologically.

- To view a referenced GitHub issue (#xxx), replace the leading # of the
  issue ID with the URL https://github.com/POV-Ray/povray/issues/.
  For example, to read GitHub issue #58, visit:
  https://github.com/POV-Ray/povray/issues/58

- To view a referenced flyspray bug report (FS#xxx), replace the leading
  FS# of the flyspray bug ID with the URL http://bugs.povray.org/.
  For example, to read FS#270, visit:
  http://bugs.povray.org/270

  (Note: As of v3.7.1-beta.8 our flyspray bug tracker is officially mothballed,
  and we no longer refer to it in the changelog. Any flyspray reports that
  were still open at that point have been duplicated as GitHub issues titled
  "Port of FSxxx - ...")

- To view a referenced newsgroup posting (<xxxxx@news.povray.org>), prefix
  the message ID with the URL http://news.povray.org/.
  The '<' and '>' are optional (if using a shell you may want to omit them).
  For example, to read <42765ef3$1@news.povray.org>, visit:
  http://news.povray.org/42765ef3$1@news.povray.org
------------------------------------------------------------------------------

------------------------------------------------------------------------------
POV-Ray v3.8.0-???
------------------------------------------------------------------------------

Commit c341c943 on 2019-01-11 by Christoph Lipka

    Merge branch 'refactor/tokenizer'

Commit 21241276 on 2019-01-11 by Christoph Lipka

    [parser] Earmark text primitive `cmap` extension as experimental.

Commit 90afa652 on 2019-01-11 by Christoph Lipka

    Parser code cleanup, comments and character encoding changes.
    Also changes to TrueType handling code related to character mapping.

Commit 99ce66ab on 2019-01-03 by Christoph Lipka

    [parser] Eliminate loop from `Parse_Directive()`.

Commit f0b7ee29 on 2019-01-02 by Christoph Lipka

    [parser] Add more experimental assertions.

Commit 83ff9486 on 2019-01-02 by Christoph Lipka

    [parser] Eliminate some potential issues related to token counting.

Commit c89f597a on 2019-01-02 by Christoph Lipka

    [parser] More refactoring related to symbol tables.

Commit 72433b2f on 2019-01-02 by Christoph Lipka

    Pull task management out of Parser module.

Commit 143614db on 2018-12-16 by Christoph Lipka

    [parser] Move symbol table handling into separate class.

Commit 73726447 on 2018-12-15 by Christoph Lipka

    [parser] Remove some obsolete constants.

Commit a659aac9 on 2018-12-12 by Christoph Lipka

    [base] Change some string parameters from C-style to C++-style.

Commit 8c5cf5e7 on 2018-12-12 by Christoph Lipka

    [parser] Change some C-style strings to C++-style strings.

Commit d806f661 on 2018-12-11 by Christoph Lipka

    [parser] More miscellaneous refactoring.

Commit 7d8dc2db on 2018-12-09 by Christoph Lipka

    [parser] Fix build error introduced with previous commit.

Commit 7c85b488 on 2018-12-08 by Christoph Lipka

    [parser] Miscellaneous refactoring.

Commit 4eb65137 on 2018-12-08 by Christoph Lipka

    [parser] Fix a memory leak.

Commit 8e2d4495 on 2018-11-28 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit 063e6a9e on 2018-09-23 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit 730c137d on 2018-09-19 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit 7361007d on 2018-09-19 by Christoph Lipka

    [parser] Fix parse error when a macro invocation is immediately followed
    by the end of file.

Commit d4e74268 on 2018-09-18 by Christoph Lipka

    Fix crash trying to read a density file.

Commit c661589c on 2018-09-17 by Christoph Lipka

    [parser] Clean up behaviour regarding dictionaries and `#ifdef`.

Commit 06f9a321 on 2018-09-17 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit 33b5edc9 on 2018-09-12 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit aa871435 on 2018-06-02 by Christoph Lipka

    Trim obsolete code from string handling in parser.

    - `String_Literal_To_UCS2` was found to only be called in contexts
      where string encoding is inevitably set to ASCII, and with `pathname`
      parameter set to `false`.
    - `String_To_UCS2` was found to only be called with pure ASCII strings,
      except potentially when parsing the `datetime()` function (first
      introduced in v3.7) with `#version` set to a pre-v3.5 version.

Commit db025cfd on 2018-06-01 by Christoph Lipka

    Re-implement support for UTF-8 encoded source files with signature BOM.

Commit fa25626c on 2018-06-01 by Christoph Lipka

    Minor cleanup of parser code.

Commit ac88d0e7 on 2018-05-31 by Christoph Lipka

    Re-enable `#read` statement.

Commit 9a2cd33e on 2018-05-31 by Christoph Lipka

    Minor refactoring of `#for` loop code.

Commit a5e8ee62 on 2018-05-24 by Christoph Lipka

    Re-enable version-dependent handlng of backslashes in file name literals.

Commit af7e2a8e on 2018-05-23 by Christoph Lipka

    Improve scanner performance.

Commit eae2d4c6 on 2018-05-23 by Christoph Lipka

    Re-enable macro caching.

Commit 8e915f7d on 2018-05-23 by Christoph Lipka

    Fix scanner/tokenizer errors getting reported as "unknown error".

Commit 51e3aaa2 on 2018-05-22 by Christoph Lipka

    Merge branch 'master' into refactor/tokenizer

Commit e3036cb9 on 2018-05-22 by Christoph Lipka

    Fix another build error on clang/Mac.

Commit 4e414697 on 2018-05-22 by Christoph Lipka

    Fix build errors in previous commit.

Commit e53e181e on 2018-05-22 by Christoph Lipka

    Redesign parser scanner/tokenizer stage.

Commit 85db57d9 on 2019-01-11 by Christoph Lipka

    [ci skip] Update change log.

Commit 851c3e3d on 2019-01-03 by Christoph Lipka

    [ci skip] Fix bug in `ior.inc`.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9945627
------------------------------------------------------------------------------

Commit a9eb1a62 on 2018-11-28 by Christoph Lipka

    [parser] Fix dynamically-sized array initializer causing the parser to
    lock up.
    Also fix a debug assertion along the way.

Commit a969d8fe on 2018-10-29 by Christoph Lipka

    [ci skip] Update docs.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9893777
------------------------------------------------------------------------------

Commit 55afc36b on 2018-10-21 by Christoph Lipka

    [parser] Fix bug trying to undefine a dictionary element.

Commit c3fec22c on 2018-10-21 by Christoph Lipka

    Fix dithering being stuck to Stucki.

Commit f2ebbb75 on 2018-10-01 by Christoph Lipka

    [base] Fix resource leak introduced with recent commit 7b8df044
    (CID 1439830).

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9861167
------------------------------------------------------------------------------

Commit fa813f12 on 2018-10-01 by Christoph Lipka

    Move lonely gamma sample scene from `scenes/gamma` to `scenes/output`.

Commit 7b8df044 on 2018-09-30 by Christoph Lipka

    Change output handling.

    - Add support for bit depths as low as 1 bpc.
    - Add support for low-depth greyscale output.
    - Add support for greyscale preview.
    - Change PGM gamma handling.
    - Add more dither algorithms, including blue noise ordered dither.

    Also refactor some related code.

Commit b2972995 on 2018-09-28 by Christoph Lipka

    Overhaul "meta-make" process to use a proper makefile.

Commit c0cb3c66 on 2018-09-26 by Christoph Lipka

    Miscellaneous changes to dithering implementation.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9850723
------------------------------------------------------------------------------

Commit 7bcbea72 on 2018-09-23 by Christoph Lipka

    [parser] Implement mixed-type arrays at last, albeit with a change to
    syntax. Also refactor array related code.

Commit b5b17eaa on 2018-09-19 by Christoph Lipka

    [parser] Change defaults to no longer be determined by very first
    `#version` statement.
    Instead, subsequent `#version` statements may switch defaults back and
    forth until the first `default` statement.

Commit 45347628 on 2018-09-19 by Christoph Lipka

    [core] Remove an assertion from `VectorPool` class that turned out to
    be violated, adding a corresponding comment.

Commit 9f9b392e on 2018-09-19 by Christoph Lipka

    [parser] Modify bicubic patch and matrix syntax to allow for trailing
    commas.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9844500
------------------------------------------------------------------------------

Commit 425aa488 on 2018-09-19 by Christoph Lipka

    [core] Amendment to previous commit.

Commit 6d0e6f93 on 2018-09-19 by Christoph Lipka

    [core] Fix memory leak in `VectorPool` class.

Commit 68c73806 on 2018-09-17 by Christoph Lipka

    [core] Fix a coding flaw in `randomsequence.cpp` function
    `Uniform2dOnSquare()`.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9841009
------------------------------------------------------------------------------

Commit 8c1eb72b on 2018-09-17 by Christoph Lipka

    Add anti-aliasing mode 3 (port from UberPOV).

    Also add some bits of infrastructure for future optimization and better
    co-operation of various stochastic features like jittered area lights,
    jittered media sampling, subsurface light transport and the like.

Commit 8fc5463e on 2018-09-13 by Christoph Lipka

    Fix bug in `f_enneper` inbuilt isosurface function detected by static
    code analysis (CID 1372542-1372544).

Commit 508f60cf on 2018-09-12 by Christoph Lipka

    Update change log.

Commit 915abb22 on 2018-09-12 by Christoph Lipka

    Fix uninitialized variables in photons code discovered by static code
    analysis (CID 1372618, CID 1372630-1372632).
    Also placate static code analysis about a few others in user function
    VM code (CID 967358-967362).

Commit 65bd3196 on 2018-09-12 by Christoph Lipka

    Fix bug in OpenEXR file handling code found by static code analysis
    (CID 986462 and 986463).

Commit 7de830ce on 2018-09-12 by Christoph Lipka

    Eliminate C-style memory allocation in parametric.

Commit 7fa6bb53 on 2018-09-12 by Christoph Lipka

    Refactor flagging of opaque objects during parser post-processing.

Commit 6fdadbde on 2018-09-12 by Christoph Lipka

    [windows] Fix error in recent commit 917a8763 that broke the build.

Commit 24700edb on 2018-09-12 by Christoph Lipka

    Eliminate C-style memory allocation in polygon.

Commit 917a8763 on 2018-09-12 by Christoph Lipka

    Get rid of C-style `NULL` throughout the code in favour of the less
    ambiguous C++11-style `nullptr`.

Commit 72cf1a73 on 2018-09-12 by Christoph Lipka

    Replace more magic constants in POVMS.

Commit aa0b48d7 on 2018-09-12 by Christoph Lipka

    Clean up use of boolean values in POVMS.

Commit 49873bf9 on 2018-09-12 by Christoph Lipka

    Improve code clarity with regards to POVMS return values, fixing a few
    bugs along the way.

Commit dfda62b7 on 2018-09-12 by Christoph Lipka

    Minor update to stack size configuration.

Commit 72862c76 on 2018-09-12 by Christoph Lipka

    Minor code simplification in quadrics code.

Commit 7bde9196 on 2018-09-12 by Christoph Lipka

    Update various comments and a few text strings.

Commit 344ed893 on 2018-09-11 by Christoph Lipka

    Update to `.gitattribute`; most notably, prevent auto-merging of
    `source/base/version.h`.

Commit 8a43226e on 2018-09-11 by Christoph Lipka

    Minor update to `source/base/build.h` and related docs.

Commit 96489d42 on 2018-09-09 by Christoph Lipka

    [unix] Make `.configure` script `COMPILED_BY` parameter optional,
    defaulting to login name.

Commit 63580949 on 2018-09-09 by Christoph Lipka

    Fix bug introduced with commit 1d120c90.

Commit 0984776b on 2018-09-09 by Christoph Lipka

    Update git pre-commit hook. Please copy `tools/git/hooks/pre-commit`
    to `.git/hooks/`.

Commit 2843d762 on 2018-09-08 by Christoph Lipka

    Fix blatant coding error in POVMS UCS2 string handling.

Commit 264fa229 on 2018-09-07 by Christoph Lipka

    Fix clang build error introduced with previous commit, and silence a
    few more clang warnings.

Commit 1d120c90 on 2018-09-07 by Christoph Lipka

    Silence some clang warnings.

Commit f09a7b4f on 2018-09-02 by Christoph Lipka

    Disable new UV mappings of cylinder, cone and lemon primitives for now.

Commit d20c6d42 on 2018-08-27 by Christoph Lipka

    Improve `#breakpoint` debugging aid.
    Also update changelog.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9811560
------------------------------------------------------------------------------

Commit c42e14e7 on 2018-08-27 by Christoph Lipka

    Fix hard crash in `#declare Foo[A][B]=...` if `Foo` is an array of
    arrays and `Foo[A]` is uninitialized.

Commit 669144e1 on 2018-06-17 by Christoph Lipka

    Fix bug in legacy `version` setting.

Commit ecad9eb1 on 2018-05-27 by Grimbert Jérôme

    Correct (historical) typo for Julia fractal with hypercomplex (#359)

    a small typo, a huge impact on rendered fractal (where .y component was
    used also as .z, ignoring the provided .z )

Commit 851a509b on 2018-05-22 by Christoph Lipka

    Merge remote-tracking branch 'origin/master'

Commit d825eccf on 2018-05-22 by Christoph Lipka

    Update maintenance status in README.md

Commit e561dfb2 on 2018-05-22 by Christoph Lipka

    Fix another build error on Windows.

Commit cb744d84 on 2018-05-22 by Christoph Lipka

    Check in a file that accidently didn't make it into ef3c54f8.

Commit d6cee867 on 2018-05-21 by Christoph Lipka

    [ci skip] Bring unit test project back to life.

Commit ef3c54f8 on 2018-05-04 by Christoph Lipka

    Eliminate use of `POV_LONG` in the role as 64-bit file offset, and
    redirect references to `lseek64` via an obvious macro.

Commit 8ef36699 on 2018-05-04 by Christoph Lipka

    Move parser code into dedicated namespace.

Commit 06a120de on 2018-05-02 by Alec Perkins

    Fix typo in README.md (#356)

Commit 576077ed on 2018-05-01 by Christoph Lipka

    [ci skip] Some source documentation work.

Commit bf0e4bf8 on 2018-04-08 by Christoph Lipka

    Some updates to the coding styleguide.

Commit a1ae5d69 on 2018-04-08 by Christoph Lipka

    Work around thread_local-related compiler bug on Mac OS X.

Commit f4ca05e0 on 2018-04-07 by Christoph Lipka

    Eliminate build error in photons code.

Commit 1c131b77 on 2018-04-07 by Christoph Lipka

    Update revision.txt.

Commit d8b8ecfe on 2018-04-07 by Christoph Lipka

    Fold v3.8.0 branch back into master branch for now.

Commit af431c4d on 2018-01-18 by Christoph Lipka

    Eliminate C-style memory allocations from photons code.

    Also do some code cleanup along the way.

Commit be480147 on 2018-01-18 by Christoph Lipka

    Eliminate C-style memory allocations from height field code.

Commit 88171b5e on 2018-01-07 by Christoph Lipka

    Eliminate C-style memory allocations from TrueType code.

Commit 9c671746 on 2018-01-06 by Christoph Lipka

    Merge branch 'release/v3.8.0'

Commit b3038c26 on 2017-12-03 by Christoph Lipka

    Merge branch 'release/v3.8.0'

Commit 56cbef48 on 2017-10-12 by Christoph Lipka

    Update ISSUE_TEMPLATE.md

Commit 04e1a546 on 2017-10-12 by Christoph Lipka

    Update ISSUE_TEMPLATE.md

Commit 54474e8b on 2017-09-20 by Christoph Lipka

    [ci skip] Add GitHub issue template.

Commit 5410fd42 on 2017-06-24 by Christoph Lipka

    Minor updates to compile-time config.

Commit 1c69d04f on 2017-06-24 by Christoph Lipka

    Minor code cleanup in VFE.

Commit 4be26aba on 2017-06-23 by Christoph Lipka

    Minor code change to `polynomialsolver.cpp`

Commit eb885ded on 2017-06-20 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit cd135029 on 2017-06-20 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 815a84a6 on 2017-05-22 by Bernhard M. Wiedemann

    Improve reproducibility of Unix builds. (#296)

    This commit enforces alphabetical ordering of code units (`.cpp` files)
    in the linkage process, making sure that builds produce bit-identical
    binaries regardless of the physical ordering of the files in the file
    system (on otherwise identical build environments).

Commit 041e9b02 on 2017-05-15 by William F. Pokorny (wfpokorny)

    [ci skip] Removing comment related to long gone FRAND() macro. (#264)

Commit 35894e56 on 2017-05-14 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 4a7564ae on 2017-05-07 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 9ceb3efd on 2017-05-07 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit e9532897 on 2017-05-07 by William F. Pokorny (wfpokorny)

    Improving performance of gatherPhotonsRec function. (#280)

Commit 1e3b586b on 2017-04-02 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit b0084bef on 2017-02-12 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 71c1415e on 2017-01-27 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit d6e8257d on 2017-01-16 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 837a5c92 on 2017-01-08 by Christoph Lipka

    Merge branch 'release/v3.7.1'

Commit 283f7bf3 on 2017-01-01 by Christoph Lipka

    Update README.md

Commit 09fc31df on 2017-01-01 by Christoph Lipka

    Prepare for 3.7.2 development phase.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9606898
------------------------------------------------------------------------------

Commit 589cc9a8 on 2018-04-07 by Christoph Lipka

    [ci skip] Fix issue in AppVeyor config for autobuild branches.

Commit 083ffa4a on 2018-01-18 by Christoph Lipka

    Change AppVeyor config file to work for all v3.8 branches.

Commit 5b99fdc9 on 2018-01-18 by Christoph Lipka

    Fix GitHub issue #319.

Commit 9248849e on 2018-01-18 by Christoph Lipka

    Clean up use of `snprintf`/`vsnprintf` to use C++11 standard
    functions. (#343)

    Also replace `FILE_NAME_LENGTH` macro along the way in hope to clarify
    the code, and eliminate `MAX_PATH` from all but the Windows-specific code.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9475849
------------------------------------------------------------------------------

Commit 26e2d47a on 2018-01-06 by Christoph Lipka

    Improve parsing speed of skipped conditional blocks.

Commit 3600d856 on 2018-01-05 by Christoph Lipka

    Fix block pattern density list parsing issue.

Commit 2d23e49e on 2018-01-05 by Christoph Lipka

    Fix GitHub issue #342 for v3.8 branch.

Commit d418768f on 2018-01-05 by Christoph Lipka

    Change `unix/prebuild.sh` to allow running it from the main directory.

Commit 8f4ba8ab on 2018-01-01 by Christoph Lipka

    Fix configure script failing to use -lboost_system with Boost 1.66.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9436902
------------------------------------------------------------------------------

Commit 21fc7673 on 2017-12-05 by Christoph Lipka

    Drop unused `steps` keyword.

Commit bb85b4fd on 2017-11-18 by Christoph Lipka

    Update benchmark scene for v3.8.

Commit 3dc2808f on 2017-11-18 by Christoph Lipka

    Re-sync inbuilt benchmark scene with distributed copy.

Commit 3d6f5b1e on 2017-11-18 by William F. Pokorny (wfpokorny)

    [ci skip] Adding /unix/config/ar-lib to .gitignore. (#337)

Commit 4e82cde6 on 2017-11-18 by Christoph Lipka

    Prepare to re-sync inbuilt benchmark scene with distributed copy.

Commit accc779d on 2017-11-10 by Christoph Lipka

    Eliminate `FixedSimpleVector`.

Commit 33ecddad on 2017-11-09 by Christoph Lipka

    Improve doxygen documentation of normally-undefined macros.

Commit f002c45a on 2017-11-07 by Christoph Lipka

    Fix crash in debug version when `+GI`/`Create_Ini` option is used.

Commit c612c60a on 2017-11-06 by Christoph Lipka

    Fix an academic flaw in JPEG file handling code.

Commit 8406fe65 on 2017-11-06 by Christoph Lipka

    Fix more missing includes, which caused errors building the Unix version
    on Mac OS.

Commit f232ce8b on 2017-11-06 by Christoph Lipka

    Fix errors building the Unix version on Mac OS.

Commit f123f796 on 2017-11-06 by Christoph Lipka

    Eliminate Autoconf warnings and bump required Autoconf version to 2.68.

Commit 48dd5bb6 on 2017-11-06 by Christoph Lipka

    Fix some instances of missing namespace qualifiers.

Commit 4a3a143b on 2017-11-06 by Christoph Lipka

    Fix a few macro names not complying with C++ standard (reserved for
    compiler use).

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9387404
------------------------------------------------------------------------------

Commit 42c96b9d on 2017-11-06 by Christoph Lipka

    Fix bug in prism that could cause sides to become invisible when using
    `conic_sweep` with orthographic camera.

Commit 4de4b3d7 on 2017-10-30 by Christoph Lipka

    Change default pigment to white.

Commit 61d1d1f4 on 2017-09-27 by Christoph Lipka

    Fix potential crash in ovus parsing.

Commit e7aac79d on 2017-09-26 by Christoph Lipka

    Fix some `interior_texture` bugs (issue #65 and subsequent discussion).

    - Fix `prism` primitive `bezier_spline` sides.
    - Fix `prism` primitive bottom.
    - Fix `text` primitive sides as suggested by Grimbert Jérôme
      <LeForgeron@users.noreply.github.com>.

Commit 7cab5202 on 2017-09-23 by Christoph Lipka

    Fix Unix build error due to issue in `tools/unix/get-source-version.sh`.

Commit 16378dcb on 2017-09-23 by Christoph Lipka

    Drop `unix/VERSION` from the repository.

Commit 1a2df0ea on 2017-09-23 by Christoph Lipka

    A few updates to Git pre-commit hook; please copy to `.git/hooks`.

Commit 53d20a88 on 2017-09-23 by Christoph Lipka

    Minor changes to version info macro framework.

Commit 497a5071 on 2017-09-23 by Christoph Lipka

    Front-end now completely relies on back-end to provide version info.

Commit 24f03c19 on 2017-09-23 by Christoph Lipka

    Codify canonical format for referencing POV-Ray version numbers (see
    `source-doc/versioning.md`).

Commit f68e3ac8 on 2017-09-23 by Christoph Lipka

    Drop `boost/tr1` module from the boost library subset bundled with
    POV-Ray.

Commit f4901fb7 on 2017-09-23 by Christoph Lipka

    Eliminate use of C++ `register` keyword and fix a few data types along
    the way.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9322209
------------------------------------------------------------------------------

Commit 12fbab3e on 2017-09-21 by Christoph Lipka

    Change camera `right` default length to output image aspect ratio.

Commit 17e3f645 on 2017-09-20 by Christoph Lipka

    Modify doxygen invocation scripts to not rely on `unix/VERSION` for
    version info.

Commit 844dae60 on 2017-09-20 by Christoph Lipka

    Minor beautification of previous commits.

Commit e39f5af2 on 2017-09-20 by Grimbert Jérôme

    Extension of ovus (#306)

    - allow the center of the top sphere to not be on the top of the bottom
      sphere (via "distance xxx")
    - allow the radius of the torus spindle to be manually specified (via
      "radius xxx")
    - allow precision of the root solver to be tuned (via "precision xxx")
    - change of UV-Mapping to be similar to the uv-mapping of cone & cylinder

Commit 0358da00 on 2017-09-20 by Grimbert Jérôme

    Change ambient default to 0.0 (#305)

    When version is explicitly set to 3.8 or greater, either in the option or
    as the first statement of the scene, the default ambient finish is set to
    0.0 (instead of 0.1 which is problematic with gamma handling rgb vs srgb)

Commit 7d225a07 on 2017-09-17 by Christoph Lipka

    Fix bug in Windows version info macros.

------------------------------------------------------------------------------
POV-Ray v3.8.0-alpha.9309453
------------------------------------------------------------------------------

Commit d850f922 on 2017-09-12 by Christoph Lipka

    Add Windows scripts to extract version information from `base/version.h`.

Commit 5cdb3f76 on 2017-09-10 by Christoph Lipka

    Update POV-Ray's mechanism to inherit settings from older versions
    on Windows.

Commit bbb4a357 on 2017-09-10 by Christoph Lipka

    Add Unix command-line option to print short version number.

    Specifying `--generation` as a command-line parameter will cause POV-Ray
    for Unix to print its "generation" and beta status (if applicable)
    to standard output, then exit. For example, for v3.8.1 this would be
    `3.8`; for a beta version of that release, it would be `3.8-beta`.

Commit 8bc48810 on 2017-09-10 by Christoph Lipka

    Update some more version numbers thoughout the repo.

Commit 03e27c66 on 2017-09-10 by Christoph Lipka

    Update docs.

Commit 1dbca0ba on 2017-09-06 by Christoph Lipka

    Remove dependency on `boost::tr1` to fix issue #317.

Commit 7bddd06f on 2017-09-06 by Christoph Lipka

    Enable and require C++11.

Commit 7a99e7c6 on 2017-08-18 by Christoph Lipka

    [ci skip] Update and fix `README.md`.

Commit 2c3afc43 on 2017-07-09 by Christoph Lipka

    [ci skip] Update source documentation of version numbering.

Commit 443ae796 on 2017-07-08 by Christoph Lipka

    Major overhaul of version number macro system in `version.h`.

    Replaced the various redundant representations of the version number as
    authoritative sources of information with a set of integers, each one
    corresponding to a single numerical field of the version number. Any
    other representations of the version number are now automatically
    derived from these (plus the prerelease tag, if applicable).

    Also added a mechanism that allows v3.8 binaries to run on top of a v3.7
    host installation for now, so that we don't need any 3.8 installers yet.

    Note that this commit comes with an updated Git pre-commit hook; to
    install it, copy `pre-commit` from `tools/git/hooks/` to `.git/hooks/`
    in your local repository.

Commit 463442e2 on 2017-07-08 by Christoph Lipka

    Update version number in AppVeyor automated build config.

Commit 9f644fed on 2017-07-07 by Christoph Lipka

    Add some debugging aids.

    - When compiled in debug mode, a new statement `#breakpoint` is now
      available. Its sole purpose is to serve as a hook for a breakpoint,
      which can then be triggered anytime from the scene file.
    - When compiled in debug mode, POV-Ray for Windows will now make do with
      the release version of the editor DLLs if it can't find the debug version.

Commit b1087484 on 2017-07-05 by Christoph Lipka

    Demote version back to alpha status for now.

Commit bdbb0b57 on 2017-07-02 by Christoph Lipka

    Bump version threshold for new features to 3.8.

    Any new behaviour formerly activated by `#version 3.71` now requires
    `#version 3.8` (or higher); specifying `#version 3.71` will trigger a
    corresponding warning.
    Also updated sample scenes and include files accordingly.

Commit 71b165fd on 2017-07-02 by Christoph Lipka

    Eliminate various explicit mentions of version numbers.

Commit 7957ad5c on 2017-06-29 by Christoph Lipka

    Elimiate unnecessary version numbers from HTML Help infrastructure.

Commit 71958105 on 2017-06-26 by Christoph Lipka

    Update remaining source code file header comments.

Commit b0557b87 on 2017-06-26 by Christoph Lipka

    Update bulk of source code file header comments.

Commit 09f1014d on 2017-06-26 by Christoph Lipka

    Bump version number in the most essential places.

Commit 9808f53a on 2017-06-24 by William F. Pokorny (wfpokorny)

    Update list of required packages for Unix builds. ( #294)

------------------------------------------------------------------------------
POV-Ray v3.7.1-rc.1  (officially retracted)
------------------------------------------------------------------------------

Commit e3c1738c on 2017-06-22 by Christoph Lipka

    Fix a blunder in `version.h`.

Commit 315bb46a on 2017-06-22 by Christoph Lipka

    Bump version number and update change log.

Commit b08846b3 on 2017-06-20 by Christoph Lipka

    Fix potential issue in optimized noise when building on Unix with
    `CXXFLAGS=-fno-fma` or similar.

Commit 3bc30fbd on 2017-06-18 by Christoph Lipka

    Fix bug introduced with commit cc77eea that broke builds without
    optimized noise.

Commit 50cd2a0d on 2017-06-18 by Christoph Lipka

    Clean up include hierarchy in `frontend` module.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.9
------------------------------------------------------------------------------

Commit 037f20ea on 2017-06-17 by Christoph Lipka

    Bump version number and update change log.

Commit e2f3882a on 2017-06-17 by Christoph Lipka

    Fix artifacts in output image file caused by certain mosaic pretrace
    settings.

    Using mosaic pretrace with `+ep1 -a` caused every second pixel in every
    second row to turn black in the output image file, due to a conceptual
    error introduced in commit 2d12f46. Fixed.

    Also includes some minor code cleanup.

Commit d99e80a2 on 2017-06-12 by Christoph Lipka

    Permanent fix for GitHub issue #137.

Commit 923bd8dd on 2017-06-11 by Christoph Lipka

    Minor code cleanup.

Commit cc77eea6 on 2017-06-11 by Christoph Lipka

    More refactoring of optimized noise generator mechanism and CPU feature
    detection.

Commit e469760a on 2017-06-10 by Christoph Lipka

    Update docs.

Commit 98343346 on 2017-05-23 by William F. Pokorny (wfpokorny)

    Removing Perforce references and related comments. (#297)

Commit 6fe910ca on 2017-05-22 by Bernhard M. Wiedemann

    Improve reproducibility of Unix builds. (#296)

    This commit enforces alphabetical ordering of code units (`.cpp` files)
    in the linkage process, making sure that builds produce bit-identical
    binaries regardless of the physical ordering of the files in the file
    system (on otherwise identical build environments).

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.8
------------------------------------------------------------------------------

Commit e817cc4b on 2017-05-20 by Christoph Lipka

    Bump version number and update change log.

Commit 295022b8 on 2017-05-20 by Christoph Lipka

    Add support for CPU-specific optimizations to Unix version. (#293)

Commit 3d30fb36 on 2017-05-16 by Christoph Lipka

    Fix bulk of GitHub issue #147 sphere sweep artifacts for good.

Commit 36b2a150 on 2017-05-14 by Christoph Lipka

    Update docs.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.7
------------------------------------------------------------------------------

Commit 8725d43b on 2017-05-14 by Christoph Lipka

    Bump version number and update change log.

Commit 5e4653d3 on 2017-05-14 by Christoph Lipka

    Fix crashes and performance losses related to noise optimizations.

    MS Visual Studio's "Whole Program Optimization" feature ( `/GL`)
    seems to have caused cross-contamination between code paths designated
    to be optimized for different enhanced instruction sets (`/arch:AVX`,
    `/arch:AVX2`, or none), causing crashes on non-AVX-capable CPUs as well
    as poor performance on others. As a remedy, whole program optimization
    is now turned off for all source files designated to make use of enhanced
    instruction sets.

Commit 06469c5f on 2017-05-09 by Christoph Lipka

    More sphere sweep changes.

    - Revert most of commit be3225d, which was based on a misunderstanding
      of the code.
    - Eliminate a bit more unnecessary copying around of data along the way.
    - Fix some inside texture inconsistencies when using control points
      with negative radii.
    - Document some of the insight gained into the workings of the sphere
      sweep code.

Commit 887467ef on 2017-05-09 by Christoph Lipka

    Fix bug in new cublic spline sphere sweep bounding box computations.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.6
------------------------------------------------------------------------------

Commit 6345350c on 2017-05-07 by Christoph Lipka

    Update change log.

Commit ab22c3e2 on 2017-05-07 by Christoph Lipka

    Fix for a bug in recent commit ce8b193.

Commit 329ad8ae on 2017-05-07 by Christoph Lipka

    [ci skip] Bump version number and update change log.

Commit ce8b1939 on 2017-05-07 by Christoph Lipka

    Fix some sphere sweep issues.

    - Fix GitHub issue #285.
    - Fix `cubic_spline` sphere sweep bounding (see GitHub issue #147).

Commit 57cdebbb on 2017-05-07 by Christoph Lipka

    Remove obsolete constants from the POVMS interface.

Commit be3225da on 2017-05-07 by Christoph Lipka

    Sphere sweep performance improvements.

    - Intersections with the spheres at the ends of the segments were
      computed thrice(!) between segments, and twice at the ends of the
      entire spline. These duplicate computations have been eliminated,
      and the sphere sweep memory footprint reduced along the way.
    - Minor improvements to avoid some unnecessary copying of information.

Commit b0b6917c on 2017-05-07 by Christoph Lipka

    Fix GitHub issue #287.

    This commit reverts change 4947, made prior to the release of 3.7.1,
    which was intended to work around artifacts described in FlySpray bug
    report 81 (now tracked as GitHub issue #147) but has now turned out to
    cause severe problems when using shpere sweeps in differences or merges.

Commit 3f16f205 on 2017-05-07 by Christoph Lipka

    Minor source comment fixes.

Commit 1f3dc8f6 on 2017-05-07 by William F. Pokorny (wfpokorny)

    Improving performance of gatherPhotonsRec function. (#280)

Commit d50fe7c0 on 2017-05-05 by Christoph Lipka

    More updates to optimized noise.

    - The new `AVXPortableNoise` implementation now uses the default
      portable noise code via `#include` rather than duplication of code. To
      this end, the default portable noise code has been pulled out of
      `core/material/texture.cpp` into a separate file.
    - Other minor beautifications of the new `AVXPortableNoise` and
      related code.
    - Ditched obsolete static `USE_FASTER_NOISE` mechanism and `INLINE_NOISE`
      macro.
    - To support build environments where machine code intrinsics are
      only available when optimization for the corresponding instruction set
      extensions is enabled for the translation unit, and/or where per-file
      compiler settings are difficult to manage, the optimized implementations
      have been moved into separate subdirectories according to the instruction
      set extensions required, and the functions to probe for support have
      been pulled out of the files.

Commit ea3d549a on 2017-04-13 by Anshu Arya

    Update AVXFMA4 noise implementation (#268)

    Improved performance and code readability. The changes only affect AMD
    parts with FMA4 support.

Commit 8a8c73e2 on 2017-04-13 by Anshu Arya

    Add alternative AVX-optimized noise implementation. (#267)

    - Added new noise implementation "AVXPortable" which is essentially a
      clone of PortableNoise compiled separately with compiler AVX flags.

    - Changed the noise code selection based on CPU vendor because the
      existing AVX and AVX2FMA3 implementations lower performance on non-Intel
      CPUs compared to the new AVXPortable or existing portable (non-AVX)
      noise functions.

    - Added noise function selection to benchmark log.

Commit 3adbf759 on 2017-04-12 by William F. Pokorny (wfpokorny)

    Improve AA performance. (#270)

    Especially helps where agressive AA applied to trivial or sparse scenes.

Commit 2be22dd2 on 2017-04-06 by William F. Pokorny (wfpokorny)

    Relax Parse_Lathe point checking for versions <=3.7.0 (#263)

Commit 59ab7f26 on 2017-04-04 by Christoph Lipka

    Fix optional parameters of command-line-style switches in INI files.

Commit 5ca45b2a on 2017-04-02 by Christoph Lipka

    [ci skip] Update Windows help file and Unix HTML doc.

Commit 04dc90e3 on 2017-03-27 by Christoph Lipka

    Fix GitHub issue #260.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.5
------------------------------------------------------------------------------

Commit 8da24d16 on 2017-03-25 by Christoph Lipka

    Bump version number. Also add a doc on our use of GitHub issues.

Commit 6db6b879 on 2017-03-25 by Christoph Lipka

    Eliminate or clean up a few more instances of `dynamic_cast`.

Commit 32f16065 on 2017-03-25 by Christoph Lipka

    Minor update to README.md

Commit 7ffe150e on 2017-03-24 by Christoph Lipka

    Restore turbulent pattern performance as discussed in GitHub issue #48.

Commit 741fae52 on 2017-03-24 by Christoph Lipka

    Overhaul version information, addressing GitHub issue #257.

Commit ea95aa93 on 2017-03-14 by Christoph Lipka

    Update Unix build process to address GitHub issue #226 (#252)

Commit 6f6ac481 on 2017-03-13 by Christoph Lipka

    Update VS2015 project files to avoid requiring a specific Windows SDK.

    As a caveat, the default build process again sacrifices XP compatibility;
    instead, build instructions now contain a section dedicated to building
    XP-compatible binaries.

Commit d0ca075a on 2017-03-13 by William F. Pokorny (wfpokorny)

    [ci skip] Updating devutils.md per current behavior. (#251)

Commit 8a8b5033 on 2017-03-12 by Christoph Lipka

    Restore user-defined function VM performance as discussed in GitHub
    issue #48.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.4
------------------------------------------------------------------------------

Commit dc1a27c0 on 2017-03-04 by Christoph Lipka

    Bump version number.

Commit 6eb1d948 on 2017-03-04 by Christoph Lipka

    Fix SSE2 support detection on Windows XP.

Commit 5e34fd04 on 2017-03-04 by Christoph Lipka

    Upgrade Visual Studio project files from VS 2010 to VS 2015.

Commit 9cc71176 on 2017-02-27 by Christoph Lipka

    Replace Windows plaintext and HTML "readme" files with a Markdown file.

Commit d4cea4d4 on 2017-02-27 by Christoph Lipka

    Fix GitHub issue #241, as well as Windows console version related error
    messages and doc files.

Commit a32a20bc on 2017-02-27 by William F. Pokorny (wfpokorny)

    Fix parse errors in two demo scenes. (#242)

Commit 63e9b8ad on 2017-02-22 by Christoph Lipka

    Fix handling of directory names starting with `../../` in POV-Ray
    for Windows.

Commit 7c744786 on 2017-02-22 by Christoph Lipka

    Fix `ior.inc`.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.3
------------------------------------------------------------------------------

Commit 5ed6025e on 2017-02-19 by Christoph Lipka

    Update change log as well as some comments and build instructions.

Commit 7f41d96b on 2017-02-19 by Christoph Lipka

    Add optimized noise implementation from Intel for AVX2/FMA3-capable CPUs.

    Also overhauled optimized noise for AVX/FMA4-capable CPUs, as well as
    CPU type identification code.

Commit 9cf8a798 on 2017-02-16 by Christoph Lipka

    Fix handling of special directory name `.` in POV-Ray for Windows.

Commit b4605a5d on 2017-02-14 by William F. Pokorny (wfpokorny)

    Fixing thread stack size overrun crash. (#235)

    Fixes Dick Balaska's seg fault as report in beta-test newsgroup on
    February 12, 2017. In particular we are extending the
    POV_THREAD_STACK_SIZE macro mechanism to all NewBoostThread
    calls.

Commit 0e8dbe80 on 2017-02-08 by William F. Pokorny (wfpokorny)

    Adding POV_THREAD_STACK_SIZE macro. (#231)

    Unix default is 4MB due regression, otherise 2MB. Checks added for a min
    size of 64KB.

Commit 060464bd on 2017-02-05 by Christoph Lipka

    [ci skip] Minor update to `README.md`.

Commit cfaa14d5 on 2017-02-05 by Christoph Lipka

    [ci skip] Update POV-Ray for Windows "about" box.

Commit 07646c1e on 2017-01-27 by Christoph Lipka

    Fix a crash and another bug related to `charset utf8`.

Commit 75f497c4 on 2017-01-26 by William F. Pokorny (wfpokorny)

    [ci skip] Adding potential.pov demo scene to the distribution. (#220)

    Also corrects small typo in unix/povray.1 manpage.

Commit de52f677 on 2017-01-25 by Christoph Lipka

    Fix unix build error introduced with previous commit.

Commit 050584ac on 2017-01-25 by Christoph Lipka

    Make optional fields in macro parameters and tuple assignments accept
    uninitialized directory entries.

    Also includes some code beautification.

Commit 1cceb44a on 2017-01-25 by William F. Pokorny (wfpokorny)

    [ci skip] Adding aoi.pov demo scene to the distribution. (#219)

    Note. The scene makes use of 3.71's blend_mode and blend_gamma as well.

Commit eef5c263 on 2017-01-25 by Christoph Lipka

    Fix GitHub issue #212 (plus a few trivial changes).

Commit b367ec11 on 2017-01-17 by William F. Pokorny (wfpokorny)

    Fixing issues with bounding threshold option. (#186)

    Related to ussues #59 and #180. When no bounding threshold is specified
    centralizes the setting and reporting of the bounding threshold to 3.
    Further, restores the clamping of values to 1+ which existed in 3.6.

Commit 72e18d9d on 2017-01-16 by Christoph Lipka

    Try to fix broken pull request build testing.

Commit ae991084 on 2017-01-15 by Christoph Lipka

    Remove unused variable in cone primitive code.

Commit 5ddf12c3 on 2017-01-15 by Christoph Lipka

    Fix GitHub issue #184.

    When using the `user_defined` camera projection, if any of the
    user-defined functions evaluates to an invalid value (such as 1/0, 0/0
    or sqrt(-1)) the corresponding pixel will now be rendered as black (or
    transparent), instead of propagating such values to the render engine
    where it might lead to undefined behaviour.

Commit 6b88d762 on 2017-01-15 by Christoph Lipka

    Make heightfield code more robust (partially addresses GitHub issue #184).

Commit 7f151336 on 2017-01-14 by Christoph Lipka

    [ci skip] Bump version to next beta.

Commit 6ebc9277 on 2017-01-14 by Christoph Lipka

    [ci skip] Fix some external links in the POV-Ray for Windows inbuilt help.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.2
------------------------------------------------------------------------------

Commit 144b8565 on 2017-01-09 by Christoph Lipka

    Update change log.

Commit 481db071 on 2017-01-09 by Christoph Lipka

    Fix some more beta registry key issues.

    - Beta now _does_ use the "v3.7-beta" registry key instead of "v3.7".
    - Beta now only copies v3.6 registry data if no existing v3.7 proper
      installation is found.

Commit b6532d07 on 2017-01-09 by Christoph Lipka

    Update change logs.

Commit e2fe17dd on 2017-01-09 by Christoph Lipka

    Update some strings in the Windows binary headers.

Commit 90d12dbb on 2017-01-08 by Christoph Lipka

    Update change logs.

Commit 3410c236 on 2017-01-08 by Christoph Lipka

    Make betas live happily alongside the previous release, by using a
    different registry key and directory name.

Commit 6aa8ee71 on 2017-01-08 by Christoph Lipka

    [ci skip] Disable automated generation of GitHub release draft.

------------------------------------------------------------------------------
POV-Ray v3.7.1-beta.1  (not officially released)
------------------------------------------------------------------------------

Commit 978ca529 on 2017-01-01 by Christoph Lipka

    Prepare for 3.7.1 beta phase.

Commit c3ad8b20 on 2017-01-01 by Christoph Lipka

    Update copyright notices and change logs.

Commit 605359b6 on 2017-01-01 by Christoph Lipka

    Update POV-Ray for Windows inbuilt help.

Commit 873a63ca on 2016-12-30 by Christoph Lipka

    Add `boost/atomic` package to our subset of the boost library.

Commit 6ba9ec7c on 2016-12-24 by Christoph Lipka

    Update colors.pov.

Commit 938caaee on 2016-12-24 by Christoph Lipka

    Fix colors_ral.inc.

Commit 6dda7c3f on 2016-12-23 by Christoph Lipka

    Update our preferred bug reporting channel in some files. (issue #119)

Commit 9e20adbe on 2016-12-23 by Christoph Lipka

    Update copyright notices.

Commit 63e8f730 on 2016-12-23 by William F. Pokorny (wfpokorny)

    [ci skip] Updating the unix man page. Small typo. (#169)

    Updating our unix man page to be current with recent 3.7.1 master
    version. Also small typo in processrenderoptions.cpp.

Commit 0174c037 on 2016-12-22 by Christoph Lipka

    Update colors_ral.inc.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8927145
------------------------------------------------------------------------------

Commit f24d6560 on 2016-12-21 by Christoph Lipka

    Fix `version.h` erroneously flagging this as a beta version.

Commit 8cce1651 on 2016-12-21 by Christoph Lipka

    Fix bug in previous commit.

Commit 56c574a6 on 2016-12-21 by Christoph Lipka

    Modified the way the finish-level `fresnel` parameter works.

Commit f0fdc362 on 2016-12-20 by Christoph Lipka

    Fix some issues discovered by static code analysis.

Commit 243e9ad1 on 2016-12-20 by Christoph Lipka

    Partial overhaul of string utilities to fix some unsafe string handling.

Commit c6a6e984 on 2016-12-20 by Christoph Lipka

    Fix GitHub issue #175 ("Coredump due recent 3.7.1 parser updates.")

Commit 24b7f9fc on 2016-12-20 by Christoph Lipka

    Update README.md

Commit 2ebea6c8 on 2016-12-19 by Christoph Lipka

    Final(?) update of version number stuff.

Commit 0b9d345b on 2016-12-19 by Christoph Lipka

    Yet more version numbering related changes.

Commit cc91a260 on 2016-12-19 by Christoph Lipka

    Update revision.txt.

Commit a61c7923 on 2016-12-19 by Christoph Lipka

    More version string related changes.

Commit 1514773c on 2016-12-19 by Christoph Lipka

    Update to Windows help file stylesheet.

Commit 1896f8d3 on 2016-12-19 by Christoph Lipka

    Update `version.h` to allow for build IDs in manual builds.

Commit 5e09f104 on 2016-12-17 by Christoph Lipka

    Add new mechanism for automated builds to inject additional defines
    into Windows builds.

Commit fbab8adc on 2016-12-17 by Christoph Lipka

    Addendum to latest two commits.

Commit 6b4cf749 on 2016-12-17 by Christoph Lipka

    Trim down `pov_mem.*` to what's actually still used.

Commit 64ff3080 on 2016-12-17 by Christoph Lipka

    More changes to simplify official builds, including movement of the
    `pov_mem.*` source files.

Commit c84a9904 on 2016-12-17 by Christoph Lipka

    Minor changes to Visual Studio projects for easier official release
    builds.

Commit f233f601 on 2016-12-17 by Christoph Lipka

    Amendment to previous commit.

Commit d96b54fb on 2016-12-17 by Christoph Lipka

    Amputated remnants of some legacy features.

Commit a535aaff on 2016-12-16 by Christoph Lipka

    [ci skip] Add tools for generating the Windows help file to the repo.

Commit 5f89d414 on 2016-12-15 by Christoph Lipka

    Update revision.txt.

Commit b4d0b886 on 2016-12-15 by Christoph Lipka

    Fix two recently introduced parser bugs, one of which tripped the Unix
    build tests.

Commit a04d2414 on 2016-12-15 by Christoph Lipka

    Update to the Git pre-commit hook.

Commit 983ab18b on 2016-12-15 by Christoph Lipka

    Fix some issues discovered by static code analysis.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8917471
------------------------------------------------------------------------------

Commit f8143832 on 2016-12-14 by Christoph Lipka

    Improved behaviour of media with respect to large distances or high
    densities (method 3 only).

Commit 1968b7df on 2016-12-13 by Christoph Lipka

    Disable bidirectional brilliance for now, due to it probably becoming
    obsolete soon anyway.

Commit e47718ee on 2016-12-13 by Christoph Lipka

    Canonicalize file paths in insert menu snippets and sample scenes to
    use forward slashes.

Commit 30dac782 on 2016-12-13 by Christoph Lipka

    Disable Wavefront OBJ import for now, due to the syntax definitely not
    being final.

Commit e51eec77 on 2016-12-13 by Christoph Lipka

    Fix GitHub issue #161 and closely related potential trouble.

Commit 6671b3e1 on 2016-12-13 by Christoph Lipka

    Update change log.

Commit 2e6787a8 on 2016-12-12 by Christoph Lipka

    Address GitHub issue #160 by including round, square and angle brackets
    in the brace nesting limit.

Commit f618086c on 2016-12-12 by Christoph Lipka

    [ci skip] Update source docs to allow the C++11 `decltype()` feature
    in well-defined cases.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8913469
------------------------------------------------------------------------------

Commit 3f1de0d6 on 2016-12-11 by Christoph Lipka

    Fix GitHub issue #114 (FlySpray 298).

Commit 7d9671d9 on 2016-12-11 by Christoph Lipka

    Fix a bug related to colour blend maps in v3.1 (and earlier) legacy
    scenes.

Commit d58bc854 on 2016-12-06 by Christoph Lipka

    Moved and added some bounding-related source files.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8901709
------------------------------------------------------------------------------

Commit 015e45bb on 2016-12-03 by William F. Pokorny (wfpokorny)

    Improving unix console messages with SDL display use. (#109)

    The end render message:  Press a key or click the display to continue...
    for unix versions has long been inaccurate because you cannot click any
    key, but rather only a few specific ones.  Pauses with 'p' also gave no
    clue in the paused message to use 'p' to continue.  Update somewhat
    complicated for being only text message changes due no-display runs or
    compiles without SDL installed - and so no-display - not picking up
    general key press events.

Commit 469a87cb on 2016-12-03 by William F. Pokorny (wfpokorny)

    Cleaning up some recent commits. Jim's fix for #149. (#166)

    Following up on the deletion of comments from cone uv_mapping.
    Picking up missed removal of Old_Image pointer from parser_materials.cpp.
    Picking up Jim's prefix to Prefix var name patch for mesh camaera scenes.

Commit 766e1bdc on 2016-12-03 by Christoph Lipka

    Update boost version to 1.62.

Commit bd73d0e6 on 2016-12-03 by Christoph Lipka

    Miscellaneous refactoring, mostly related to file output.

    Also added support for "Compression=1" to Targa format and "Compression=0"
    to Netpbm PPM/PGM format.

Commit 13aa062b on 2016-12-02 by Christoph Lipka

    Some refactoring and Doxygen documentation work.

Commit c5cade40 on 2016-11-27 by Christoph Lipka

    Miscellaneous refactoring.

Commit 10f089d5 on 2016-11-26 by Christoph Lipka

    Fix some issues discovered by static code analysis.

Commit 446f0668 on 2016-11-26 by Christoph Lipka

    Fix error in previous commit.

Commit 55eec190 on 2016-11-26 by Christoph Lipka

    Pattern-related parser refactoring and fixing of old age-old unreported
    bugs.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8889454
------------------------------------------------------------------------------

Commit 38a45ef2 on 2016-11-25 by Christoph Lipka

    Fix bug in full-colour function-based pigment.

Commit e692c161 on 2016-11-25 by Christoph Lipka

    Merge branch 'feature/specular_knockout'

Commit e205d776 on 2016-11-19 by Christoph Lipka

    Add feature to knock out highlights and reflections depending on pigment
    transparency.

Commit fd19745b on 2016-11-25 by Christoph Lipka

    Merge branch 'feature/dictionary'

Commit e592aaf7 on 2016-11-21 by Christoph Lipka

    Fix bug introduced with previous commit.

Commit 2b12bebc on 2016-11-21 by Christoph Lipka

    Replaced `local()`/`global()` pseudo-functions with `local`/`global`
    pseudo-dictionaries.

Commit 03b96543 on 2016-11-16 by Christoph Lipka

    Update dictionary initializer syntax and fix a memory leak.

Commit d1a61d63 on 2016-11-16 by Christoph Lipka

    Merge branch 'master' into feature/dictionary

Commit 5bc4f0bb on 2016-11-16 by Christoph Lipka

    Add support for mixed-type arrays.

Commit a2bee50a on 2016-10-12 by Christoph Lipka

    Merge branch 'master' into feature/dictionary

Commit 351d888b on 2016-09-26 by Christoph Lipka

    Merge branch 'master' into feature/dictionary

Commit 093def73 on 2016-09-18 by Christoph Lipka

    Implement dynamically-sized arrays.

Commit 0b5ac835 on 2016-09-17 by Christoph Lipka

    Implement array-style dictionary access.

Commit 535bac52 on 2016-09-17 by Christoph Lipka

    Implement dictionary initializers.

Commit 5039065c on 2016-09-17 by Christoph Lipka

    Add support for `dictionary` data container.

Commit 4171d080 on 2016-11-25 by Christoph Lipka

    Add full-colour function-based pigment pattern.

Commit da275691 on 2016-11-25 by Christoph Lipka

    Some pattern-related refactoring.

Commit 4d21059c on 2016-11-24 by Christoph Lipka

    Minor changes to debug sanity checks.

Commit 68fa7496 on 2016-11-24 by Christoph Lipka

    Minor parser code fixes and refactoring.

Commit 02f7e257 on 2016-11-21 by Christoph Lipka

    Update Unix installation instructions.

Commit 2775c4fc on 2016-11-20 by Christoph Lipka

    Fix GitHub issue #153.

Commit fa4a1586 on 2016-11-20 by Ben Small (BentSm)

    Fix promotion bug (#130)

    This fixes the bug reported in
    [newsgroup post <3c4bb31d$1@news.povray.org>].

Commit 79ed3534 on 2016-11-16 by Christoph Lipka

    [ci skip] Update changes.txt.

Commit 4be08d8e on 2016-11-15 by William F. Pokorny (wfpokorny)

    Port of JG diff for github issue #128 and FS331 (#129)

Commit 1319df52 on 2016-11-15 by William F. Pokorny (wfpokorny)

    Flipping uv_mapping of lemon in V to usual orientation. (#133)

    The UV mapping orientation for the originally implemented lemon
    was upside down to the usual mapping.

Commit df90a3ab on 2016-11-15 by William F. Pokorny (wfpokorny)

    Port of JG uv_mapping for cylinder and cone. (#131)

    Note I flipped the UV mapping in V as it looked upside down to the usual
    POV-Ray UV mapping. Related comments in the code.

Commit 2ec18abc on 2016-11-15 by William F. Pokorny (wfpokorny)

    Fix placement of break statement in Solve_Polynomial. (#143)

    See:
    [newsgroup post <web.580874a6f9e539ccf4af9d600@news.povray.org>]

Commit b4580182 on 2016-11-15 by Christoph Lipka

    [ci skip] Trim down Travis CI build matrix.

Commit 220b3a57 on 2016-11-12 by Christoph Lipka

    Fixed ill-formed `#error` preprocessor statements.

    `source/core/support/octree.cpp` had some `#error` statements not fully
    compliant with standard C++ due to the use of single quote characters
    as apostrophes in the message. To fix these messages, they are now
    enclosed in double quotes. For consistency, double quotes have also
    been added to other `#error` statements.

Commit d62de5cb on 2016-11-06 by Christoph Lipka

    Fix FlySpray task 336 (http://bugs.povray.org/task/336).

Commit 8c8a18f7 on 2016-10-19 by Christoph Lipka

    Fix GitHub issue #124.

Commit 3cd6b6ce on 2016-10-13 by Christoph Lipka

    Fix an issue with the previous commit.

Commit bbb46437 on 2016-10-13 by Christoph Lipka

    Fix a couple of issues discovered by static code analysis.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8826150
------------------------------------------------------------------------------

Commit b24c6c78 on 2016-10-12 by Christoph Lipka

    Fix unix build error introduced with previous commit.

Commit 269cc8ec on 2016-10-12 by Christoph Lipka

    Overhauled mechanism for output file gamma default.

    - Eliminated the `DEFAULT_FILE_GAMMA_TYPE` and `DEFAULT_FILE_GAMMA`
      compile-time config settings; instead of having the `File_Gamma` INI
      setting default to a common value, file type specific defaults are now
      allowed to kick in. Previously, file type specific defaults had already
      been implemented but didn't take effect (except for file types that
      entirely ignored `File_Gamma` anyway).
    - The Netpbm (PPM) output file gamma handling now defaults to using the
      ITU-R BT.709 transfer function. Previously, the implemented file type
      specific default would have been to not apply gamma correction at all,
      but in practice this was overridden by the now-eliminated `File_Gamma`
      default.

Commit 6838c286 on 2016-10-11 by Christoph Lipka

    Suppress PNG file oFFs chunk creation if offset is zero.

Commit cc2d946e on 2016-10-09 by Christoph Lipka

    [ci skip] Minor update to build status section in `README.md`.

Commit a1d372e1 on 2016-10-09 by Christoph Lipka

    Add master branch build status to `README.md`.

Commit 29d52514 on 2016-10-09 by Christoph Lipka

    Fix compatibility with libjpeg 8b and earlier.

    Also fixing the format in which we're reporting the libjpeg version
    number to the user.

Commit 8e619b32 on 2016-10-09 by Christoph Lipka

    Eliminate use of `jversion.h`.

    We're now determining the LibJPEG version from the contents of `jpeglib.h`
    rather than `jversion.h`, as the latter does not constitute part of
    the official library interface as distributed in libjpeg-dev. As a side
    effect we can now stop creating a fake `jversion.h` as part of the Unix
    build process.

Commit a70069ed on 2016-10-09 by Christoph Lipka

    Enable automated Mac OS X build testing.

Commit d451fc52 on 2016-10-09 by Christoph Lipka

    Fixed a few coding flaws discovered by clang.

Commit c470daee on 2016-10-09 by Christoph Lipka

    Hopefully fix Unix build error introduced with commit be34de4.

Commit 261f57fd on 2016-10-09 by Christoph Lipka

    Forgot to include some changes in previous commit; fixed.

Commit be34de43 on 2016-10-09 by Christoph Lipka

    Major overhaul of Netpbm (PGM/PPM) input, fixing GitHub issue #111.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8820458
------------------------------------------------------------------------------

Commit 66cef4ed on 2016-10-08 by Christoph Lipka

    Partially fix GitHub issue #110.

    To allow for reading and creating fully standard-compliant PGM/PPM files,
    the ITU-R BT.709 transfer function can now be explicitly chosen as input
    and/or output gamma by specifying `gamma bt709` for input images or the
    `File_Gamma=bt709` INI setting for output images, respectively. (Note
    however that at present PGM/PPM files still default to linear encoding,
    in spite of the standard.) Support for the very similar but slightly
    superior ITU-R BT.2020 transfer function has also been added along the
    way using corresponding syntax. In addition, both `bt709` and `bt2020`
    are now valid parameters for the `assumed_gamma` global setting and the
    `Display_Gamma` INI setting.

Commit 598f29af on 2016-10-06 by William F. Pokorny (wfpokorny)

    Adding parser warning on float promote to full color vector. (#91)

    These promotions create colors with filter and transmit values >0 which
    cause shadow artifacts back to at least version 3.6.1.

Commit 089a77c7 on 2016-10-06 by Ben Small (BentSm)

    Added unix/config/compile to .gitignore and unix/prebuild.sh cleanup,
    (#108)

Commit 7e6a9c71 on 2016-10-02 by William F. Pokorny (wfpokorny)

    Fixing potential pattern threshold keyword use in function. (#94)

    When used in a pattern function, the `potential` pattern erroneously
    failed to support the `threshold` keyword.

Commit 3f489964 on 2016-10-02 by Ben Small (BentSm)

    Replaced broken comparison in hdr.cpp (#106)

    Replaced invalid comparison of IStream to bool.

Commit 606fd2e3 on 2016-10-02 by Ben Small (BentSm)

    Fixed file append bug (#105)

    Fixed silent failure when attempting to append to files.

Commit ffc1b74c on 2016-10-01 by William F. Pokorny (wfpokorny)

    Fixing tiling pattern use in functions. (#96)

Commit 4821b7d8 on 2016-10-01 by William F. Pokorny (wfpokorny)

    Adding shapes.inc include to all HF_ macro templates. (#103)

Commit 6e2d27b4 on 2016-10-01 by Christoph Lipka

    Fixed issues with default Timer class and Delay function.

Commit 308dbdfe on 2016-10-01 by Ben Small (BentSm)

    Fix 4D vector parsing anomaly (#102)

    Parse_Num_Factor would fail to update *Terms to 3 when parsing a 3D vector
    function and expecting more than 3 terms (i.e., *Terms>3 on entry).
    This would result in the parsed result erroneously gaining extra
    (possibly non-zero) terms.  E.g.: julia_fractal{2/9*x} would parse as
    if one had written julia_fractal{<2/9,2/9,2/9,2/9>*<1,0,0,9>}.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8809617
------------------------------------------------------------------------------

Commit d4109092 on 2016-09-30 by Christoph Lipka

    Ditching the idea of having unique version numbers for every commit.

Commit a6d55918 on 2016-09-30 by Christoph Lipka

    Update to Git pre-commit hook. Also fixed Travis CI clang builds.

Commit 6e731179 on 2016-09-30 by William F. Pokorny (wfpokorny)

    Correcting small typo in lemon.cpp comment. (#95)

Commit ceafcc0c on 2016-09-30 by William F. Pokorny (wfpokorny)

    Adding missing close paren in 30_HF_Sphere_macro.txt (#101)

    Reported by omniverse on povray.documentation.inbuilt.

Commit e70a6f01 on 2016-09-30 by William F. Pokorny (wfpokorny)

    Adding switch code to tiling.pov with scaling information. (#100)

Commit a77e8278 on 2016-09-30 by William F. Pokorny (wfpokorny)

    Fixing pavement pattern use in functions. (#99)

Commit 5c706d79 on 2016-09-30 by William F. Pokorny (wfpokorny)

    Adding pavement pattern demo scene file to distribution. (#97)

Commit b4e5a7d0 on 2016-09-26 by Christoph Lipka

    Fix error in previous commit.

Commit a68a23e3 on 2016-09-26 by Christoph Lipka

    Fix GitHub issue #98, plus a similar problem in the new OBJ import.

Commit 2c3b3d62 on 2016-09-22 by Christoph Lipka

    Fix `+A.n` command line option.

Commit 01febac3 on 2016-09-18 by Christoph Lipka

    Fail more gracefully when encountering an empty `normal{}` statement.

Commit ba309803 on 2016-09-17 by Christoph Lipka

    A bit more housekeeping.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8789352
------------------------------------------------------------------------------

Commit 08262ab3 on 2016-09-16 by Christoph Lipka

    Miscellaneous housekeeping.

Commit 23f936a6 on 2016-09-15 by Christoph Lipka

    Implemented `potential` pattern and isosurface `polarity` keyword. (#88)

Commit c52c176d on 2016-09-15 by Christoph Lipka

    Implemented basic Wavefront OBJ import. (#90)

Commit 7d06e7fe on 2016-09-09 by Christoph Lipka

    Fixed some parser flaws related to the re-defining of variables.

Commit f1b394a7 on 2016-09-08 by Christoph Lipka

    Address some issues in base and core modules found by static code
    analysis.

    Should address issues CID 967377, CID 967399-967400, CID 1129016-1129017,
    CID 1372552, CID 1372608, CID 1372626, CID 1372636, CID 1372639,
    CID 1372641-1372644, CID 1372646-1372648, CID 1372650-1372651,
    CID 1372653-1372654, plus various issues related to Coverity not
    understanding some of our `POV_*_ASSERT()` macros.

Commit 01476788 on 2016-09-08 by Christoph Lipka

    Help static code analysis tools better understand our code.

Commit 3220eb61 on 2016-09-08 by Christoph Lipka

    Relaxed our enforcement of an initial `#version` directive.

    Failing to start the scene with a `#version` directive, but demanding
    version 3.7 or higher later in the main scene file, is tolerated again
    if the version demanded is 3.7.0. (It still causes an error if the
    version demanded is 3.7.1 or higher.)

Commit 486a48f5 on 2016-09-08 by Christoph Lipka

    Overhauled list of reserved words.

    Sorted the lists in `reservedwords.h` and `reservedwords.cpp`. Also
    slightly modified the way in which reserved word strings are stored,
    so that `reservedwords.h` no longer needs placeholders for tokens with
    alternative spelling (e.g. `color` and `colour`).

Commit 5988aec3 on 2016-09-08 by Christoph Lipka

    [ci skip] Update to AppVeyor config.

Commit ff0fbcd1 on 2016-09-08 by Christoph Lipka

    [ci skip] Reverted order of automated builds, to build 64-bit version
    first.

Commit f5477210 on 2016-09-08 by Christoph Lipka

    Fixed a few bugs found by static code analysis.

    Addressed Coverity Scan issues CID 1372548, CID 1372555-1372557, CID
    1372562, CID 1372655-1372657.

Commit 84423445 on 2016-09-07 by Christoph Lipka

    Fixed minor flaw in Visual Studio project for the VFE module.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8776412
------------------------------------------------------------------------------

Commit 04fb97ea on 2016-09-07 by Christoph Lipka

    FIx Windows build error.

Commit 6b6b1b32 on 2016-09-07 by Christoph Lipka

    Fix unix build errors introduced with the previous commit.

Commit e50d5b4a on 2016-09-07 by Christoph Lipka

    Removed all remaining dependencies on the `vfe` module from the `backend`,
    `base` and `frontend` modules.

Commit f53e52aa on 2016-09-05 by Christoph Lipka

    [ci skip] Source documentation housekeeping; we're now relying on
    Doxygen 1.8.12.

Commit 86732052 on 2016-09-05 by William F. Pokorny (wfpokorny)

    Porting Jerome Grimbert's lemon object to master. (#84)

Commit a92639e2 on 2016-09-05 by Christoph Lipka

    [ci skip] Some git housekeeping.

Commit 3e59e155 on 2016-09-05 by William F. Pokorny (wfpokorny)

    [ci skip] Adding new platform/Makefile variants to .gitignore (#85)

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8772883
------------------------------------------------------------------------------

Commit e600a5f7 on 2016-09-05 by Christoph Lipka

    Fixed typo in `configure.ac`.

Commit e4ce5741 on 2016-09-05 by Christoph Lipka

    This should fix the Unix build at last.

Commit e921ef4c on 2016-09-04 by Christoph Lipka

    Further work on Unix build, adding makefile for `platform/unix`.

Commit ecd07990 on 2016-09-04 by Christoph Lipka

    Fix a fourth unix build error.

Commit 41ed63c8 on 2016-09-04 by Christoph Lipka

    Fix a third unix build error (hopefully).

Commit 448f5bbf on 2016-09-04 by Christoph Lipka

    Fix another Unix build error.

Commit 08fc1365 on 2016-09-04 by Christoph Lipka

    Fix unix build error.

Commit b404e9f3 on 2016-09-04 by Christoph Lipka

    Changed Angular Map to map type 7 to match MegaPOV.

Commit 09a4582e on 2016-09-04 by Christoph Lipka

    Merge remote-tracking branch 'origin/master'

Commit 46e227f7 on 2016-09-04 by Denis Bodor

    [ci skip] Added support for Angular Map projection for input images. (#41)

    Using `map_type 8` for input images will now select the so-called
    "Angular Map" light probe projection popularized by Paul Devebec
    (corresponding to MegaPOV map type 7).

Commit 619e0f7c on 2016-09-04 by Christoph Lipka

    [ci skip] Giving up on our attempts to set up automated XP-compatible
    builds for now.

Commit bc3ebd2a on 2016-09-02 by Christoph Lipka

    [ci skip] Updates to the source code documentation.

Commit 8ce64574 on 2016-08-31 by Christoph Lipka

    Refactored and overhauled timer handling.

Commit 47d2603f on 2016-08-31 by Christoph Lipka

    Improved separation of modules.

    - Eliminated all remaining references of "backend" and "vm" modules from
      "core" module.
    - Eliminated all remaining references of "povms" module, and some
      references of "backend" module, from "parser" module.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8764097
------------------------------------------------------------------------------

Commit 8afb1435 on 2016-08-30 by Christoph Lipka

    Trying to make automated 64-bit Windows builds compatible with Windows
    XP again. (#83)

Commit 46c9ecb6 on 2016-08-24 by Christoph Lipka

    Clean up error message for pigment/normal/density variant of
    `max_extent()` function.

Commit f162f530 on 2016-08-22 by William F. Pokorny (wfpokorny)

    Adding df3, density_file query range support to max_extent. (#80)

    * Adding df3, density_file query range support to max_extent.

      Enables users to determine the x,y,z ranges, returned as a vector, for
      density_file based pigments matching a similar function for image maps.

    * Adding normal, density support to max_extent range feature.

      Adding normal and density support to the existing pigment support
      for image and density_file range determination with max_extent. Also
      re-worked the conditionals as requested.

Commit 79f6c9bf on 2016-08-18 by Christoph Lipka

    Fixed bug in flat trianges that could cause interior_texture to show
    on the wrong side.

Commit 4d52c264 on 2016-08-12 by Christoph Lipka

    Fixed a bug causing radiosity to ignore refracted `no_image` objects.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8737777
------------------------------------------------------------------------------

Commit 50f20db4 on 2016-08-11 by Christoph Lipka

    Fixed bug in transformed spheres introduced with commit 53f0ebd.

Commit 6418cd0c on 2016-08-10 by Christoph Lipka

    Fix `repeat` in crackle pattern not allowing further object modifiers.

Commit 6997488e on 2016-08-07 by Christoph Lipka

    Fixed memory leak in textured `projected_through` objects.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8730959
------------------------------------------------------------------------------

Commit 53f0ebd6 on 2016-08-07 by Christoph Lipka

    Reduced memory footprint of sphere primitive.

    Until now, spheres subject to transformation (translation, rotation,
    scaling etc.) required an extra data block of 256 bytes. This data
    block has been eliminated, along with a corresponding pointer in the
    sphere's basic data block.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8704732
------------------------------------------------------------------------------

Commit 8e965a93 on 2016-07-20 by Christoph Lipka

    Improved cached macro performance.

Commit fa3a1dc3 on 2016-07-18 by Christoph Lipka

    Fixed a code flaw in macro caching.

Commit 39a6c9f4 on 2016-07-17 by Christoph Lipka

    [ci skip] Minor changes to comments and dev documentation.

Commit edfae26c on 2016-07-15 by Christoph Lipka

    Fixed a bug in cleanup of fog with turbulence.

Commit 3b5b4ebe on 2016-07-15 by gryken2014

    added missing file pavement_s3_t6_p12.txt / issue #37 (#77)

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8697421
------------------------------------------------------------------------------

Commit 051b674d on 2016-07-15 by Christoph Lipka

    Implemented macro caching.

    Macros up to a certain size (currently hard-coded to 65536 characters per
    macro) are now cached in memory, improving parsing speed of invocations,
    especially when the macro in question is defined in a different file.

Commit 2d0a42cf on 2016-07-14 by gryken2014

    fix filenames / issue #36 (#76)

Commit 4e714f1c on 2016-07-14 by Christoph Lipka

    Fix flaws in `randomsequence.cpp` and `randomsequence.h`.

    - Eliminate SIZE_MAX hack.
    - Eliminate obsolete include.

Commit d3c3fd51 on 2016-07-14 by gryken2014

    fix filename / issue #38 (#75)

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8696519
------------------------------------------------------------------------------

Commit 2dc0dadc on 2016-07-14 by Christoph Lipka

    Added support for Diffusion and Floyd-Steinberg dithering in HDR output.

Commit 550e6028 on 2016-07-13 by Christoph Lipka

    Fixed broken error message when expecting opening curly brace.

Commit 6e54a1fe on 2016-07-10 by Christoph Lipka

    All instances of `gray` in keywords or INI file options can now
    alternatively be spelt `grey`.

Commit df5fc7a5 on 2016-07-10 by William F. Pokorny (wfpokorny)

    Adding user_defined camera example scene (#72)

Commit 57077c3d on 2016-07-10 by William F. Pokorny (wfpokorny)

    Fixing a typo in scenes file incdemo.htm (#71)

Commit 08892759 on 2016-06-16 by Christoph Lipka

    Fix isosurface bug introduced with commit a10629b.

Commit 05ca335a on 2016-06-11 by Christoph Lipka

    Minor fixes to the `GenericRGBColour` and `GenericColour` classes.

Commit 1f7fdef1 on 2016-06-03 by Christoph Lipka

    Fixed the designated default implementation for the `POV_TIMER`
    platform-specific millisecond timer.

Commit 65769073 on 2016-06-03 by Christoph Lipka

    Fix an issue in the user-defined function cleanup.

    Due to a missing `#include`, the destructor of `TraceThreadData` was
    unable to call the destructors of the `FPUContext` objects pointed to
    via the `fpuContextPool` member.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8615129
------------------------------------------------------------------------------

Commit 3c076350 on 2016-05-18 by Christoph Lipka

    Fix GitHub issue #63.

Commit 2ec4a4e8 on 2016-05-18 by Christoph Lipka

    Merge pull request #62 from wfpokorny/master

    Lathe parser updates related to github issue #60

Commit 0e72828b on 2016-05-18 by William F Pokorny

    Updated warning control variable to bool per Christoph. Issue #60

Commit b17450c1 on 2016-05-14 by William F Pokorny

    Lathe parser updates related to github issue #60

Commit c51505d9 on 2016-05-12 by William F. Pokorny (wfpokorny)

    Merge pull request #1 from POV-Ray/master

    Attempt pull request from POV-Ray master into my personal fork.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8600570
------------------------------------------------------------------------------

Commit 5c8fb1df on 2016-05-08 by Christoph Lipka

    Fixed memory leak in pattern cleanup.

Commit a666f07a on 2016-05-05 by Christoph Lipka

    [ci skip] Updated `revision.txt` and cleaned up whitespace in
    `changes.txt`.

Commit fad8dda1 on 2016-05-05 by Christoph Lipka

    Forgot to include changes to `reservedwords.cpp` in previous
    commit. Fixed.

Commit 6eb488e6 on 2016-05-05 by Christoph Lipka

    Added `global()` pseudo-function to match the earlier `local()`
    pseudo-function.

Commit de317f1a on 2016-05-05 by Christoph Lipka

    [ci skip] Added sample scene to demonstrate spindle torus options.

Commit c326111f on 2016-04-29 by Christoph Lipka

    [ci skip] Another fix to the AppVeyor config.

Commit 796039be on 2016-04-29 by Christoph Lipka

    [ci skip] Fixed AppVeyor config.

Commit e287133b on 2016-04-29 by Christoph Lipka

    Updated AppVeyor config.

    - Remove the `+avN` postfix from generated release tags.
    - Automatically flag builds as experimental if their version number
    has a prefix beginning with `-x`, e.g. `3.7.1-x.foo.8765432`.

    Also updated the developers' documentation on version numbering.

Commit a04e0ef8 on 2016-04-29 by Christoph Lipka

    Changed INI file parser to no longer issue a warning on trailing
    whitespace.

    Also removed trailing whitespace from the `float1` sample animation's
    INI file.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8586521
------------------------------------------------------------------------------

Commit eeeb039d on 2016-04-28 by Christoph Lipka

    Overhauled frame number handling in animation status messages.

    Animation status messages now consistently display a running frame count
    and the total number of frames actually to be rendered, properly taking
    into account the Frame_Step setting.
    Additionally, the status messages now also show the nominal frame number
    as used in the `frame_number` variable and the output filename.

Commit 87068771 on 2016-04-26 by Christoph Lipka

    [ci skip] Updated `changes.txt` and `revision.txt`, and added a Unix
    shell script to help keep the latter up to date.

Commit be8158ab on 2016-04-25 by Christoph Lipka

    Fixed wrong include for `std::tr1::array` in `parametric.cpp`.

Commit a10629bf on 2016-04-24 by Christoph Lipka

    Internal changes to user-defined function handling.

Commit 8df1db33 on 2016-04-14 by Christoph Lipka

    Added inbuilt support for tau constant (=2*pi).

Commit de214ebb on 2016-04-12 by Christoph Lipka

    Fixed an uninitialized data bug in POVMS that would cause povray to
    crash hard on some platforms.

Commit 2bf2c561 on 2016-04-11 by Christoph Lipka

    [ci skip] Added mention of `prebuild.sh` to unix README and INSTALL
    instructions.

Commit 94eeba73 on 2016-04-08 by Christoph Lipka

    Fixed repeating crackle pattern not working in pattern functions.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8514084
------------------------------------------------------------------------------

Commit 0a062cca on 2016-03-12 by Christoph Lipka

    Merge pull request #56 from wfpokorny/master

    Update vector.h

Commit 06268c38 on 2016-03-11 by William F. Pokorny (wfpokorny)

    Update vector.h

    Use of abs() instead of fabs() in vector functions
    recently created for the new user defined camera caused
    problems for Ubuntu users. Edit changes to fabs(). See:
    [newsgroup post <56e36723$1@news.povray.org>]

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8514084
------------------------------------------------------------------------------

Commit 1eca8d0e on 2016-03-09 by Christoph Lipka

    Added repeating crackle pattern.

    The `crackle` pattern now accepts a `repeat VECTOR` modifier,
    specifying along which axes the pattern is to be repeated, and at which
    intervals. Values of 0 indicate no repetition along that axis. Repetition
    intervals must be positive integers.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8509766
------------------------------------------------------------------------------

Commit c5f8d78e on 2016-03-06 by Christoph Lipka

    Added function-based user-defined camera.

    The syntax is `camera { user_defined location { FUNCTION_TRIPLET }
    direction { FUNCTION_TRIPLET } CAMERA_MODIFIERS }`. Instead of `{
    FUNCTION_TRIPLET }`, a constant vector can be specified, and the usual
    defaults apply. Each `FUNCTION_TRIPLET` is a set of three functions,
    all taking as input parameters the image x and y position ranging from
    -0.5 (left/bottom) to +0.5 (right/top), and acting together to return
    a ray origin and direction for a given pixel. A direction of <0,0,0>
    indicates that the pixel is to be left black.

Commit 9adacd7a on 2016-03-05 by Christoph Lipka

    Fixed bug in bezier primitive caused by uninitialized data.

Commit 0c1607cc on 2016-03-05 by Christoph Lipka

    Fixed another bug in the user-defined function cleanup.

Commit c8911315 on 2016-03-05 by Christoph Lipka

    Fixed two mesh camera bugs and other camera flaws.

    - Fixed FS#254 (mesh_camera type 0 repeats first pixel line).
    - Fixed FS#261 (mesh_camera type 3 output image is offset by 0.5 pixels).
    - Fixed mesh_camera-related flaws in the parser.
    - Fixed a family of bugs that could cause problems when using focal
      blur with some camera types if the camera is very close to the surface
      of a media container.
    - A bit of refactoring (changed `TracePixel::operator()` semantics).

Commit 167ed19d on 2016-03-02 by Christoph Lipka

    [ci skip] Fixed a bug and a flaw in the sample scenes.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8503825
------------------------------------------------------------------------------

Commit 10465bbc on 2016-03-02 by Christoph Lipka

    Fixed build error in previous commit.

Commit 010dba52 on 2016-03-02 by Christoph Lipka

    Fixed some crashes related to mismatched parentheses in conditionals
    or loops.

    Under certain circumstances, a missing closing parenthesis in the
    condition of an `#if`, `#while` or similar statement would lead to a
    crash instead of a parse error.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8499454
------------------------------------------------------------------------------

Commit 5b5e3125 on 2016-02-28 by Christoph Lipka

    Fixed bug in media photons.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8498421
------------------------------------------------------------------------------

Commit 6211eee2 on 2016-02-27 by Christoph Lipka

    Fixed bug in splines even more.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8498353
------------------------------------------------------------------------------

Commit 832d5713 on 2016-02-27 by Christoph Lipka

    Fixed bug in splines.

Commit 147066f7 on 2016-02-27 by Christoph Lipka

    Fixed bug in `animations/reflection` sample scene INI file.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8497793
------------------------------------------------------------------------------

Commit f6888be8 on 2016-02-27 by Christoph Lipka

    Eliminated some inconsistencies in RGBE-format colour handling.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8492620
------------------------------------------------------------------------------

Commit 9762bc5a on 2016-02-23 by Christoph Lipka

    Fixed a bug in the copying of multi-textured blobs.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8463913
------------------------------------------------------------------------------

Commit 0f349a7a on 2016-02-18 by Christoph Lipka

    Fixed a bug in the cleanup of sky_sphere transforms.

    Also cleaned up cleanup (no pun intended) of object transforms along
    the way.

Commit 373f7270 on 2016-02-05 by Christoph Lipka

    [ci skip] Changed GitHub release description in AppVeyor build settings.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8463913
------------------------------------------------------------------------------

Commit 2a06a9d5 on 2016-02-05 by Christoph Lipka

    [ci skip] Changed AppVeyor build settings to produce Windows XP-compatible
    dev builds.

Commit 50c9c67d on 2016-02-03 by Christoph Lipka

    Fixed a bug in the user-defined function cleanup.

Commit 13e48abf on 2016-01-31 by Christoph Lipka

    [ci skip] Updated Travis CI configuration to (hopefully) fix the lack
    of notification emails.

Commit c04d9c42 on 2016-01-31 by Christoph Lipka

    Addressed a potential portability issue related to shared pointers.

    Note: If you are porting POV-Ray to a different platform, make sure your
    `syspovconfig.h` has `using` statements for the TR1 smart pointer stuff
    we're using (currently `shared_ptr`, `weak_ptr`, `dynamic_pointer_cast`,
    `static_pointer_cast` and `const_pointer_cast`) to pull them in from
    `std::tr1` into the default namespace.

Commit 756cba66 on 2016-01-31 by Christoph Lipka

    Added support for increased thread stack sizes when boost 1.50 or later
    is used.

Commit 2ea0b83e on 2016-01-28 by Christoph Lipka

    Fix broken Unix build.

Commit fdcb3676 on 2016-01-28 by Christoph Lipka

    Overhauled POVMS config settings.

    Moved some compile-time config settings from `vfeconf.h` to the POVMS
    config, from the POVMS config to the front-end config, and between the
    POVMS files respectively. Also ditched a few redundant bits of code
    along the way, moved around some documentation stuff, and fixed a few
    coding flaws.

Commit b9d9b250 on 2016-01-27 by Christoph Lipka

    [ci skip] Added Release-SSE2 configuration for the x64 platform to the
    Visual Studio solution.

    As Visual Studio insists on adding the Release-SSE2|x64 combo every
    time we modify the solution, that combo now officially exists at the
    solution level, but is configured to actually build the Release|x64
    combo of the individual projects.

Commit 5eb63e83 on 2016-01-27 by Christoph Lipka

    Fixed build dependencies related to function VM.

Commit 3d04acb1 on 2016-01-27 by Christoph Lipka

    Pulled function VM out of the backend project into its own new project.

Commit 57e91808 on 2016-01-27 by Christoph Lipka

    Trivial update to commit 601786a.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8451792
------------------------------------------------------------------------------

Commit e1cafead on 2016-01-27 by Christoph Lipka

    Add configuration files for automated build testing on Travis CI and
    AppVeyor.

Commit 9a3567b2 on 2016-01-26 by Christoph Lipka

    Ditched the `#version auto` syntax again.

    For compatibility reasons, `#version auto` is no reasonable alternative
    to `#version version`, so it has been removed and the use of `version`
    inside a `#version` statement un-deprecated again.

Commit e1e7b0df on 2016-01-24 by Christoph Lipka

    Fix GitHub issue #53.

      - The `version` pseudo-variable will now evaluate to the effective
        language version at the time the expression is parsed, _except_
        when used in a `#version` directive, in which case the behaviour
        remains unchanged.
      - Using the `version` pseudo-variable in a `#version` directive is now
        deprecated. A new dedicated syntax, `#version auto`, has been added
        to explicitly set the scene language version to whatever version of
        POV-Ray is used to render the scene, making the `#version version`
        idiom obsolete.
      - The requirement to start each scene with a `#version` statement
        is now more strongly enforced for POV-Ray 3.7 scenes, by reporting
        a parse error if the scene file does not begin with a `#version`
        directive but does have a `#version 3.7` (or later) directive anywhere
        in the main scene file.

Commit bb59a4e1 on 2016-01-20 by Christoph Lipka

    Generate a parse warning when `ambient` appears to be misused to model
    glowing materials in a non-legacy scene.

Commit 7d01226b on 2016-01-20 by Christoph Lipka

    Fixed bug that could cause strange parse errors when including a file
    from a macro.

    During a macro call, POV-Ray searches for the macro's `#end` by scanning
    for any `#` at the expected position. POV-Ray would continue to do this
    even while parsing a file included from the macro, potentially leading
    to directives in the included file being erroneously misidentified
    as the macro's proper `#end`, leading to failure to properly "step
    out of" of the included file, causing the parser to exhibit erratic
    behaviour. While this would ideally call for a more systematic solution
    to unify the mechanisms for tracking macro calls and includes, for
    now this has been fixed by adding a simple filename check, in order to
    minimize changes to the parser.

Commit 965908db on 2016-01-12 by Christoph Lipka

    Visual Studio projects housekeeping.

    - Renamed the OpenEXR project titles for clarity.
    - Added more project dependencies.
    - Removed unused "Backend Headers/Texture" filter from povbackend project.

Commit 7889428b on 2016-01-11 by Christoph Lipka

    Changed input image alpha handling:

    - Implemented auto-detection of alpha mode for TIFF files.
    - `transmit all` and `filter all` now interact nicely with image alpha. To
      be sure we're not breaking existing scenes, this requires the use of
      `#version 3.71`.
    - Minor code refactoring for more clarity.

Commit 601786a0 on 2016-01-09 by Christoph Lipka

    Eliminated the need for global thread-local storage.

Commit 3c719d20 on 2016-01-03 by Christoph Lipka

    Trimmed down the memory footprint of all objects (except spheres).

    Moved a data field only used for spheres from `ObjectBase` to the
    `Sphere` class.
    Also did a bit of code cleanup in `trace.cpp` along the way.

Commit eaeb2bf7 on 2016-01-03 by Christoph Lipka

    Minor updates to reflect the fact that the IFF image file format
    supported by POV-Ray is more precisely the IFF-based ILBM format.

Commit eeeb2c53 on 2016-01-03 by Christoph Lipka

    Some cleanup of `unix/prebuild.sh` script.

Commit efb3db7e on 2016-01-03 by Christoph Lipka

    Partial overhaul of `.gitignore`.

Commit a4c66a28 on 2016-01-02 by Christoph Lipka

    Some housekeeping in base and core.

    Standardized include file hierarchy and include guards, updated file-level
    comments, and moved Metadata implementation out of the header file.

Commit 1adf9788 on 2016-01-01 by Christoph Lipka

    Added some run-time sanity checks (active in debug builds only) as well
    as a parser sanity-check for fractal pattern maximum iterations.

Commit 87de0945 on 2016-01-01 by Christoph Lipka

    Removed some unnecessary and misleading junk from dispersion handling.

Commit 6d20f859 on 2016-01-01 by Christoph Lipka

    Weeded out a few bits of unused code.

Commit 4c01e859 on 2015-12-31 by Christoph Lipka

    Minor performance improvements in bounding mechanism.

Commit 2de65994 on 2015-12-30 by Christoph Lipka

    Fixed a hard crash when sum() was called with only three parameters.

Commit 7abff382 on 2015-12-24 by Christoph Lipka

    Fixed a bug in bounding boxes code.

Commit 1f745200 on 2015-12-23 by Christoph Lipka

    Consolidation of matrix transformation code.

Commit 797bf5ee on 2015-11-30 by Christoph Lipka

    Fix `.gitattributes` file.

Commit 711444cb on 2015-11-29 by Christoph Lipka

    Minor preparations for automated builds.

    - Added mechanism to inject additional code into `base/build.h` in
      automated builds.
    - Automated builds will output a distinct distribution message and
      version string.
    - Special features unavailable in non-official Windows builds (submitting
      crash dumps to the dev team, checking for availability of updates)
      will also be unavailable in official automated builds for now.

Commit 28f5dfe6 on 2015-11-28 by Christoph Lipka

    Update git pre-commit hook to work more nicely on Windows systems.

    Note: To make use of the modified hook, you need to copy
    `tools/git/hooks/pre-commit` to `.git/hooks/pre-commit`.

Commit b11eb9ef on 2015-11-27 by Christoph Lipka

    Improve programming language identification on GitHub.

    Added `.gitattributes` file to assist GitHub in determining more
    accurately the programming languages used in our project.

Commit 0656ae9a on 2015-11-22 by Christoph Lipka

    Fix a VS2015 compatibility issue.

    Due to a quirk in the VS2010 project setup, auto-converting to VS2015
    using `devenv povray.sln /upgrade` (as opposed to interactively converting
    from the IDE) would erroneously inject a reference to `cmedit*.lib`
    into `povray.vcxproj` (aka "GUI" project). The VS2010 project setup
    has been cleaned up to prevent this issue.

Commit 3aa46558 on 2015-11-20 by Christoph Lipka

    Fix package dependency list in Unix build instructions.

Commit 77d44931 on 2015-11-20 by Christoph Lipka

    Merge remote-tracking branch 'origin/3.7-stable'

Commit 942ca940 on 2015-11-20 by Christoph Lipka (c-lipka)

    Merge pull request #45 from selvik/patch-1

    Trivial update to README.md

Commit af8fcee2 on 2015-10-12 by Selvi K

    Minor update to README.md

    It helps having the dependencies listed before the actual install
    instructions, so that one doesn't have to have the configure step fail
    multiple times before hitting each dependency.

Commit 39ce8a24 on 2013-11-16 by Chris Cason (chris20)

    Merge pull request #3 from POV-Ray/master

    Merge documentation into stable branch

Commit e14be1ce on 2015-11-18 by Christoph Lipka

    Fixed a missing dependency in the Visual Studio projects.

Commit 509c930e on 2015-11-18 by Christoph Lipka

    Fix GitHub issue #50.

Commit 277acbe9 on 2015-11-15 by Christoph Lipka

    Fix GitHub issue #49.

Commit 49835074 on 2015-11-15 by Christoph Lipka

    Added mechanism to selectively enable or disable various run-time
    sanity checks.

Commit ed4afecb on 2015-11-15 by Christoph Lipka

    Moved various code snippets from `base/types.h` to `base/mathutil.h`.

Commit 2901ef9b on 2015-11-15 by Christoph Lipka

    Moved `mathutil.*` from `core/math` to `base`, in preparation to move
    various code snippets from `base/types.h` to `mathutil.h`.

Commit 3c0cc671 on 2015-11-13 by Christoph Lipka

    Updated console project to build again.

Commit a371c269 on 2015-11-12 by Christoph Lipka

    Updated the Windows build instructions to mention Visual Studio 2015.

Commit 87e624f9 on 2015-11-12 by Christoph Lipka

    Boost-related and miscellaneous changes to improve compatibility with
    Visual Studio 2015.

    - Upgraded the pre-packaged boost library to version 1.59.0, as the
      previously used version did not provide configuration settings for
      VS 2015.
    - Added dedicated versions of `precomp.h` and `precomp.cpp` to each
      project, to work around a VS 2015 issue relating to anonymous namespaces
      (see https://connect.microsoft.com/VisualStudio/feedback/details/1260338).
    - Added compiler-specific compile-time configuration for VS 2015
      (aka msvc14).

Commit 70f2184a on 2015-11-12 by Christoph Lipka

    OpenEXR-related changes to improve compatibility with Visual Studio 2015.

    - Upgraded the pre-packaged OpenEXR library to version 2.2.0, as the
      previously used version turned out to be using `std::min` and `std::max`
      in a nonstandard way that is incompatible with VS 2015.
    - Changed the custom build steps in our OpenEXR eLut and toFloat projects
      to run after the Link step, as the previous choice of running them
      after the Manifest step does not seem to work as expected in VS 2015
      for unknown reasons. Also dropped our OpenEXR b44ExpLogTable project
      entirely, which suffered from the same issue but upon closer inspection
      turned out to not be required anyway.

Commit d1d01eb1 on 2015-09-18 by Christoph Lipka

    Fix GitHub issue #44.

Commit 93b9ae98 on 2015-09-12 by Christoph Lipka

    Modified base, core and parser modules to (again) support runtime
    environments that don't provide multithreading.

Commit 93645688 on 2015-09-11 by Christoph Lipka

    Decoupled the isosurface post-render message dispatch mechanism from
    the back-end code.

    Isosurface post-render messages are no longer officially dispatched to an
    instance of the back-end `MessageFactory` type, but rather to an abstract
    core type `CoreMessenger` which is in turn subclassed by `MessageFactory`.

Commit 3e93e2e2 on 2015-09-11 by Christoph Lipka

    Miscellaneous changes:

    - Removed some unnecessary includes.
    - Disabled some precautionary tests in `safemath.h` in release builds.
    - Fixed some issues with commit ac1170d.
    - Eliminated some integer type potential portability issues in TrueType
      processing and a few other places.

Commit f74039e2 on 2015-09-07 by Christoph Lipka

    Added Release configurations to VS10 unit test project (tests.vcxproj)

Commit dd1874db on 2015-09-05 by Christoph Lipka

    Fix various Unix build errors introduced with recent commits, including
    GitHub issue #43.

Commit ac1170d6 on 2015-08-21 by Christoph Lipka

    Eliminated some cases of improper use of `UINT_MAX` and its siblings
    (as defined in `<climits>`).

    In some cases those constants were misused as the maximum value
    representable by an integer of a particular width, such as the use
    of `UINT_MAX` as the maximum value of a 32-bit unsigned integer;
    obviously such code would break on any system where the standard int
    type does not happen to be 32 bits wide (such as platforms with ILP64
    type system). Introduced a set of new constants, `UNSIGNEDn_MAX`,
    `SIGNEDn_MIN` and `SIGNEDn_MAX`, to be used for such cases instead.

    Also eliminated a few more uses of `UINT_MAX` and siblings in favour
    of `std::numeric_limits` invocations, defined a few more fixed-width
    data types for general use, and added type sanity checks to the unit
    test suite.
    Also overhauled other unrelated test cases.

Commit 6d3f8a9e on 2015-08-21 by Christoph Lipka

    Some reorganization of the unit test suite.

Commit 62314823 on 2015-08-21 by Christoph Lipka

    Update to the Git pre-commit hook.

Commit 11b672cf on 2015-08-21 by Christoph Lipka

    Minor cosmetic fix for Doxygen output.

Commit 7eabf090 on 2015-08-20 by Christoph Lipka

    Workaround for Doxygen failing to invoke PlantUML.

Commit 150f461c on 2015-08-17 by Christoph Lipka

    Moved some more source files from the back-end subdirectory to its new
    dedicated place in the core subdirectory. Renamed some of the files
    along the way.

    Also eliminated obsolete custom memory allocators (`FileAllocator` and
    `MallocAllocator`) and the file they resided in (`fixedallocator.h`)

Commit 04ed7026 on 2015-08-05 by Christoph Lipka

    More disentangling of the "core" code from the "backend" code.

    Also includes a change in how the code is configured wit respect to
    system-specific line endings, discarding the limited TEXTSTREAM_CRLF
    mechanism in favour of the previously dormant NEW_LINE_STRING mechanism.

Commit 117f215c on 2015-08-05 by Christoph Lipka

    Moved around some more files in the source tree to prepare for more
    disentangling of the core code.
    NOTE: This commit will NOT compile.

Commit 9bacee3f on 2015-08-02 by Christoph Lipka

    Eliminated POV_CALLOC and POVMS_Sys_Calloc, as well as direct calls to
    calloc() outside the Windows-specific portion of the code.

Commit b00144fa on 2015-08-01 by Christoph Lipka

    Fixed bug in meshmaker.inc that would scramble the SDL language version
    to use for a scene.

Commit d1bb6145 on 2015-06-30 by Christoph Lipka

    Fixed bug introduced with commit 35a20c2, causing the wrong default
    noise generator to be active during parsing.

Commit cbe3c653 on 2015-06-27 by Christoph Lipka

    Extended torus syntax to give more control over the spindle in a
    self-intersecting torus:

        `torus {` FLOAT `,` FLOAT [ `union` | `merge` | `difference` |
        `intersection` ] ... `}`

    By default, or if the `union` keyword is specified, the spindle surface
    will be visible inside the torus, and its volume considered part of
    the object.
    If the `merge` keyword is specified, the spindle surface will be
    invisible.
    If the `difference` keyword is specified, the spindle volume will be
    considered outside the object.
    If the `intersection` keyword is specified, _only_ the spindle will be
    visible and considered inside.

    Node that with respect to the `interior_texture` mechanism, the spindle
    surface is always textured as if the spindle volume was inside and the
    bulk of the torus was outside, making it consistent with the texturing
    of the torus proper.

Commit 1b5aab60 on 2015-06-27 by Christoph Lipka

    More refactoring and moving around of code, primarily to further
    disentangle the different components of POV-Ray:

    - Added a new layer of abstraction to user-defined render-time functions
      to allow for future replacement of the aged VM; also, moved the function
      compiler to the parser component.
    - Modified the way the AVM/FMA4 optimized noise functions are
      integrated, to make the mechanism less platform-specific; also, moved
      the AVM/FMA4-specific code outside the regular source tree, into the
      newly introduced "platform" source tree intended for OS and hardware
      platform specific code.
    - Moved around some code to improve the separation between the components.
    - Improved consistency in the use of directory names in include
      statements, eliminating the need to add any sub-directory of the "source"
      directory tree to the compiler's list of include directories.
    - Some other minor improvements to the code.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8141620
------------------------------------------------------------------------------

Commit aaff0bba on 2015-06-25 by Christoph Lipka

    Updated `ior.inc` default include file, showcasing some of the recent
    syntax extensions.

Commit 3870e217 on 2015-06-24 by Christoph Lipka

    Extended tuple assignment syntax to allow for omission of right-hand
    side elements; extend array initializer syntax to allow for omission
    of elements.

    Left-hand side elements in tuple assignments can now be prepended with the
    "optional" keyword. If an element is flagged this way, or left empty,
    the corresponding right-hand side element may be an uninitialized
    identifier or left empty. In this case, the respective left-hand side
    element remains unchanged (it is NOT undefined).
    An array initializer may now be prepended with the "optional" keyword
    (e.g. "#declare A = array[10] optional { ... }"). In this case, each
    individual element of the initializer may be an uninitialized identifier
    or left empty.

    Note: Due to the internal twists of the parser, "uninitialized identifier"
    does _not_ encompass uninitialized array elements. This limitation also
    applies to optional macro parameters.

Commit 92792481 on 2015-06-24 by Christoph Lipka

    Fixed a bug pertaining to the use of the "deprecated" keyword in tuple
    #declare statements

Commit a5727308 on 2015-06-24 by Christoph Lipka

    Implement mechanisms to allow omission of macro parameters.

    When declaring a macro, the new keyword "optional" can now be placed
    in front of any identifier in the parameter list. When calling the
    macro, parameters flagged this way can be left empty, or undeclared
    identifiers passed to them. In both cases the corresponding parameter
    will be undeclared in the macro.
    The new syntax "local(IDENTIFIER)" can be used to specifically access
    an identifier at the most local scope (i.e. the current macro, or the
    current file if used outside of a macro), ignoring any less local
    definitions; this can be used to reliably test for the presence of
    optional parameters using '#ifdef(local(IDENTIFIER))' or pass optional
    parameters on to other macros, without potential interference from
    global variables of the same name.

Commit 9c1352f9 on 2015-06-24 by Christoph Lipka

    Extended #declare and #local tuple syntax to also support assignment from
    arrays, and to support assignment to mismatching number of identifiers.

    Using "#declare { IDENTIFYER_LIST } = ARRAY_EXPRESSION" will assign the
    first elements of the array expression (either an array identifier or
    an array declaration with initializer) to the given identifiers.
    The IDENTIFYER_LIST may now contain empty elements, in which case
    the corresponding element from the right-hand side will be skipped
    accordingly.

    Also fixed the error message reported when an array initializer does
    not have enough elements, and did some minor code cleanup along the way.

Commit c3551f24 on 2015-04-09 by Christoph Lipka

    Fixed spindle torus shading issues resulting from bogus surface normal
    computations for points on the spindle.

Commit dc0fc6d1 on 2015-03-30 by Christoph Lipka

    Fixed Unix build error introduced with commit 29f573e.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.8004333
------------------------------------------------------------------------------

Commit 25af702e on 2015-03-21 by Christoph Lipka

    Updated Unix build instructions with known compatibility issues.

Commit 29f573ea on 2015-03-21 by Christoph Lipka

    Fixed bug in tuple extensions to #declare and #local causing hard crashes.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.7981337
------------------------------------------------------------------------------

Commit 6ed60ade on 2015-03-05 by Christoph Lipka

    Moved a batch of render engine core source code to its new dedicated
    place. Renamed some of the files along the way.

Commit 8930c3d0 on 2015-03-05 by Christoph Lipka

    Moved most parser-specific source code to its new dedicated place. Renamed
    the files along the way.

Commit d38cfa76 on 2015-03-05 by Christoph Lipka

    Eliminated homebrew smart pointer type `Pointer<>`.

Commit d3deba99 on 2015-03-05 by Christoph Lipka

    Eliminated Visual Studio 2010 warning about exception handling in
    `png.cpp` and `jpeg.cpp` vs. precompiled header.

Commit c9316b7f on 2015-03-04 by Christoph Lipka

    Moved platform-specific compile-time configuration headers out of the
    `vfe` directory sub-tree.

Commit 0c7f9773 on 2015-03-03 by Christoph Lipka

    Fixed Unix build errors.

Commit 3d45f89c on 2015-03-03 by Christoph Lipka

    Introduced new future locations for the source code of the render engine
    core and parser, respectively, along with dedicated header files to
    place corresponding compile-time configuration settings.

Commit 1f7a4fa4 on 2015-03-03 by Christoph Lipka

    Fixed a compile error in `vfe/win/vfeplatform.h` introduced recently.

Commit fd19354c on 2015-03-03 by Christoph Lipka

    Moved unit test source code out of the main source code tree.

Commit 371dca2c on 2015-03-03 by Christoph Lipka

    Moved source code related to the POVMS message-passing layer into a
    separate directory.

    Also created a separate Visual Studio 2010 project for it.
    Renamed a few files along the way.

Commit 514e339c on 2015-03-01 by Christoph Lipka

    Split up a few files in preparation for future source code tree
    reorganization.
    Also removed a few obsolete files.

Commit df32f3a7 on 2015-03-01 by Christoph Lipka

    Fix typo bug in `frontend/simplefrontend.h`

Commit 24aaeb1d on 2015-03-01 by Christoph Lipka

    Minor source code documentation fix.

Commit f5e5ba6e on 2015-03-01 by Christoph Lipka

    Moved version information from its legacy location in `backend/povray.h`
    to new dedicated files `base/build.h` and `base/versoion.h`.

Commit 58d51f49 on 2015-03-01 by Christoph Lipka

    Fixed scrambled warning messages.

Commit a94c1ab6 on 2015-03-01 by Christoph Lipka

    Implemented tuple extensions to #declare and #local.

    A new tuple-style syntax extensions has been added to #declare and
    #local, in order to simplify passing multiple values out of a macro:
        #declare ( ID1, ID2, ...) = ( EXPR1, EXPR2, ... );
    This statement is fully equivalent to:
        #declare ID1 = EXPR1;
        #declare ID1 = EXPR2;
       ...
    (Note that this equivalence holds true even for constructs like `#declare
    (A,B) = (B,A)`, which does _not_ swap the contents of A and B as you
    might expect.)
    The terminating semicolon is optional.

    In addition, a similar syntax extension has been added for easier
    assignment of vector components to individual variables:
        #declare < ID1, ID2, ... > = VECTOR_EXPR;
    This statement is fully equivalent to:
        #local TEMP = VECTOR_EXPR;
        #declare ID1 = TEMP.x;
        #declare IDY = TEMP.y;
       ...
    except that the new syntax does not actually define a local variable
    named TEMP.
    The terminating semicolon is mandatory.

    The #local statement syntax has been extended accordingly.

    The `deprecated` keyword can be used with these new syntax variants by
    placing it right before the respective identifier, e.g.:
        #declare (A, deprecated B) = (47, 11);

Commit dad781b1 on 2015-02-22 by Christoph Lipka

    Hotfix for previous commit (forgot to submit changes to `bezier.h`).

Commit 6e20d0b7 on 2015-02-13 by Christoph Lipka

    Fixed bezier patch not honouring clipped_by statement.

Commit 14a8aa1d on 2015-02-10 by Christoph Lipka

    Fixed crash when using turbulence parameters (lambda, omega etc.) without
    specifying a pattern type.

Commit baa95d20 on 2015-02-03 by Christoph Lipka

    Added missing file from the boost/test library.

Commit 3f56c5fb on 2015-02-03 by Christoph Lipka

    Fixed Unix build errors.

Commit 725efe1f on 2015-02-03 by Christoph Lipka

    Merge branch 'refactor'

Commit 44e5f50d on 2015-01-31 by Christoph Lipka

    Eliminated more "C-isms" in favour of C++-style code.

    Replaced various `POV_MALLOC` / `POV_FREE` calls with `new` and `delete`
    invocations.
    Avoided some `POV_REALLOC` calls by using vectors instead of dynamic
    C arrays.
    Changed `Interior` reference counting to use `shared_ptr` instead.
    Added constructors and destructors to various structs.
    Encapsulated BBoxPriorityQueue and associated basic functionality into
    a class.
    Refactored `Spline_Struct` into polymorphic family of classes
    (`GenericSpline` and derived classes).
    Refactored warps into polymorphic family of classes (`GenericWarp`
    and derived classes)
    Renamed `POV_MACRO` type to `Macro`.

Commit 1fac52a9 on 2015-02-03 by Christoph Lipka

    Merge branch 'feature/unit_tests'

Commit 4d42e38c on 2015-01-19 by Christoph Lipka

    Add skeleton for unit tests, based on the boost test library.

Commit 845851e7 on 2015-02-03 by Christoph Lipka

    Source code documentation pertaining to entities spanning more than
    one file (namespaces, directories) now resides in `source-doc/*.dox`.

Commit e16458c3 on 2015-02-03 by Christoph Lipka

    Fixed Unix build errors

Commit 4291131c on 2015-02-03 by Christoph Lipka

    Fixed bug in parser causing an error when no file type is specified
    and the file name is specified using a variable.

    Also renamed some macros in the parser for clarity.

Commit f775c54f on 2015-02-03 by Christoph Lipka

    updated Git pre-commit hook; now automatically cleans up leading tabs
    and trailing blanks in updated C/C++ files.

Commit 54c2f4e7 on 2015-02-02 by Christoph Lipka

    Header Overhaul.

    Changed include file hierarchy; moved some code (most notably blend
    map specializations) to other files.
    Also updated file comments to new format, and cleaned up whitespace.

Commit b1593797 on 2015-02-01 by Christoph Lipka

    Merge branch 'hotfix/OTOc_issue'

Commit 3ca74763 on 2015-01-06 by Christoph Lipka

    hopefully fixes issue with OTOc.inc ("Odd Tiles Object") reported in
    povray.binaries.images.

Commit a5870150 on 2015-02-01 by Christoph Lipka

    Under-the-hood changes related to scene language version and warnings.

Commit fd2e0dd1 on 2015-01-30 by Christoph Lipka

    More work on Developer's Manual.

    - Added Doxygen configuration.
    - Minor changes to stand-alone source documentation pages.
    - Styleguide change: `@startuml` tag format is now to be used for
    sequence charts instead of `@msc` tag format.
    - Added page on compiler requirements.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.7930357
------------------------------------------------------------------------------

Commit e24c93ee on 2015-01-29 by Christoph Lipka

    Fixed unwarranted "Rainbow's up and direction vector are co-linear"
    error message.

Commit 44d47df6 on 2015-01-27 by Christoph Lipka

    Fixed `colour_map` not accepting `blend_mode` and `blend_gamma`.

Commit c4deb40f on 2015-01-24 by Christoph Lipka

    POV-Ray for Windows now displays file names and line numbers of warnings
    in message pane.

------------------------------------------------------------------------------
POV-Ray v3.7.1-alpha.7918791
------------------------------------------------------------------------------

Commit 4f3a8bec on 2015-01-21 by Christoph Lipka (c-lipka)

    [accidental empty merge]

Commit c48e776c on 2015-01-21 by Christoph Lipka

    Fixed newest Git pre-commit hook to automatically stage any changes it
    makes to files.

Commit 93c7ed86 on 2015-01-21 by Christoph Lipka

    Cleanup of previously undocumented backslash handling in string literals
    when parsing for a filename.

Commit ec597b99 on 2015-01-14 by Christoph Lipka

    updated Git pre-commit hook; now also performs some sanity-checking of
    updated C/C++ files.

Commit 2d82f74d on 2015-01-13 by Christoph Lipka

    Trivial to minor code cleanup; some format cleanup in separate source
    doc files.

Commit 036fe3da on 2015-01-13 by Christoph Lipka

    Add some small dev utilities for VS 2010

Commit 7086fa93 on 2014-09-04 by Chris Cason

    Merge pull request #34 from POV-Ray/revert-33-develop

    Revert "Develop" (meant to merge into a test branch.)

Commit d23ff77b on 2014-09-04 by Chris Cason

    Revert "Develop"

Commit bd4b762f on 2014-09-04 by Chris Cason

    [accidental merge, reverted by Commit d23ff77]

Commit b15d86b1 on 2014-08-18 by Christoph Lipka

    Merge branch 'hotfix/mesh_camera'

Commit 4bc20862 on 2014-08-18 by Christoph Lipka

    Fixed bug in mesh_camera with distribution 3

Commit 11ff2144 on 2014-08-18 by Christoph Lipka

    Silence g++ compiler warning about non-template friend function in
    base/colour.h

Commit ad6d5457 on 2014-08-09 by Christoph Lipka

    Merge branch 'hotfix/average_texture'

Commit 0dcda867 on 2014-08-09 by Christoph Lipka

    Fixed a bug in average textures introduced during colour refactoring.

Commit ca0d798a on 2014-08-07 by Christoph Lipka

    Light sources' distance-based fading can now be set to obey an
    inverse-power law at all distances.

    Setting a light source to have non-zero `fade_power` but zero
    `fade_distance` (or not specifying `fade_distance` at all) will now
    cause the distance-based light attenuation to follow the simple formula
    "attenuation = 1/(d^fade_power)", yielding the light's nominal power at a
    distance of 1.0 units. (At large distances this has a similar effect as
    setting `fade_distance 1/pow(2,fade_power)`, or setting `fade_distance 1`
    while reducing the light's nominal brightness by 50%.)

    When `#version 3.70` or lower is set, a non-zero `fade_power` setting
    will be ignored if `fade_distance` is set to zero or left unset,
    mimicking the behaviour of previous versions, except that now a parse
    warning will be generated.

Commit c9fb89c6 on 2014-08-07 by Christoph Lipka

    Merge branch 'feature/auto-revision-number' and update version number
    to 3.7.1 (alpha)

Commit 1c7f1987 on 2014-08-07 by Christoph Lipka

    Added some basic documentation on version numbering in
    `source-doc/versioning.md`

Commit 6166f5a2 on 2014-08-07 by Christoph Lipka

    Modified povray.h and pre-commit hook for new version numbering scheme.

    For official proper releases, POV_RAY_PRERELEASE in povray.h should be
    undefined, resulting in the version number "X.Y.Z"; unix/VERSION should
    contain that same string.

    For development versions, POV_RAY_PRERELEASE in povray.h
    should be set to "alpha.NUMBER", which the pre-commit hook will
    update to "alpha.TIMESTAMP", resulting in the version number
    "X.Y.Z-alpha.TIMESTAMP";
    unix/VERSION should contain the string "X.Y.Z-alpha.NUMBER", which the
    pre-commit hook will also update to "X.Y.Z-alpha.TIMESTAMP";
    if desired, "alpha." might be replaced with any other string;
    e.g. "beta.NUMBER" would result in the version number
    "X.Y.Z-beta.TIMESTAMP".

    Note that the pre-commit hook script in .git/hooks in your local workspace
    needs to be replaced with the new version provided in "tools/git/hooks".

Commit b2f7144e on 2014-07-26 by Christoph Lipka

    Updated comments in povray.h

Commit 17366352 on 2014-07-26 by Christoph Lipka

    Implemented a mechanism for automatic version numbering,

Commit 4881e0f9 on 2014-08-05 by Christoph Lipka

    Implemented non-linear colour and pigment map interpolation.

    The syntax is changed as follows:

        COLOR_MAP:
          color_map { COLOR_MAP_BODY } | colour_map { COLOR_MAP_BODY }
        COLOR_MAP_BODY:
          COLOR_MAP_IDENTIFIER | [blend_mode INT] [blend_gamma FLOAT] COLOR_MAP_ENTRY...

        PIGMENT_MAP:
          pigment_map { PIGMENT_MAP_BODY }
        PIGMENT_MAP_BODY:
          PIGMENT_MAP_IDENTIFIER | [blend_mode INT] [blend_gamma FLOAT] PIGMENT_MAP_ENTRY...

    The possible values for blend_mode are as follows:

        0 (default): Colour interpolation is performed working gamma space
           as defined by assumed_gamma.
        1: Colour interpolation is performed in linear colour space.
        2: Colour interpolation is performed in the gamma space defined by
           blend_gamma (defaulting to 2.5).
        3: Chromaticity interpolation is performed in linear space, while
           brightness interpolation is performed in the gamma space defined
           by blend_gamma.

Commit 43959828 on 2014-08-05 by Christoph Lipka

    Update for `colors_ral.inc`.

    Added previously undefined RAL_8000 colour.

Commit 5f4474c9 on 2014-08-05 by Christoph Lipka

    Added CIE L*a*b* conversion macros to `colors.inc`, and added
    `colors_ral.inc` containing RAL Classic colours.

Commit a3fe7214 on 2014-07-28 by Christoph Lipka

    Corrected wrong rotation in `Round_Pyramid_N_in` in shapes3.inc.

    Submitted on behalf of Friedrich Lohmueller.

Commit 54b283a0 on 2014-07-23 by Christoph Lipka

    Improved finish features for more realism:

      - Radiosity support for brilliance is now available; to activate it,
        specify `brilliance on` in the global radiosity settings.
      - The brilliance effect can now be applied not only to incoming
        light, but also to outgoing light; to activate this, specify a second
        FLOAT value
        after the `brilliance` keyword. For maximum realism, both parameters
        should be set to the same value.
      - Fresnel angle-dependent attenuation can now also be enabled for
        highlights and the diffuse component, by specifying `fresnel on`
        directly in the finish block.
        (Note that you will still need to enable fresnel attenuation
        for reflections separately; also note that where reflection and
        highlights increase at shallow angles,
        the diffuse component decreases accordingly.) For a perfect match
        between reflection and highlights use the `albedo` keyword for the
        highlight with the same
        value as the reflection maximum; the reflection minimum should be
        set to zero.

Commit 9b10411d on 2014-07-21 by Christoph Lipka

    fix for GitHub issue #32

Commit 08c53d8e on 2014-07-21 by Christoph Lipka

    more fix for GitHub issue #31

Commit 159e23b6 on 2014-07-21 by Christoph Lipka

    fix for GitHub issue #31

Commit f1699ead on 2014-07-07 by Christoph Lipka

    fix for GitHub issue #30

Commit af80da48 on 2014-07-02 by Christoph Lipka

    This should wrap it up for GitHub issue #29.

Commit ca65fc52 on 2014-07-01 by Christoph Lipka

    Hopefully the final fixes for GitHub issue #29.

Commit 38a31fba on 2014-07-01 by Christoph Lipka

    Even more fixes for GitHub issue #29.

Commit 583d4c85 on 2014-06-30 by Christoph Lipka

    Yet more fixes for GitHub issue #29.

Commit f42a95b6 on 2014-06-30 by Christoph Lipka

    More fixes for GitHub issue #29.

    As the inclusion of <math.h> instead of <cmath> appears to be the source
    of one of the compile errors, I've also replaced other C standard
    header file includes with the respective C++ counterparts along the
    way throughout the project (except the Windows specific code for now).

Commit f68065bb on 2014-06-29 by Christoph Lipka

    Fixes for GitHub issue #29

Commit bdd7cccf on 2014-06-27 by Christoph Lipka

    Merge branch 'styleguide'

Commit 365fc8fd on 2014-06-27 by Christoph Lipka

    5th iteration of the styleguide draft; Minor changes:

      - Source comments can now use the "Dot" tool.
      - Certain method names can now use `camelCase`.

Commit a190a10c on 2014-06-12 by Christoph Lipka

    4th iteration of the styleguide draft.
    Most notable changes: Most of the "Miscellaneous Coding Rules" now
    reside on a separate page. Naming conventions have been established.

Commit d9b5eb01 on 2014-06-11 by Christoph Lipka

    Third iteration of the styleguide draft: Fleshed out a few more rules;
    changed file encoding rules to permit plain-ASCII only; minor other
    changes.

Commit 30aaf025 on 2014-06-08 by Christoph Lipka

    Second iteration of the styleguide draft.

Commit 910610f7 on 2014-06-08 by Christoph Lipka

    First draft for a coding styleguide, up for discussion among the dev team.

Commit 652bf210 on 2014-06-27 by Christoph Lipka

    Merge branch 'refactor'

Commit 92899dfb on 2014-06-25 by Christoph Lipka

    Merge branch 'hotfix/photons_eca922a2' into refactor

Commit 9fafc3c5 on 2014-06-25 by Christoph Lipka

    fix photons bug introduced with commit
    'eca922a2819fabbadd82c31e4bfadaa0c425b5b5'

Commit eee8ecee on 2014-06-25 by Christoph Lipka

    More colour related refactoring.

    Render engine is now almost entirely unaware of the colour model used
    (currently still RGB, but a spectral model might be a future option).
    Also "unbundled" colour and filter/transmit information in many places,
    in preparation for full-colour transparency computations.

Commit 58e27fe4 on 2014-06-23 by Christoph Lipka

    Minor refactoring (quality level, experimental feature warnings) to
    eliminate povrayold.h.

Commit 0ea2da40 on 2014-06-23 by Christoph Lipka

    More colour data type refactoring.

    Now using different dedicated colour data types for:
    - parsing (legacy RGBFT format)
    - front-end result image processing (RGBT format; the front-end never
      actually used the filter channel)
    - render engine colour math (currently RGBFT format; intended to be
      later replaced with RGB colour + RGB transmit)

Commit eca922a2 on 2014-06-19 by Christoph Lipka

    Replaced `SMALL_COLOUR` legacy type with new type `PhotonColour` based
    on new class template `GenericRGBEColour`; also employing this new type
    in Radiance HDR image file reading & writing.

Commit c9dc791a on 2014-06-19 by Christoph Lipka

    Merge branch 'master' into refactor

Commit 914fff13 on 2014-06-19 by Christoph Lipka

    Reduced warning level in Visual Studio 2010 external library projects

Commit e5bd5298 on 2014-06-19 by Christoph Lipka

    Further refactoring of blend map handling. Also got rid of legacy data
    types COLOUR, RGB and UV_VECT for good.

Commit d7504bf0 on 2014-06-18 by Christoph Lipka

    Merge branch 'master' into refactor

Commit ac564f72 on 2014-06-18 by Christoph Lipka

    Fixing waves pattern in normals

Commit 9a278c7f on 2014-06-16 by Christoph Lipka

    Merge branch 'hotfix/image_pattern'

Commit cf1c3fbe on 2014-06-18 by Christoph Lipka

    Refactored blend map handling
    Removed the hard-coded limit of 256 blend map entries along the way.
    More work to follow.

Commit 75025936 on 2014-06-16 by Christoph Lipka

    Merge branch 'hotfix/image_pattern' into refactor

Commit cc24c626 on 2014-06-16 by Christoph Lipka

    fixing broken image_pattern

Commit 2a2d1a8f on 2014-06-15 by Christoph Lipka

    Gotten rid of legacy VECTOR type for good.

Commit 2a41f046 on 2014-06-14 by Christoph Lipka

    Eliminated some circular include file dependencies. Also thrown out a
    bit of dead code.

------------------------------------------------------------------------------
POV-Ray v3.7.0.20140613
------------------------------------------------------------------------------

Commit 2c4e9f28 on 2014-06-13 by Christoph Lipka

    Merge branch 'refactor'

Commit 35a20c26 on 2014-06-13 by Christoph Lipka

    More refactoring work on the Pattern classes, as well as some
    documentation work; also introducing new file header comments

Commit 2423c2fe on 2014-05-29 by Christoph Lipka

    Merge branch 'master' into refactor

Commit 16f24ce0 on 2014-05-29 by Christoph Lipka

    Merge branch 'master' into refactor

Commit 50d8f958 on 2013-12-17 by Christoph Lipka

    Merge branch 'master' into refactor

Commit 02eb3aeb on 2013-12-17 by Christoph Lipka

    Merge branch 'master' into refactor

Commit 137ccc2f on 2013-12-16 by Christoph Lipka

    Merge branch 'hotfix' into refactor

Commit 9fc31fa0 on 2013-12-16 by Christoph Lipka

    forgot to commit source/base/colour.h

Commit f24393f6 on 2013-12-16 by Christoph Lipka

    overhauled the implementation of the "inverse" keyword; also fixed
    three bugs discovered along the way (FS#315, FS#316, and another one
    previously masked by FS#316).

    corresponds to Perforce change 6164.

Commit 4f39fd01 on 2013-12-16 by Christoph Lipka

    header file cleanup: Weeded out frame.h, removing obsolete stuff and
    moving some definitions out to other headers; also weeded out a few
    other header files, moving some stuff to the corresponding .cpp files
    or to different header files.

    corresponds to Perforce change 6163.

Commit 58ff3f50 on 2013-12-16 by Christoph Lipka

    introduced new class BasicRay as lightweight alternative to (and base
    class for) class Ray, to be used in cases where only geometric properties
    (origin and direction) matter; TraceTicket is now referenced via the
    Ray class, rather than passed around separately.

    corresponds to Perforce changes 6161, 6162.

Commit 87dd6eec on 2013-12-16 by Christoph Lipka

    disentangling the legacy PATTERN, PIGMENT, TEXTURE and TNORMAL types

    corresponds to Perforce changes 6156, 6158.

Commit a03dd730 on 2013-12-16 by Christoph Lipka

    Merge branch 'master' into refactor

Commit b75c069e on 2013-12-16 by Christoph Lipka

    turned pattern handling code into a legion of polymorphic classes;
    some work on special cases still pending.

    corresponds to Perforce change 6154.

Commit d35825d5 on 2013-12-16 by Christoph Lipka

    replaced legacy VECTOR and UV_VECT types with Vector3d and Vector2d,
    respectively, throughout almost all of the POV-Ray code.

    corresponds to Perforce changes 6146, 6147, 6150.

Commit 7c4abbf9 on 2013-12-16 by Christoph Lipka

    Merge branch 'hotfix' into refactor

Commit 5cee76ec on 2013-12-16 by Christoph Lipka

    replaced legacy VECTOR, SNGL_VECT and UV_VECT types with Vector3d,
    SnglVector3d and Vector2d, respectively, in shapes code, plus other
    refactoring work in fractal code.

    corresponds to Perforce changes 6123, 6124, 6138, 6139, 6140, 6142,
    6143, 6144, 6145, 6149.

Commit 838ce9d6 on 2013-12-16 by Christoph Lipka

    replaced legacy VECTOR and UV_VECT types with Vector3d and Vector2d,
    respectively, in ObjectBase interface, objects.h functions, and throughout
    virtually all of the parser code.
    Also fixed a few bugs introduced with previous change.

    corresponds to Perforce changes 6121, 6122, 6134, 6151, 6153.

Commit 40d9c39a on 2013-12-16 by Christoph Lipka

    replaced legacy VECTOR, SNGL_VECT and BBOX_VECT types with Vector3d, new
    SnglVector3d and new BBoxVector3d types, respectively, in Intersection
    and Ray classes, in bounding code and a small portion of photons code;
    also replaced these types in the Blob class except where dictated by
    the ObjectBase interface;
    gave old BBOX data type a facelift along the way, throwing out the
    union and separating it into two separate new types (BoundingBox and
    MinMaxBoundingBox).

    corresponds to Perforce changes 6118, 6119, 6120.

Commit ca930a9f on 2014-06-10 by Christoph Lipka

    Adding a bit of documentation on the POVMS interface

Commit 19c420eb on 2014-06-04 by Christoph Lipka

    minor fixes in dithering code

Commit 31010d11 on 2014-05-29 by Christoph Lipka

    Merge branch 'hotfix'

Commit 0b403907 on 2014-01-06 by Christoph Lipka

    fix typo in configure.ac

Commit 98a3cdf1 on 2014-01-06 by Christoph Lipka

    Merge branch 'master' into hotfix/boost1.49-boost_system

Commit b039cf35 on 2014-01-04 by Christoph Lipka

    Merge branch 'master' into hotfix/boost1.49-boost_system

Commit 16ea3b40 on 2014-01-04 by Christoph Lipka

    Fix for configure attempting to link boost_system even with boost 1.49
    or earlier.

Commit 34d0c6c0 on 2014-05-24 by Christoph Lipka (c-lipka)

    Merge pull request #25 from nicolas17/comment-typos

    Fix some comment typos.

Commit 1bdfcac3 on 2014-03-07 by Nicolás Alvarez

    Fix some comment typos.

Commit d76159a1 on 2014-01-06 by Christoph Lipka

    Reverted last change 4e6ca9e257030a4d949735665348e3d02937b5f2 due to
    unacceptable side effects, and implemented a different approach to try
    and fix issue #18

Commit 4e6ca9e2 on 2014-01-01 by Christoph Lipka (c-lipka)

    Merge pull request #18 from jlec/master

    Only test mkl library with --with-libmkl

Commit 20de88e4 on 2013-12-26 by Justin Lecher

    Update logic for mkl location testing

    Signed-off-by: Justin Lecher <jlec@gentoo.org>

Commit 781b2f33 on 2013-12-25 by Justin Lecher

    Only test mkl library with --with-libmkl

    If we do not make the test conditionally and use --without-libmkl
    during configure,
    we end up with -Lno in LDFLAGS.

    Signed-off-by: Justin Lecher <jlec@gentoo.org>

Commit 5673a34c on 2013-12-25 by Christoph Lipka

    Whitespace cleanup

Commit 171a5b69 on 2013-12-25 by Christoph Lipka

    Add `Create_Continue_Trace_Log` ini setting and `-CC` command line option.

    Specifying `Create_Continue_Trace_Log=no` or `-CC` will suppress the
    creation of the `.pov-state` file. Note that while this may save space and
    even speed up simple renders, if you abort the render you will be unable
    to continue it later using the `Continue_Trace=yes` or `+C` options.

Commit 4745018a on 2013-12-20 by Christoph Lipka (c-lipka)

    Merge pull request #17 from LeForgeron/master

    Proposal to fix fs#314 (perforce #6159)

Commit a21c6e8d on 2013-12-20 by Jérôme Grimbert

    Proposal to fix fs#314 (perforce #6159)

------------------------------------------------------------------------------
POV-Ray v3.7.0.20131220
------------------------------------------------------------------------------

Commit 5a081e92 on 2013-12-20 by Christoph Lipka

    fix <http://bugs.povray.org/task/318> and other media sampling method
    3 bogosities

Commit 8c26649c on 2013-12-17 by Christoph Lipka

    update various file headers to reflect that they no longer match the
    Perforce depot

Commit 2fd1779e on 2013-12-16 by Christoph Lipka (c-lipka)

    Merge pull request #16 from LeForgeron/master

    Fixing fs#317

Commit 7ae56bc2 on 2013-12-15 by Jérôme Grimbert

    Fixing fs#317

Commit 4add3ce2 on 2013-12-16 by Christoph Lipka

    disabled the arbitrary limit on the number of blob components

    corresponds to Perforce change 6155.

Commit 21fddefc on 2013-12-16 by Christoph Lipka

    updated platform config for OS X based
    on a patch by GitHub user Nyoho (see
    https://github.com/Nyoho/povray/commit/a646d36abbd1e76fb04ce9b0789936d5505b075c)

    corresponds to Perforce change 6148.

Commit 02213382 on 2013-12-16 by Christoph Lipka

    attempt to fix GitHub issue #7

    corresponds to Perforce change 6137.

Commit d8921a46 on 2013-12-16 by Christoph Lipka

    fix GitHub issues #5 and #6.

    corresponds to Perforce changes 6135, 6136.

Commit c69dd33b on 2013-12-16 by Christoph Lipka

    now using std::tr1 smart pointers if available, or boost's implementation
    otherwise; we're using <boost/tr1/memory.hpp> to pull in either. Should
    fix GitHub issue #8.

    corresponds to Perforce change 6132.

Commit a417f975 on 2013-12-16 by Christoph Lipka

    eliminate uint type from platform-independent code; fixes GitHub issue #10

    corresponds to Perforce change 6130.

Commit 7807b535 on 2013-12-16 by Christoph Lipka

    added header files to hold Unix flavor-specific config settings;
    also thrown out the unused fseek64 macro from both Unix and Windows
    syspovconfig.h; should fix GitHub issue #9.

    corresponds to Perforce changes 6129, 6131, 6133.

Commit b260c34c on 2013-12-16 by Christoph Lipka

    Merge branch 'hotfix'

Commit f69d768d on 2013-12-16 by Christoph Lipka

    fix for build error introduced with latest change (forgot to commit
    types.h)

Commit c768ecdd on 2013-12-16 by Christoph Lipka

    eliminating some redundant computations in SSLT code

    corresponds to Perforce changes 6109, 6110.

Commit e703a8ba on 2013-12-16 by Christoph Lipka

    various changes related to color computations.

    corresponds to Perforce changes 6089, 6090, 6095, 6096, 6097, 6113.

Commit 278eb390 on 2013-12-16 by Christoph Lipka

    preliminary workaround for FS#313 (radiosity.cpp
    pov::RadiosityFunction::BeforeTile assertion failed)

    corresponds to Perforce change 6092.

Commit 956d8ab8 on 2013-12-16 by Christoph Lipka

    VS2010 kept reporting GUI project to be out of date even if it wasn't;
    fixed.

    corresponds to Perforce change 6088.

Commit 2d12f464 on 2013-12-16 by Christoph Lipka

    hotfix for residual issues with FS#270; the artifacts still observed
    with radiosity abort-continue will now only show in the preview, but
    not in the generated image file.

    corresponds to Perforce change 6086.

Commit ba9fd68c on 2013-12-16 by Christoph Lipka

    eliminated a host of C-style pointer casts, mostly by replacing with
    C++-style casts

    corresponds to Perforce changes 6083, 6084, 6085.

Commit ce3f6594 on 2013-12-16 by Christoph Lipka

    atmospheric fog, rainbows and sky spheres now use C++ style memory
    allocation instead of POV_MALLOC

    corresponds to Perforce change 6082.

Commit 3c71689e on 2013-12-16 by Christoph Lipka

    minor robustness improvement in IFF image reading code

    corresponds to Perforce change 6081.

Commit c1d54d3e on 2013-12-16 by Christoph Lipka

    minor change in how zlib is included in povmscpp.cpp

    corresponds to Perforce change 6080.

Commit a53e0901 on 2013-12-16 by Christoph Lipka

    more sophisticated way of pulling in the libtiff headers in povray.cpp
    without breaking the Windows build

    corresponds to Perforce change 6079.

Commit af319dd9 on 2013-12-16 by Christoph Lipka

    minor improvements in SSLT relating to the storage of precomputed values

    corresponds to Perforce change 6078.

Commit 1430e54d on 2013-12-16 by Christoph Lipka

    require boost >= 1.38

    corresponds to Perforce change 6077.

Commit 51947bd3 on 2013-12-16 by Christoph Lipka

    fixed two yet unreported bugs:
    - Iridescence did not properly honor full area diffuse lighting.
    - Subsurface scattering did not play nice with non-default brilliance
      values.

    corresponds to Perforce change 6076.

Commit c86bd0ad on 2013-12-16 by Christoph Lipka

    minor beautifications

    corresponds to Perforce change 6075.

Commit d60416f4 on 2013-12-06 by Christoph Lipka (c-lipka)

    Merge pull request #14 from yoe/master

    Files shipping with automake are now automatically taken from there,
    using the --add-missing parameter.
    Fixes issue #6. Thanks to Wouter "yoe" Verhelst.

Commit 9e7e624b on 2013-12-06 by Wouter Verhelst

    Make sure Makefile.in gets generated properly

    config.guess, config.sub, depcomp, etc, are all scripts that ship with
    automake, and which will be updated with a new automake version; it's
    generally a bad idea to use one of these scripts from a different
    automake version.

    Moreover, recent versions of automake also contain and require a
    "compile" script, which isn't in this directory.

    Instead, pass the "--add-missing" parameter to automake, which will copy
    the required files to the expected location. This will make automake
    work, regardless of the version, and will avoid any issues due to the
    used scripts not matching the used automake version.

Commit 227c801d on 2013-12-05 by Christoph Lipka (c-lipka)

    Merge pull request #13 from yoe/master

    Unix build process now automatically detects whether -lboost_thread
    requires -lboost_system to work. (Thanks to Wouter "yoe" Verhelst for
    the fix.)

Commit cba5bc53 on 2013-12-06 by Wouter Verhelst

    Account for changes in boost dependencies

    Since <boost/thread/thread.hpp> includes some headers which will already
    call a boost_system function, recent versions of boost require
    -lboost_system before -lboost_thread will work, resulting in a failure
    of this test if not accounted for.

    Make it try without -lboost_system first, but try again with it added to
    $LIBS if that fails.

Commit 8986ec37 on 2013-12-05 by Christoph Lipka

    minor whitespace cleanup

Commit 63cb736a on 2013-12-04 by Chris Cason (chris20)

    Merge pull request #11 from c-lipka/master

    eliminate duplicate inclusion of hcmplx.h in backend/math/hcmplx.cpp

Commit b557f952 on 2013-12-05 by Christoph Lipka

    eliminate duplicate inclusion of hcmplx.h in backend/math/hcmplx.cpp

Commit 6d3d43e5 on 2013-11-17 by Chris Cason (chris20)

    Merge pull request #4 from ideasman42/master

    quiet compiler warnings building with gcc and clang.

Commit b3846f57 on 2013-11-17 by Campbell Barton

    quiet compiler warnings building with gcc and clang.
    - define variables and functions as static when not declared by headers.
    - remove some unused defines.
    - other minor changes to quiet warnings.

Commit fbc04c97 on 2013-11-16 by Chris Cason (chris20)

    Merge pull request #2 from POV-Ray/3.7-stable

    3.7 stable

Commit cfbd0c1a on 2013-11-16 by Chris Cason (chris20)

    Update README.md

Commit 16c80a36 on 2013-11-16 by Chris Cason (chris20)

    Update README.md

Commit b775d60f on 2013-11-16 by Chris Cason (chris20)

    Update README.md

Commit 0bbe2b76 on 2013-11-16 by Chris Cason (chris20)

    Create README.md

Commit 373631e4 on 2013-11-16 by Chris Cason (chris20)

    Add docs

------------------------------------------------------------------------------
POV-Ray v3.7.0.0
------------------------------------------------------------------------------

Commit 392510ad on 2013-11-06 by Chris Cason (chris20)

    Fix typo

Commit b0fd27df on 2013-11-06 by Chris Cason (chris20)

    Add .gitignore

Commit c7442dfc on 2013-11-06 by Chris Cason (chris20)

    Update README.md

Commit 5378182e on 2013-11-06 by Chris Cason (chris20)

    Add README.md

Commit 86f4639d on 2013-11-06 by Chris Cason (chris20)

    Initial import
    [to GitHub]

---------------------------------
Changes between 3.7.RC7 and 3.7.0
---------------------------------

Change 6048 on 2013/09/14 by jholsenback@linux-c2bm

    picking up a last minute change

Change 6047 on 2013/09/14 by jgrimbert@smpdirect

    fix of formula to restore backward compatibility of heightfield on
    red+green non-indexed color image (not only backward compatible, but also
    correct formula to cover the full range as intended and documented) Added
    also comment to explain why the indexed-image code should NOT be fixed:
    despite providing more range, index*257 would break the backward
    compatibility, so index*256 should remains (for historical reasons only)


Change 6037 on 2013/09/01 by jholsenback@linux-c2bm

    updates to changes/revision files

Change 6036 on 2013/09/01 by jholsenback@linux-c2bm

    cleanup... updates and deletes

Change 6035 on 2013/09/01 by jholsenback@linux-c2bm

    delete outdated files

Change 6034 on 2013/09/01 by jholsenback@linux-c2bm

    several more changes to unix man page

Change 6028 on 2013/08/29 by jholsenback@linux-c2bm

    follow up to change #6027

Change 6027 on 2013/08/29 by jholsenback@linux-c2bm

    updates to unix man page

Change 6026 on 2013/08/27 by chrisc@x8

    add warranty disclaimer to console output

Change 6025 on 2013/08/27 by chrisc@x8

    remove outdated support header files for borland, mingw and watcom
    compilers. if support is needed for any of the above, it would be better to
    start a fresh header as the old ones have not been used since 3.6

Change 6024 on 2013/08/27 by chrisc@x8

    correct typo in rename

Change 6023 on 2013/08/27 by chrisc@x8

    remove old 4BPP toolbar icons as 16-color mode support isn't really
    relevant anymore

Change 6022 on 2013/08/27 by chrisc@x8

    rename a few files whose names were upper-case

Change 6018 on 2013/08/27 by chrisc@x8

    move SubmitMinidump to internal area

Change 6013 on 2013/08/24 by chrisc@x8

    another tweak to the about box

Change 6012 on 2013/08/24 by chrisc@x8

    update about bitmap to remove explicit URL's and add support to about
    window code to make some areas act as hyperlinks

Change 6011 on 2013/08/24 by chrisc@x8

    fix issue with editor selection due to off-by-one line numbers. make use of
    SetCaretPos consistent

Change 6008 on 2013/08/20 by clipka@xcli-pc-7

    fix for FS#304

Change 6007 on 2013/08/18 by clipka@xcli-pc-7

    fix cpuinfo stub for unofficial builds

Change 6005 on 2013/08/18 by chrisc@x8

    move about.psd from bitmaps/source to smp/internal/windows

Change 6004 on 2013/08/18 by chrisc@x8

    move #undef back inside official code block

Change 6002 on 2013/08/18 by chrisc@x8

    added some files left out of previous submissions

Change 5997 on 2013/08/18 by thorsten@host26

    adds Mac xcode project and support files, still some compile errors due to
    misconfigured paths etc. Big issues resolved though.

Change 5996 on 2013/08/18 by clipka@cli-pc-7

    minor indentation cleanup of various sample scene files

Change 5994 on 2013/08/18 by chrisc@x8

    swathe of windows changes for 3.7 AGPL3 release. Most visible is removal of
    the splash window and updating of the about dialog. 'Tip of the day'
    feature removed. Licensing clarified for pvbitmap.cpp/.h. pvlegal.h updated
    to reflect AGPL3. readme.html/.txt updated. Import libraries added for
    povcmax so as to allow cmedit to link without it. Several functions only
    used in official builds moved to new file 'official.h'. Many other changes
    related to official vs unofficial builds.

Change 5993 on 2013/08/18 by chrisc@x8

    move Intel CPU info code to legacy license area; add stub for
    unofficial builds

Change 5992 on 2013/08/18 by chrisc@x8

    add BSD-style license header to chi2.cpp as discussed with author

Change 5991 on 2013/08/18 by chrisc@x8

    remove some distribution license-related files that are no longer required

Change 5990 on 2013/08/18 by chrisc@x8

    update a few unix files to reflect AGPL

Change 5984 on 2013/08/11 by thorsten@xhost26

    first version of Mac display code for a preview window created by the
    terminal application

Change 5983 on 2013/08/11 by thorsten@xhost26

    clean up Mac tree

Change 5982 on 2013/08/09 by chrisc@x8

    tweak console project, remove unused codemax project

Change 5981 on 2013/08/09 by chrisc@x8

    remove outdated makefiles

Change 5979 on 2013/08/09 by chrisc@x8

    remove vs8 and vs9 solutions

Change 5978 on 2013/08/07 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5977 on 2013/08/07 by chrisc@x8

    tweaks related to console build (windows version)

Change 5962 on 2013/07/28 by chrisc@x8

    remove all dependence on codemax header files

Change 5961 on 2013/07/28 by chrisc@x8

    move codemax source to //depot/povray/smp/legacy-license/codemax/...

Change 5960 on 2013/07/27 by chrisc@x8

    move cmedit source to //depot/povray/smp/windows/cmedit

Change 5958 on 2013/07/27 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5946 on 2013/07/22 by clipka@cli-pc-7

    fix filetype of prebuild.sh (unix specific)

Change 5940 on 2013/07/21 by chrisc@x8

    first pass at explicitly assigning licences to individual source files in
    the distribution tree. Notes: fish13 has been deleted, and the Insert Menu
    and Templates sub-trees have not been updated

Change 5936 on 2013/07/20 by jholsenback@linux-c2bm

    corrections to a malformed regex used to fill a script variable

Change 5922 on 2013/07/18 by clipka@cli-pc-7

    trivial file header fix

Change 5915 on 2013/07/14 by chrisc@x8

    change headers to reflect AGPL; remove beta-test boilerplate

Change 5911 on 2013/06/23 by jgrimbert@smpdirect

    fixed typo in warp allocation: spherical warp would have been reported
    as cylindrical warp in case of leak or failure to allocate

Change 5908 on 2013/06/13 by jgrimbert@smpdirect

    corrected a segmentation fault that can occur when starting povray from
    within blender (unix specific)

Change 5907 on 2013/06/09 by jgrimbert@smpdirect

    addressing FS#294 splines are not thread safe

Change 5906 on 2013/05/13 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5901 on 2013/04/21 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5899 on 2013/04/18 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5897 on 2013/04/17 by jholsenback@linux-c2bm

    updates to changes/revision files

Change 5896 on 2013/04/17 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5890 on 2013/04/13 by jholsenback@linux-c2bm

    follow up to change #5889 corrected typo

Change 5889 on 2013/04/13 by jholsenback@linux-c2bm

    rename a distribution template file that had spaces in it's filename

Change 5884 on 2013/04/06 by clipka@cli-pc-7

    completed rollback of change #5876

Change 5883 on 2013/04/03 by jholsenback@linux-c2bm

    addressing FS#262 linux sources being compiled twice

Change 5882 on 2013/04/02 by clipka@cli-pc-7

    partical rollback of change #5876 (radiosity)

Change 5880 on 2013/03/31 by jholsenback@linux-c2bm

    follow up to change #5859 (consistency)

Change 5878 on 2013/03/30 by clipka@cli-pc-7

    follow up to change #5877 (minor comment update)

Change 5877 on 2013/03/30 by thorsten@thorsten-pc-2012

    moves some code to frontend, where it is needed

Change 5876 on 2013/03/30 by thorsten@thorsten-pc-2012

    adds back experimental warning for radiosity and adds experimental warning
    for gamma handling

Change 5867 on 2013/03/16 by clipka@cli-pc-7

    cleaned up our jpeg code to use the proper constants for the jpeglib's
    custom "boolean" type (we erroneously passed standard C++ bool constants
    instead, which could lead to compile errors on some systems)

Change 5859 on 2013/03/10 by jholsenback@linux-c2bm

    activate one message de-activate another

Change 5858 on 2013/03/10 by jholsenback@linux-c2bm

    suppress what appears to be a duplicate version related message

Change 5857 on 2013/03/08 by jholsenback@linux-c2bm

    bump unix VERSION to 3.7.0

Change 5856 on 2013/03/08 by jholsenback@linux-c2bm

    bump VERSION to 3.7.0

Change 5854 on 2013/03/08 by jholsenback@linux-c2bm

    rollback change #5843

Change 5853 on 2013/03/08 by jholsenback@linux-c2bm

    rollback change #5842

Change 5852 on 2013/03/08 by jholsenback@linux-c2bm

    rollback change #5841

Change 5851 on 2013/03/08 by clipka@cli-pc-7

    fixes for CID#967299 - CID#967301 resource leak

Change 5850 on 2013/03/08 by clipka@cli-pc-7

    fix for CID#967298 resource leak

Change 5849 on 2013/03/08 by jholsenback@linux-c2bm

    rollback change #5840

Change 5848 on 2013/03/08 by clipka@cli-pc-7

    fixes for CID#967302 and CID#967303 resource leak

Change 5846 on 2013/03/08 by clipka@cli-pc-7

    fixes FS#274 light source fading doesn't work properly with
    area_illumination and subsurface scattering

Change 5843 on 2013/03/06 by jholsenback@linux-c2bm

    addressing CID's# 967358-967362 Uninitialized variables 

Change 5842 on 2013/03/06 by jholsenback@linux-c2bm

    addressing CID's# 967337-967345 Uninitialized scalar variables 

Change 5841 on 2013/03/06 by jholsenback@linux-c2bm

    addressing CID's# 967333-967336 Uninitialized scalar variables 

Change 5840 on 2013/03/06 by jholsenback@linux-c2bm

    addressing CID# 967350 Uninitialized pointer read

Change 5820 on 2013/03/01 by clipka@cli-pc-7

    minor fix to radiosity statistics (octree samples/node)

Change 5819 on 2013/02/25 by clipka@cli-pc-7

    minor but effective changes to octree code for improved performance
    in radiosity-heavy scenes

Change 5816 on 2013/02/23 by jholsenback@linux-c2bm

    addressing CID #967264 non array delete used on array "str"

Change 5815 on 2013/02/23 by clipka@cli-pc-7

    fix for FS#271 (old behaviour is retained for pre-3.7 scenes)

Change 5814 on 2013/02/21 by clipka@cli-pc-7

    fixes a potential illegal memory access when reading a broken .pot
    (16-bit greyscale GIF) file, detected as Coverity issue CID #967365
    should also solve CID #967363 and #967364 along the way

Change 5812 on 2013/02/17 by chrisc@x8

    update source code readme.html

Change 5808 on 2013/02/17 by chrisc@x8

    fix unquoted path in shell extension registration and add registry key
    backups for uninstall

Change 5807 on 2013/02/14 by chrisc@x8

    minor setup tweak (windows version)

Change 5806 on 2013/02/14 by chrisc@x8

    update about box image (windows version)

Change 5805 on 2013/02/14 by chrisc@x8

    update keywords used for context-sensitive help (windows version)

Change 5804 on 2013/02/14 by chrisc@x8

    change copyright date to 2013

Change 5802 on 2013/02/12 by chrisc@x8

    update windows help file

Change 5801 on 2013/02/11 by chrisc@x8

    integrate flohmuller branch to trunk

Change 5796 on 2013/02/10 by jholsenback@linux-c2bm

    updates to changes/revision files

-----------------------------------
Changes between 3.7.RC6 and 3.7.RC7
-----------------------------------

Change 5795 on 2013/02/10 by chrisc@x8

    add Append_File INI option (same as +GP)

Change 5792 on 2013/02/09 by chrisc@x8

    follow up to #5786: write banner to stream each time we open for append,
    unless the stream is debug. without this it's often difficult to determine
    where a new render starts. we don't do this for the debug stream as we
    presume the user wants to format it as they see fit

Change 5791 on 2013/02/09 by chrisc@x8

    add Jerome Grimbert to contributing developer list

Change 5789 on 2013/02/07 by chrisc@x8

    update to insert menu from Friedrich Lohmueller

Change 5788 on 2013/02/06 by clipka@cli-pc-7

    addendum to change #5786

Change 5787 on 2013/02/06 by clipka@cli-pc-7

    fixed a portability issue of change #5784

Change 5786 on 2013/02/06 by thorsten@thorsten-pc-2012

    add +GP option, which allows users to append streamed console to
    existing console stream output file(s). Further, this option is now
    forced-on internally for the second frame of an animation,so output streams
    are appended. This has the side effect that the command-line option can
    be used to append all animation output to an existing file as well

Change 5784 on 2013/02/04 by clipka@cli-pc-7

    some minor code sanitizing

Change 5783 on 2013/02/04 by clipka@cli-pc-7

    added even more const modifiers to the code

Change 5782 on 2013/02/03 by clipka@cli-pc-7

    upgraded zlib to version 1.2.7 windows VS

Change 5778 on 2013/02/02 by clipka@cli-pc-7

    addendum to change #5777

Change 5777 on 2013/02/02 by clipka@cli-pc-7

    upgraded libpng and libjpeg to versions 1.5.14 and 9 respectively in
    windows VS

Change 5774 on 2013/02/02 by jholsenback@linux-c2bm

    conditionally filter indexentry tags from the unx and mac doc-sets, leaving
    them in the windows docs, as they are required to produce searchable
    index in chm file

Change 5773 on 2013/02/01 by chrisc@x8

    fix a few minor UI issues

Change 5772 on 2013/02/01 by jholsenback@linux-c2bm

    update changes/revision file for RC7

Change 5771 on 2013/02/01 by clipka@cli-pc-7

    fix for FS#270: render abort-continue (+C) sometimes skips blocks

Change 5770 on 2013/01/30 by clipka@cli-pc-7

    added plenty of const modifiers to the code; kicked out a few unused
    parameters and one piece of unused code

Change 5769 on 2013/01/30 by clipka@cli-pc-7

    a few signedness fixes in image handling code

Change 5768 on 2013/01/29 by clipka@cli-pc-7

    updated copyright information for some 3rd party libraries

Change 5767 on 2013/01/29 by jholsenback@linux-c2bm

    bump version to RC7 so unix build packages get branded properly

Change 5766 on 2013/01/29 by jholsenback@linux-c2bm

    updated changes/revision files

Change 5764 on 2013/01/29 by clipka@cli-pc-7

    a few whitespace fixes in revision.txt

Change 5763 on 2013/01/28 by chrisc@x8

    fix a long-standing bug where pressing 'pause' during a parse or render
    could sometimes put the frontend/backend sync into an unrecoverable state.

    the root cause was the fact that even if a call to the backend's pause
    method succeeds (e.g. the backend state correctly transitions to
    SceneData::Scene_Paused in the case of the parser), it is still possible
    for the task thread to move to Scene_Ready if the parser doesn't
    call Task::Cooperate() before finishing. the frontend code has until now
    assumed that if a call to e.g. RenderFrontend::PauseParser() succeeded,
    the parser would stay paused until told to resume or stop.

Change 5762 on 2013/01/28 by chrisc@x8

    add the proportion of the image in X and Y directions to the pixel offset
    displayed when the mouse hovers over the render window. e.g. if the mouse
    is at X=25 Y=50 of a 200x200 pixel render, the window title will
    show "25,50 [0.125,0.250]". this is to make it easier to work out
    row/column values for entering into the command-line for partial renders.

Change 5761 on 2013/01/28 by chrisc@x8

    add new option to prevent the system from sleeping whilst a render is in
    progress. by default this is selected.

Change 5760 on 2013/01/28 by chrisc@x8

    add an entry to the default tools menu to browse the sample scenes folder.

Change 5758 on 2013/01/28 by chrisc@x8

    add standard declares to the user keywords file.

Change 5757 on 2013/01/28 by chrisc@x8

    make the shortcuts placed on the desktop shorter, as windows usually hides
    the end of them.

Change 5755 on 2013/01/27 by chrisc@x8

    Fix for FS#150: Windows file association problems
    Fix for FS#224: Keyword Completion does not work for several names

    Various fixes/improvements to the way Windows INSTALL works and how the
    documents path is auto-detected if not specified

Change 5754 on 2013/01/27 by chrisc@x8

    Fix for FS#153: Error determining I/O permissions when using .ini file

Change 5753 on 2013/01/27 by chrisc@x8

    Fix for FS#232: illegal map_type usage reporting. Additionally parser also
    now issues an error for invalid interpolate values as well

Change 5751 on 2013/01/27 by chrisc@x8

    Bump benchmark version to 2.01. This is to avoid comparison with the 2.00
    used in various prior betas (primarily due to changes in the renderer
    rather than the benchmark itself)

Change 5750 on 2013/01/27 by clipka@cli-pc-7

    Replaced access declarations (already deprecated in C++98,
    dropped in C++11) with using declarations

Change 5748 on 2013/01/25 by chrisc@x8

    Adds a few more options to the editor tab right-click menu as suggested in FS#135

Change 5747 on 2013/01/24 by chrisc@x8

    Fix for FS#109: Debug_File no longer appends frame-by-frame debug data

Change 5746 on 2013/01/22 by clipka@cli-pc-7

    Fix for FS#267: Bug in "sor" primitive leads to random black
    artifacts in radiosity scenes 

Change 5745 on 2013/01/21 by clipka@cli-pc-7

    Minor changes to address issues uncovered by static code analysis

Change 5743 on 2013/01/20 by clipka@cli-pc-7

    Fix for FS#266: command line options in ini files don't accept quoted
    strings as parameters and other flaws found by means of static code
    analysis, plus minor code changes to aid in static code analysis

Change 5742 on 2013/01/19 by clipka@cli-pc-7

    Addressing CID#967224: Coverity static software analysis

Change 5741 on 2013/01/19 by clipka@cli-pc-7

    Addressing CID#967248: Coverity static software analysis

Change 5740 on 2013/01/19 by clipka@cli-pc-7

    Addressing CID#967249: Coverity static software analysis

Change 5739 on 2013/01/19 by clipka@cli-pc-7

    Addressing CID#967420: Coverity static software analysis

Change 5738 on 2013/01/11 by clipka@cli-pc-7

    Partial fix for FS#265 supress clang compilation warnings

Change 5732 on 2012/12/15 by clipka@cli-pc-7

    Follow-up: hotfix for #5731

Change 5731 on 2012/12/15 by clipka@cli-pc-7

    Fixed a bug in file-backed image container found by code review

Change 5730 on 2012/12/15 by clipka@cli-pc-7

    Housekeeping: indentations and comments

Change 5727 on 2012/11/12 by clipka@cli-pc-7

    As a follow-up to change #5719: added new source files to VS10 project

Change 5726 on 2012/11/12 by clipka@cli-pc-7

    Update to change #5710, to avoid hard-coding the value for boost::TIME_UTC
    aka boost::TIME_UTC_. Also renamed _TIME_UTC_ to POV_TIME_UTC for more
    robustness against any future naming conflicts.

Change 5725 on 2012/11/08 by clipka@cli-pc-7

    Unknown command line options didn't always produce an error;
    Also a fix for a minor flaw in string handling of INI settings

Change 5724 on 2012/11/01 by jgrimbert@smpdirect

    Fix for FS#257 (cannot find input file when resuming animation render)

Change 5718 on 2012/09/17 by clipka@cli-pc-7

    Fix a bug introduced with change #5665

Change 5716 on 2012/09/04 by chrisc@x8

    Assign .pov file association to POVWIN when installing.

Change 5715 on 2012/09/04 by chrisc@x8

    Fix for FS#238 (error during #read causes file to be kept open).

Change 5714 on 2012/09/04 by chrisc@x8

    Improve cloning of v3.6 INI and provide better defaults.

Change 5713 on 2012/09/03 by chrisc@x8

    Fix to handle filenames with a comma in them (crash report 419).

Change 5712 on 2012/09/02 by chrisc@x8

    Tweak the Windows setup file.

Change 5711 on 2012/09/02 by chrisc@x8

    Bump version to RC7.

Change 5710 on 2012/09/02 by chrisc@x8

    Fixed an issue caused by boost's change of TIME_UTC to TIME_UTC_.

Change 5708 on 2012/08/18 by jgrimbert@smpdirect

    Fix to get rid of the following compile warning on Linux variants:
    shape/poly.cpp:188:3: warning: this decimal constant is unsigned only in
    ISO C90 [enabled by default]

Change 5703 on 2012/08/05 by chrisc@x8

    Fix for benchmark thread vs CPU count.

Change 5699 on 2012/07/17 by clipka@cli-pc-7

    Fix for FS#249 (UTF-8 files with BOM not being accepted)

Change 5696 on 2012/07/10 by clipka@cli-pc-7

    Housekeeping (whitespace and comments)

Change 5695 on 2012/07/10 by clipka@cli-pc-7

    Fixed radiosity issues with "diffuse albedo" syntax

Change 5694 on 2012/07/10 by clipka@cli-pc-7

    Fix whitespace in screen.inc

Change 5689 on 2012/07/02 by thorsten@thorsten-pc-2012

    Adds back crand support.

Change 5688 on 2012/06/28 by jholsenback@linux-c2bm

    Addressing FS#247 set no_radiosity in Screen_Object()

Change 5687 on 2012/06/27 by jgrimbert@smpdirect

    Allow GD flag to work correctly (Fix FS#234): a typo.

Change 5685 on 2012/06/25 by clipka@cli-pc-7

    Follow up to #5678

Change 5684 on 2012/06/25 by clipka@cli-pc-7

    Update to #5678: workaround for fmod() apparently not conforming to C++
    standard on some linux machines.

Change 5678 on 2012/06/21 by clipka@cli-pc-7

    Fix for FS#233 Picture index out of range. - Fatal error in renderer:
    Uncategorized error.

----------------------------------------
Changes between 3.7.beta.RC5 and 3.7.RC6
----------------------------------------

Change 5674 on 2012/06/18 by jholsenback@linux-c2bm

    Pick up last minute changes before release of RC6

Change 5673 on 2012/06/18 by clipka@cli-pc-7

    Follow up fix for #5672 to address compile problems on linux platform.

Change 5672 on 2012/06/18 by clipka@cli-pc-7

    Fixed some numeric overflow issues in image handling; also fixed some
    other questionable code found along the way.

Change 5667 on 2012/06/16 by jholsenback@linux-c2bm

    Resync revsions/changes files.

Change 5665 on 2012/06/15 by chrisc@x8

    Potential fixes for a number of crash reports related to the editor,
    particularly drag & drop actions, and a fix for the XP64 installer.

Change 5663 on 2012/06/11 by clipka@cli-pc-7

    A minor fix for radiosity adc_bail_out handling.

Change 5662 on 2012/06/11 by clipka@cli-pc-7

    More comments changes and whitespace cleanup, plus some trivial code cleanup.

Change 5661 on 2012/06/11 by clipka@cli-pc-7

    A few comments changes and whitespace cleanup.

Change 5659 on 2012/06/10 by clipka@cli-pc-7

    A follow up to change #5649 corrected a formatting issue with radiosity
    statistics reporting.
 
Change 5653 on 2012/05/23 by jholsenback@linux-c2bm

    Fix for potential endless loop in CH2RGB macro

Change 5651 on 2012/05/22 by jholsenback@linux-c2bm

    Resync revsions/changes files.

Change 5650 on 2012/05/20 by chrisc@x8

    Fix merge issue from change #5387 which re-introduced a bug fixed earlier
    on (most recent crash report #385, dump file #343).

Change 5649 on 2012/05/20 by chrisc@x8

    Fix divide-by-zero in stats code when radiosity query count is 0
    (crash report #384, dump file #342)

Change 5648 on 2012/05/16 by clipka@cli-pc-7

    Additional fix associated with #5624 (colored transparent background)

Change 5636 on 2012/05/02 by jholsenback@linux-c2bm

    Resync revsions/changes files.

Change 5635 on 2012/05/02 by jholsenback@linux-c2bm

    Bump revision to RC6.

Change 5632 on 2012/03/21 by clipka@cli-pc-7

    Fix for FS#241: Photons not working correctly.

Change 5625 on 2012/03/10 by clipka@cli-pc-7

    Cleaned up various C-style casts:
    - fixed some fishy ones
    - removed some superfluous ones
    - replaced with reinterpret_cast some that were accidently casting away
      const qualifiers.
    - replaced with const_cast some that were deliberately casting away
      volatile qualifiers.
    - replaced with reinterpret_cast all others I spotted in the same files.
    - fixed some const qualifiers in function signatures.

Change 5624 on 2012/03/08 by clipka@cli-pc-7

    Fixed problems with colored transparent backgrounds.

Change 5623 on 2012/03/07 by chrisc@x8

    Updated setup script, plus a few improvements.

Change 5622 on 2012/03/07 by chrisc@x8

    Fixed the Windows help file searchable index. Note this is based on the
    snapshot of the wiki documentation set taken for RC4.

Change 5621 on 2012/03/03 by clipka@cli-pc-7

    Fixes to VS10 (windows version) build process
    - fixed ALL tiff project targets to build tiff config headers
    - fixed Debug/x64 target to build OpenEXR to Float

Change 5620 on 2012/02/28 by chrisc@x8

    Insert menu (windows version) update from Friedrich Lohmller.

----------------------------------------
Changes between 3.7.beta.RC4 and 3.7.RC5
----------------------------------------

Change 5618 on 2012/02/23 by jholsenback@linux-c2bm

    Bump to RC5 in the "correct" place

Change 5617 on 2012/02/23 by jholsenback@linux-c2bm

    Resync changes/revision.txt files

Change 5616 on 2012/02/23 by jholsenback@linux-c2bm

    Bump unix version to RC5

Change 5615 on 2012/02/23 by jholsenback@linux-c2bm

    Fix for FS#239 improper uid/gid handling incorrectly branded some files
    during non elevated privilege builds.

Change 5614 on 2012/02/23 by clipka@cli-pc-7

    Fix for crashdump #357 (triggered by non-closed SSLT-enabled
    mesh inside CSG)

Change 5612 on 2012/02/21 by chrisc@x8

    Make dump submitter a bit more robust.

Change 5610 on 2012/02/21 by clipka@cli-pc-7

    Fix for FS#12 (facets pattern in normal map)

Change 5607 on 2012/02/05 by chrisc@x8

    More installer work, should be more or less done now.

----------------------------------------
Changes between 3.7.beta.RC3 and 3.7.RC4
----------------------------------------

Change 5606 on 2012/02/04 by chrisc@x8

    Fix to FMA4 detection. AMD optimizations re-enabled.

Change 5604 on 2012/01/28 by jgrimbert@smpdirect

    Fix for FS#235 UNIX segmentation fault: when using the animation loop
    and large images are displayed.

Change 5603 on 2012/01/03 by chrisc@x8

    Updated the windows help file.

Change 5601 on 2011/12/28 by chrisc@x8

    Changed message displayed on crash.

Change 5600 on 2011/12/27 by chrisc@x8

    Initial version (windows) of NSIS-based installer.

Change 5597 on 2011/12/24 by chrisc@x8

    Added AMD optimizations for noise. Note that these are currently disabled.

Change 5596 on 2011/12/24 by chrisc@x8

    Updated the crashdump submitter.

Change 5593 on 2011/12/20 by chrisc@x8

    Add support for documents path to be anywhere, rather than requiring it to
    be in a standard location.

Change 5590 on 2011/12/19 by chrisc@x8

    Changed the windows crash reporting tool dump generation logic to always
    generate both full and mini dumps.

Change 5589 on 2011/12/15 by jholsenback_aries_1

    Removed obsolete comments (Library Path limitation)

Change 5588 on 2011/12/08 by clipka@cli-pc-7

     Added "Console" and "Console-SSE2" configurations to VS10 solution and
     some projects, and updated config & console code, to get Windows console
     project back working (needs to be back-ported to VS8 and VS9; no debug
     configuration yet); extensive testing required; expect shellout to be
     still dysfunctional.

Change 5587 on 2011/12/08 by clipka@cli-pc-7

    Updates to VS10 console project (still doesn't build at present though)

Change 5582 on 2011/12/05 by clipka@cli-pc-7

    Added Penrose P1 (N=6) and P2 (N=2) tilings as 25 and 26; changed the
    existing P3 tiling pattern number to 27

Change 5575 on 2011/12/03 by clipka@cli-pc-7

    Overhauled identifiers & comments in new patterns' code; Added a new
    "tiling" pattern: 25 type (N=2) produces a Penrose P3 tile

Change 5573 on 2011/12/02 by clipka@cli-pc-7

    Added support for tuning brightness of image-mapped sky spheres. See FS#9

Change 5572 on 2011/12/02 by clipka@cli-pc-7

   area_illumination now also respects fade_power and fade_distance. See FS#46

Change 5569 on 2011/12/01 by clipka@cli-pc-7

   major overhaul of iridescence feature

Change 5529/5528/5527 on 2011/11/22 by clipka@cli-pc-7

   added new "albedo" keyword, that can be used right after
   "diffuse", "phong" or "specular

Change 5518 on 2011/11/13 by chrisc@x8

   fix for the windows editor crash that was reported in crashdump#111

Change 5514 on 2011/11/13 by jgrimbert@smpdirect

   fix for FS#216: comment out the Radiosity= directive in raddem.ini 
   that directive became obsolete in 3.7

Change 5512 on 2011/11/12 by clipka@cli-pc-7

   fix for FS#225: translating a light source fails to translate
   the looks_like textures

Change 5511 on 2011/11/11 by clipka@cli-pc-7

   update of VS 2010 solution & projects: windows build can now statically link
   boost and openEXR libraries built from scratch

Change 5510 on 2011/11/11 by clipka@cli-pc-7

   update to add openEXR include directory tree for installation from source

Change 5509 on 2011/11/11 by clipka@cli-pc-7

   added VS 2010 projects to build boost_date_time, boost_thread and
   openEXR-related projects (not included in solution yet)

Change 5508 on 2011/11/11 by clipka@cli-pc-7

	 a logistics rollback of source/base/image/openexr.cpp and
   vfe/win/compilers/msvc.h (checked them in too early)

Change 5505 on 2011/11/11 by clipka@cli-pc-7

  added source trees for boost (subset of 1.45.0)
  and openEXR (subset of 1.6.1 with subset of IlmBase 1.0.1)

Change 5502 on 2011/11/05 by clipka@cli-pc-7

  fixed issue that caused Visual Studio 2010 to always consider
  povbackend to be outdated

Change 5501 on 2011/11/05 by clipka@cli-pc-7

  removed unused functions from vfe/win/syspovconfig.h that kept generating
  type conversion warnings

Change 5500 on 2011/11/05 by clipka@cli-pc-7

  some fixes to VS 2010 projects:
  - fixed tiff project to build tiff config headers
  - properly added subsurface.h and subsurface.cpp to povbackend project

Change 5499 on 2011/10/29 by clipka@cli-pc-7

  updating these files without change, in hope that an update of the RSC
  keywords will fix the files from always popping up in
  "reconcile offline work"

Change 5497 on 2011/09/22 by clipka@cli-pc-xp64

  fix for FS#221 "Undefined looks_like object causes hard crash"

Change 5490 on 2011/09/14 by clipka@cli-pc-xp64

  made POV_FREE macro safer to use

Change 5489 on 2011/09/14 by clipka@cli-pc-xp64

  another fix for #5487

Change 5488 on 2011/09/13 by clipka@cli-pc-xp64

  fix for stuff broken by #5487

Change 5487 on 2011/09/12 by clipka@cli-pc-xp64

  reverted changes #5474 and #5477 and implemented new fix for FS#208; local
  identifiers can now be passed out of macros without limitation.

Change 5486 on 2011/09/08 by jholsenback@jholsenback_aries

  Resync changes and revision files with recent activities

Change 5485 on 2011/09/06 by chrisc@x8

  Bump version to RC4

Change 5483 on 2011/08/28 by jgrimbert@smpdirect

  Update of benchmark.cpp related to #5480, #5477 and #5474

Change 5482 on 2011/08/25 by clipka@cli-pc-xp64

  Follow up to change #5443 to retain a TODO comment

Change 5481 on 2011/08/25 by clipka@cli-pc-xp64

  Follow up to change #5336 fixing FS#185

Change 5480 on 2011/08/22 by jgrimbert@smpdirect

  Follow up to #5474 and #5477 to avoid a second error message

Change 5479 on 2011/08/19 by clipka@cli-pc-xp64

  Rolled back change #5470 (due to undesired side effects) and implemented
  new fix for FS#165

Change 5478 on 2011/08/19 by clipka@cli-pc-xp64

  Scene file update (follow up to #5475)

Change 5477 on 2011/08/19 by jgrimbert@smpdirect
  
  Fix a regression of 5474 (returning a local colour, vector or float symbol
  (or any expression based on it) is not a problem, the symbol can be deleted
  as the value(s) are already copied in safe zone.

Change 5475 on 2011/08/18 by jgrimbert@smpdirect

  Fix to scene file to not return a #local directly from a #macro:
  - Related to change #5474 and FS#208: multiply #local by 1.

Change 5474 on 2011/08/18 by jgrimbert@smpdirect

  Fix addressing FS#208:
  - Detects deletion of current symbol and reports the error

Change 5470 on 2011/08/15 by jgrimbert@smpdirect

  Fix addressing FS#165:
  - The radius of the shooting cone was adjusted to include the whole sphere

Change 5468 on 2011/08/14 by jgrimbert@smpdirect

  - Enhanced "Photon message reporting" to address FS#190
  - Correction for segfault introduced in change #5467

Change 5467 on 2011/08/14 by jgrimbert@smpdirect

  Follow up to FS#169 memory leak:
  - Fixed the leak of 2 photon maps per frame to render. Became huge with
  the animation FS#169 used (1189 frames) leak was about 9 gigabytes on
  64 bit system.

Change 5465 on 2011/08/13 by jgrimbert@smpdirect

  Fix to avoid duplication of error message in parser reported in FS#215

Change 5460 on 2011/07/15 by jgrimbert@smpdirect

  Added a dump of the command line (unix only) when command-line option parsing
  error is reported. This addressess FS#214 which was due to an alias that
  would have been undetected without insight about an alias being used.

Change 5457 on 2011/06/26 by jholsenback@jholsenback_aries

  Finalized user contributed (jgehrcke) addressing FS#213

Change 5456 on 2011/06/24 by jholsenback@jholsenback_aries

  Corrections to fix introduced in change #5455

Change 5455 on 2011/06/24 by jholsenback@jholsenback_aries

  User contributed fix addressing endless loop condition reported in FS#213

Change 5453 on 2011/06/13 by jgrimbert@smpdirect

  Changed -V in unix option to --V (-version) to avoid conflict with
  -V (verbose) from core that was reported in FS#204

Change 5451 on 2011/06/04 by clipka@cli-pc-xp64

  Follow up to change #5450:
  - removed now obsolete SceneThreadData members

Change 5450 on 2011/06/04 by clipka@cli-pc-xp64

  Fix for UV mapping broken for parametric reported in FS#210

Change 5449 on 2011/06/02 by clipka@cli-pc-xp64

  A fix for "Cannot open file" error reported in FS#206
  - When text output files specified in INI) and added a few comments to path.h
  and path.cpp. Current solution allows arbitrary file names for output stream
  files; code for changing this to accept only "plain" file names is also
  provided but currently disabled

Change 5448 on 2011/06/02 by jgrimbert@smpdirect

  Follow up to change #5447:
  - Fix a valgrind complaint about reading uninitialised data
  in renderfrontend.cpp
  - Fix the issue with textures during tesselation with tessel{} and
  tesselate{} that was crashing at render time if a vertex was not textured due
  to using default texture on original object

Change 5447 on 2011/06/02 by jgrimbert@smpdirect

  Fix for computation of weighted textures problem reported in FS#209

Change 5446 on 2011/06/02 by clipka@cli-pc-xp64

  Improved error message output when text in-/output files cannot be opened

Change 5444 on 2011/06/02 by clipka@cli-pc-xp64

  Minor formatting cleanup to tiling.pov

Change 5443 on 2011/05/29 by jgrimbert@smpdirect

  Temporary fix for quick_color problem reported in FS#166
  - Moved the setting of qualityFlags into the constructor of the TraceTask,
  to avoid its value being overriden by the constructor of Radiosity

Change 5440 on 2011/05/22 by jgrimbert@smpdirect

  Add check for DF3 file without size FS#156

Change 5438 on 2011/05/19 by clipka@cli-pc-xp64

  Fix for Radiosity artifacts at low error_bound FS#203

Change 5437 on 2011/05/19 by jholsenback@jholsenback_aries

  A follow up to change #5436

Change 5436 on 2011/05/18 by jholsenback@jholsenback_aries

  A user contributed fix to the HFCreate_ (shapes.inc) macro

Change 5435 on 2011/05/09 by jholsenback@jholsenback_aries

  Suppress "bound_by" warnings when Bevelled_Text (shapes.inc) macro is called

Change 5433 on 2011/04/11 by clipka@cli-pc-xp64

  Fix for Calibri TrueType font garbled FS#200

Change 5431 on 2011/04/02 by jholsenback@jholsenback_aries

  Corrected scene file typos reported in FS#199

Change 5430 on 2011/03/21 by jholsenback@jholsenback_aries

  ~scenes/textures/patterns/tiling.pov now has the capability to conditionally
  write it's color_map to a text file.

Change 5428 on 2011/03/20 by clipka@cli-pc-xp64

  Subsurface scattering improvements:

  - added syntax to global subsurface block:

  global_settings { subsurface { radiosity BOOL } }

  specifies whether subsurface light transport effects should be applied to
  incoming radiosity-based diffuse illumination; if this setting is
  off (default), subsurface light transport effects will only be applied to
  direct illumination from classic light sources. Setting this to on will
  improve realism especially for materials with high translucency, but at a
  significant cost in rendering time.

  - added syntax to global radiosity block:

  global_settings {  radiosity { subsurface BOOL } }

  specifies whether radiosity sampling should honor subsurface light transport;
  if this setting is off (default), radiosity-based diffuse illumination is
  computed as if the surrounding objects had subsurface light transport turned
  off. Setting this to on may improve realism especially in the presence of
  materials with high translucency, but at some cost in rendering time.

  - Subsurface scattering is disabled in all quality levels except +Q9
  or higher.

  - More thorough fix to complement change #5425.

  - Minor changes to reduce intensity of patterned noise artifacts on
  subsurface textures.

Change 5425 on 2011/03/19 by jholsenback@jholsenback_aries

  added a temporary trap for certain subsurface conditions

Change 5424 on on 2011/03/19 by clipka@cli-pc-xp64

  change to mitigate banding with dark subsurface pigments

Change 5422 on on 2011/03/14 by clipka@cli-pc-xp64

  change to fix a no-op -J option

Change 5421 on on 2011/03/14 by clipka@cli-pc-xp64

  change to fix memory access violation when closing braces in a funtion
  were missing

Change 5418 on 2011/03/06 by jholsenback@jholsenback_aries

  added two scene files to the distribution

Change 5414 on 2011/02/27 by jgrimbert@experiment

  change +IM command line option to +MI

Change 5413 on 2011/02/25 by clipka@cli-pc-xp64

  change to mitigate problems introduced in change 5411

Change 5412 on 2011/02/25 by clipka@cli-pc-xp64

  updated subsurface scattering sample scene

Change 5411 on 2011/02/25 by clipka@cli-pc-xp64

  update SSLT code (various fixes and radiosity)

Change 5410 on 2011/02/25 by clipka@cli-pc-xp64

  changes to improve robustness regarding low translucency and/or high
  mm_per_unit settings for objects in general and blobs in particular
  added support for CSG (caveat: unions of overlapping components will cause
  unexpected results; use merge instead)

Change 5408 on 2011/02/21 by clipka@cli-pc-xp64

  bugfixes & improvements to SSLT code;
  syntax for material definition has changed as follows:

  texture {
    pigment { PIGMENT }
    finish { ...
      subsurface { translucency COLOR }
    }
  }
  interior { ior FLOAT }

  The pigment determines the SSLT material's overall appearance when applied
  to an object with sufficiently large structures. The translucency color
  (which can alternatively be a float) determines the strength of the
  subsurface light transport effect (note that the values may be >1.0; also
  note that the effect doesn't scale with the object; instead, to adjust
  materials to the dimensions of your scene, use the global mm_per_unit
  setting). The material's index of refraction also affects the appearance of
  the material, and is mandatory for SSLT materials.

  SSLT is now enabled only when a global_settings subsurface block is present;
  to enable SSLT but use the default settings, specify an empty block,
  i.e. "subsurface{}"

  Due to the experimental status of SSLT, there are currently some caveats:
  - Incorrect use may result in hard crashes instead of parse warnings.
  - Pigments having any zero color components currently don't play nice with
  SSLT; for example instead of "rgb 1" you should use something like
  "rgb <1,0.05,0.05>". Use at your own risk!

Change 5407 on 2011/02/21 by jholsenback@jholsenback_aries

  Added these user contributed mesh_camera scene files to:
  ~scenes/camera/mesh_camera/ess

  ess-ortho-camera.pov
  ess-persp-camera.pov
  ortho-camera.pov
  persp-camera.pov

Change 5405 on 2011/02/15 by clipka@cli-pc-xp64

  fixed bug causing "../../" in file paths to be stripped.

Change 5404 on 2011/02/13 by clipka@cli-pc-xp64

  changed list of experimental features: removed radiosity, added subsurface
  light transport

Change 5400 on 2011/02/08 by clipka@cli-pc-xp64

  fix for using interpolated image_maps in functions results in pixel-sized
  dot-artifacts

Change 5398 on 2011/01/24 by jholsenback@jholsenback_aries

  - A change to rewrite the 'ref=' tag as 'id=' in function GetAnchorInfo
  - Changes in the function GetMDHash to support two image formats so they BOTH
    can be recognized during migtation to the new format. 
  - A trap was added to alert if an unsupported image format is encountered.

----------------------------------------
Changes between 3.7.beta.RC2 and 3.7.RC3
----------------------------------------

Change 5391 on 2011/01/19 by chrisc@x8

  update windows help file.

Change 5390 on 2011/01/19 by chrisc@x8

  update windows insert menu.

Change 5389 on 2011/01/19 by chrisc@x8

  Bump version to RC3.

Change 5388 on 2011/01/18 by chrisc@x8

  add statusbar tooltip for windows version, primarily to allow full status 
  message to be shown on hover if its status bar section is too small.

Change 5387 on 2011/01/17 by chrisc@x8

  merge changes 5382 and 5384 from jgrimbert branch to trunk, with modifications 
  to suit.

  This adds a new INI parameter called Max_Image_Buffer_Memory (+IM), which 
  gives the number of megabytes of RAM to allow for output image caching.
  
  If the output image would use more than this, a file backed temporary image 
  is used instead. If not specified, it defaults to 128mb.

Change 5386 on 2011/01/17 by chrisc@x8

  since cooperate() is currently very low-impact, call it for every primary ray 
  as well as every 16th ray.

Change 5385 on 2011/01/17 by chrisc@x8

  Don't create the in-memory output image if image output is turned off.

Change 5384 on 2011/01/16 by jgrimbert@experiment [jgrimbert branch]

  I/O bottleneck, after benchmark: code rewrite from fs#180, ready to get some 
  parameters (from povray.ini) as soon as a way is possible.
  
  Previous code kept under #ifdef, new code in #else; Clean-up up to code managers.
	
  Issues fixed from fs#180: height*weight not matching blocksize, removed 
  gigantic vector of bool, removed assumed wrong optimisation about small 
  width. Also fixed the flag for the open() call (granting only read & write to 
  the user so far)
	
  Added meta information for 3rd party: at the end of the file/pixel array, 
  (use seek(END, -3*sizeof(size_type)) to get ready to read them)), 3 size_type 
  values: size of a pixel in byte, witdh & height.
	
	Committed for next urgent RC.

Change 5383 on 2011/01/15 by nkopp@cc-devel-test

  Fix bug that occasionally caused a crash in scenes with media (the bug was 
  introduced by an earlier refactoring)

Change 5382 on 2011/01/11 by jgrimbert@experiment [jgrimbert branch]

  Remove the I/O bottleneck (it's even worse than that) due to storing the 
  pixels in progress in a file whenever the rendering dimension is big enough. 
  The cost is 64 lines of data cache instead of 1 line. (as long as +BS is not 
  bigger than 64 (better with 32) and that the order of block rendering is per 
  line (as it is per default, so change at your own risk with big images))

Change 5381 on 2011/01/11 by jholsenback@jholsenback_aries

  two FixTags additions to filter out indexentry and sectiondesc tags because they aren't need anymore.

Change 5380 on 2011/01/10 by jholsenback@jholsenback_aries

  a fix to remove an extra closing div tag exposed by html validation

Change 5378 on 2011/01/09 by jholsenback@jholsenback_aries

  deleted old header info (my bad) to scene files

Change 5377 on 2011/01/09 by jholsenback@jholsenback_aries

  author updates and additions to scene files

Change 5376 on 2011/01/09 by jholsenback@jholsenback_aries

  remove obsolete scene files. author contributed replacements to follow.

Change 5375 on 2011/01/09 by jholsenback@jholsenback_aries

  FixTags addition to clobber "<" and ">" with escaped html versions. Most of 
  the offenders occurred in pre blocks where vectors were being represented. My 
  guess is someone just copy and pasted direct from a scene file into the 
  original html docs.

Change 5372 on 2011/01/08 by jholsenback@jholsenback_aries

  more extra or missing tag fixes that caused html validation errors

Change 5371 on 2011/01/08 by jholsenback@jholsenback_aries

  fixed misplaced opening table row tags that were causing html validation 
  errors (3 places)

Change 5365 on 2011/01/07 by chrisc@x8

  add boost/function.hpp to povray.h to fix compilation issues on some unix 
  systems.

---------------------------------------
Changes between 3.7.beta.41 and 3.7.RC2
---------------------------------------

Change 5360 on 2011/01/06 by chrisc@x8

  updates to SimpleVector usage to allow easy declaration of limits in platform 
  include files. also increase default sizes.

Change 5350 on 2011/01/05 by clipka@cli-pc-xp64

  fix FS#188 (no_reflection broken)

Change 5347 on 2011/01/05 by chrisc@cc-ubuntu-test

  fix signal handling issue reported in FS#187.

Change 5346 on 2011/01/05 by chrisc@x8

  bump version to RC2.

Change 5343 on 2011/01/04 by clipka@cli-pc-xp64

  fixed bug FS#186; parser will now adjust sub-polygon end points to exactly 
  match the start points.

Change 5342 on 2011/01/04 by chrisc@x8

  disable full memory allocation tracking on windows in favor of rougher 
  estimate based on samples of peak memory usage from windows API. also some 
  other misc changes to windows code.

Change 5341 on 2011/01/04 by chrisc@x8

  fix crash found by crashdump #77 (platform base can be NULL before the image 
  class gets destroyed in the case of unusual shutdown).

Change 5340 on 2011/01/04 by chrisc@x8

  fix crash in editor where FormatMessage() fails. refer crashdump #76.

Change 5339 on 2011/01/04 by clipka@cli-pc-xp64

  fixed gamma showcase scene

Change 5338 on 2011/01/04 by chrisc@x8

  update about box to read 2011, also fix some mis-alignment and other small issues.

Change 5337 on 2011/01/04 by nkopp@cc-devel-test

	Minor refactoring of media+photon code

Change 5336 on 2011/01/03 by clipka@cli-pc-xp64

  fixed FS#185 (wrong message about image resolution)

Change 5335 on 2011/01/03 by clipka@cli-pc-xp64

  fix for FS#184 (Too many pretrace steps when pretrace_start < pretrace_end).
	A parse error will now be generated if pretrace_start < pretrace_end.

Change 5333 on 2011/01/02 by chrisc@x8

  add windows help file.

Change 5330 on 2011/01/02 by chrisc@x8

  updated insert menu files.

Change 5329 on 2011/01/02 by chrisc@cc-ubuntu-test

  add in very basic support for running shell-outs on unix.

Change 5325 on 2011/01/01 by chrisc@x8

  hack around shellout permission issue in unix version (use a global for the meantime). untested.

Change 5323 on 2011/01/01 by chrisc@x8

  update built-in win demo scene for 3.7.

Change 5322 on 2011/01/01 by chrisc@x8

  removing beta status, moving to RC. no more timeouts.

Change 5321 on 2011/01/01 by chrisc@x8

  benchmark results on windows are now copied to the clipboard.

Change 5320 on 2011/01/01 by chrisc@x8

  a few changes due to observations made during analysis of crash dumps. no 
  ultimate cause for crashes involved yet determined due to insufficient 
  information in the minidump.

Change 5316 on 2011/01/01 by chrisc@x8

  some work on photon statistics.

Change 5315 on 2011/01/01 by chrisc@cc-devel-test

  Photon fixes from Nathan.

Change 5313 on 2010/12/30 by clipka@cli-pc-xp64

  using "color srgb" (or similar) before assumed_gamma was defined resulted in 
  a hard crash; fixed by generating a proper parse error instead.

Change 5312 on 2010/12/29 by clipka@cli-pc-xp64

  modified radiosity3.pov tutorial scene to use more realistic surface finish

Change 5311 on 2010/12/28 by clipka@cli-pc-xp64

  updated scenes that will feature in the radiosity tutorial, to be more 
  fitting for POV-Ray 3.7

Change 5310 on 2010/12/28 by jholsenback@jholsenback_aries

  changes to suppress assumed_gamma warnings

Change 5308 on 2010/12/28 by jholsenback@jholsenback_aries

  release changes #version and assumed_gamma

Change 5307 on 2010/12/28 by chrisc@x8

  make windows status pane a bit wider and add process memory usage slot in 
  status bar.

Change 5306 on 2010/12/28 by chrisc@x8

  fix memory leak.

Change 5305 on 2010/12/27 by chrisc@x8

  go back to using the current version as the default language version and 
  modify the warning messages associated with a missing or late #version.

Change 5303 on 2010/12/27 by clipka@cli-pc-xp64

  last-minute backward compatibility update:
	
  Gamma Handling:
	
    The assumed_gamma keyword is no longer deprecated; to the contrary, it is 
    now considered mandatory if a #version 3.7 or higher is specified, and its 
    absence will raise a "possible error" in this case, with a value of 1.0 being 
    presumed. (Note that #version, too, is now mandatory, and its absence will 
    raise a warning as well).
	
    The assumed_gamma value is now presumed to denote the "working color 
    space", in which classic color literals are specified and color 
    computations to be performed. Note however that this will give unrealistic 
    results for any value other than 1.0.
	
    Colors specified using "srgb" & co. will be converted from sRGB to the 
    working color space.
	
    image_map input files for which definitive implicit or explicit gamma 
    information is available (either by file format specification like the HDRI 
    formats, header information like PNG with sRGB or gAMA chunk, or a user 
    override via the "gamma" keyword) will be converted to the working color 
    space. If no definitive information is available, the respective files will 
    be presumed to match assumed_gamma if #version is < 3.7 or unspecified, or 
    any official recommendation if #version >= 3.7 is specified.
	
    height_field, bump_map and image_pattern input files will not be subject to 
    gamma-adjustment, unless the user explicitly specifies an override via the 
    "gamma" keyword; in that case, the file is presumed to match the gamma 
    value specified, and converted to linear values, irrespective of 
    assumed_gamma.
	
  Concerning anti-aliasing, for the decision whether to anti-alias the color 
  values will be converted from the working color space to that specified by 
  the Assumed_Gamma INI setting; the averaging of the samples however will be 
  performed in the working color space.
	
    For render preview, the generated image will be converted from the working 
    color space to that specified by the Display_Gamma setting. If 
    Display_Gamma is not specified, a platform-specific default will be 
    presumed.
	
    For file output, the generated image will be converted from the working 
    color space to whatever the file format mandates (this applies to OpenEXR 
    and Radiance HDR); if no such mandatory color space exists, the image will 
    be converted into that specified by the File_Gamma setting. If File_Gamma 
    is not specified either, the image will be converted into whatever is 
    officially recommended for that file format, or the de-facto standard; if 
    even that doesn't exist, no gamma adjustment is performed. In any case, if 
    the file format provides a means to specify a gamma in the image header 
    (this applies to PNG), the respective data is set according to whatever 
    gamma the image is converted to, regardless of the working color space.
	
    If assumed_gamma is not specified, and #version is set to pre-3.7 or 
    undefined, no gamma handling is performed at all.
	
	In terms of backward compatibility, this translates as follows:
	
    If assumed_gamma is not specified, and #version is set to pre-3.7 or 
    undefined, full compatibility with 3.6 and earlier is maintaned.
	
    If assumed_gamma is specified and #version is set to pre-3.7 or undefined, 
    compatibility with 3.6 is subject to the following restrictions: (a) full 
    output file handling compatibility requires File_Gamma to be set to the 
    same value as Display_Gamma (or left undefined if Display_Gamma is 
    undefined), and (b) input file handling is not backward compatible in case 
    of PNG files.
	
    If assumed_gamma is not specified and #version is set to 3.7 or higher, 
    compatibility with 3.6 or earlier is not maintained.
	
--------------------------------------------
Changes between 3.7.beta.40 and 3.7.beta.41
--------------------------------------------

Change 5286 on 2010/12/20 by chrisc@x8

  fix code list control appearing on primary monitor while povwin is on non-primary monitor.
	make render window sanity check smarter with respect to multiple monitors.
	add INI keywords to highlight list for editor.

Change 5282 on 2010/12/20 by clipka@cli-pc-xp64

  last-minute update to colour syntax for gamma pre-corrected colours; dropped 
  the "gamma" keyword there (it remains enabled for image input files) in favor 
  of the following syntax:
	
	    colour srgb <Rp,Gp,Bp>
	    colour srgbt <Rp,Gp,Bp,T>
	    colour srgbf <Rp,Gp,Bp,F>
	    colour srgbft <Rp,Gp,Bp,F,T>
	
  where Rp,Gp,Bp are colour component values pre-corrected for a display 
  conforming to the sRGB colour space, and F,T are linear colour component 
  values.

Change 5280 on 2010/12/20 by chrisc@x8

  update benchmark INI file to reflect removed/added options. update 
  compiled-in benchmark file to match one in distribution.

Change 5279 on 2010/12/20 by chrisc@x8

  implement requirement for "#version 3.7" to be provided to obtain full v3.7 functionality.
	prior to a #version statement appearing, the version defaults to 3.62.
  additionally, if the first #version appears after any other declaration, or 
    #version does not appear at all, a post-parse warning is issued.

Change 5277 on 2010/12/20 by chrisc@x8

  default to boost::thread_specific_pointer for taskDataPtr with compilers that don't support native TLS.

Change 5276 on 2010/12/20 by chrisc@x8

  integrate changes 5273 and 5275 from jgrimbert branch to trunk.
	
	  5275: comment out dead (and bogus) code in Poly object, raising max order to 35 because 15 was too small
	        (someone needed a 16th order), and add a new syntax to describe a polynomial equation (it's an addition,
	        the old way is kept):
	
	  5273: fs#179 proposal for simple fix (tested) to missing $HOME

Change 5275 on 2010/12/19 by jgrimbert@experiment

  comment out dead (and bogus) code in Poly object, raising max order to 35 
  because 15 was too small (someone needed a 16th order), and add a new syntax 
  to describe a polynomial equation (it's an addition, the old way is kept):
	
    polynomial { <order>, [xyz(<a>,<b>,<c>):<value>,]* [remaining as usual for poly]}
	
	Default value for all coefficient is 0.0;
	each xyz(): set the coefficient to <value> for x^a.y^b.z^c;
	(constant is xyz(0,0,0)). Ordering of xyz is irrelevant (but identical index keep only the last one)
	a sphere (radius 1...  x^2 + y^2 + z^2 -1 =0)
	polynomial{ 2, xyz(2,0,0):1, xyz(0,2,0):1, xyz(0,0,2):1, xyz(0,0,0):-1 }

Change 5274 on 2010/12/19 by clipka@cli-pc-xp64

  fix bug FS#182 (multi-textured blobs in intersections / differences broken)

Change 5273 on 2010/12/15 by jgrimbert@experiment

  fs#179 proposal for simple fix (tested) to missing $HOME

Change 5271 on 2010/12/15 by clipka@cli-pc-xp64

  changed the mechanism to retrieve & format the current time from SDL; new 
  syntax is as follows:

    - The keyword "now" evaluates to the time elapsed since 2000-01-01, 00:00:00 
      GMT in days, with a precision of seconds or better.
  
    - The function "datetime(FLOAT [,STRING])" interprets the FLOAT as days 
      since 2001-01-01, 00:00:00 GMT, and the STRING as a formatting string (same 
      format and default as was previously taken by "now([STRING])").
  
  Consequently, "datetime(now)" does what previously "now()" did, and 
  "datetime(now,STRING)" does what previously "now(STRING)" did.

Change 5270 on 2010/12/15 by chrisc@x8

  deprecate histogram output. some fixes to create_ini output.

Change 5268 on 2010/12/15 by chrisc@x8

  insert menu render fixes.

Change 5267 on 2010/12/15 by chrisc@x8

  avoid crash condition in editor find/replace if memory allocation fails.

Change 5266 on 2010/12/14 by jholsenback@jholsenback_aries

  follow up to address compilation error introduced with change #5261

Change 5265 on 2010/12/14 by chrisc@x8

  see if this fixes the fseek64 issue on linux.

Change 5264 on 2010/12/14 by chrisc@x8

  better handling of bad alloc and runtime error exceptions during message 
  processing (don't pass them up to the main thread).

Change 5263 on 2010/12/14 by chrisc@x8

  work around double-free causing memory corruption and later crash when create 
  scene (or probably any POVMS callback function) threw an exception.

Change 5262 on 2010/12/14 by chrisc@x8

  make windows frontend more aware of backend failures.

Change 5261 on 2010/12/14 by chrisc@x8

  change main thread and povray init to accept a callback to notify when the 
  main thread exits. this is needed to make sure the front end knows of a 
  premature exit of the backend thread and to avoid using the (now deleted) 
  message queue.

Change 5260 on 2010/12/14 by chrisc@x8

  POVMS_Send now reports a timeout when one happens.

Change 5258 on 2010/12/12 by clipka@cli-pc-xp64

  Added new include file, "ior.inc", defining ior & dispersion constants for a 
  lot of materials.

Change 5257 on 2010/12/12 by clipka@cli-pc-xp64

  Added new sample/test scene, "scenes/gamma/gamma_showcase.pov" (used in new 
  gamma section in the docs)

Change 5256 on 2010/12/11 by clipka@cli-pc-xp64

  disabled #default { image_map { gamma ... } } statement; may be re-enabled in 
  future versions, probably with a different syntax

Change 5255 on 2010/12/10 by jholsenback@jholsenback_aries

  re-enable show_clouds in the builtin benchmark scene

Change 5254 on 2010/12/09 by clipka@cli-pc-xp64

  Display gamma handling was broken in two places; fixed.

Change 5253 on 2010/12/09 by jholsenback@jholsenback_aries

  remove obsoleted code (image_map gamma)

Change 5252 on 2010/12/09 by jholsenback@jholsenback_aries

  remove obsoleted code (image_map gamma)

Change 5251 on 2010/12/09 by clipka@cli-pc-xp64

  Fixed metadata time zome bug introduced with #5210 (see FS#64 comments); 
  POV-Ray will now write proper Zulu time into the metadata again.

Change 5234 on 2010/12/04 by clipka@cli-pc-xp64

  added dither method information to options output

Change 5233 on 2010/12/04 by clipka@cli-pc-xp64

  Fixed a few flaws that caused the dither INI options & command line parameter 
  to not work properly; added dither support for Radiance HDR

Change 5232 on 2010/12/04 by clipka@cli-pc-xp64

  Dithering Support / Gamma Improvements / Code Refactoring:
	
    Add support for output file dithering; dithering is controlled by the INI 
    file settings "Dither=BOOL" and "Dither_Method=xx" as well as the command 
    line option "+/-THxx", where xx is one of:
	
    "B2".."B4": Bayer pattern dithering using 2x2, 3x3 or 4x4 patterns, respectively
    "D1": simple 1-dimensional error diffusion dithering
    "D2": simple 2-dimensional error diffusion dithering (needs extra memory for 2 pixel rows)
    "FS": Floyd-Steinberg error diffusion dithering (needs extra memory for 2 pixel rows)
	
  The default is "-THfs", i.e. dithering is off, with Floyd-Steinberg being the 
  default if only "+TH" is specified.
	
  Dithering works for all file formats except JPEG and OpenEXR (no intention to 
  implement) as well as Radiance HDR (non-straightforward to implement); these 
  file formats simply ignore the setting.
	
  Added dithering to reder preview, using 4x4 Bayer dithering.
	
  Display_Gamma now supports the "sRGB" option just as File_Gamma already did; 
  besides "sRGB", "srgb" and "SRGB", any combination of upper-/lowercase 
  letters is now recognized.
	
  Moved image data quantization / encoding / decoding functions from 
  image.h/cpp to new files encoding.h/cpp.

--------------------------------------------
Changes between 3.7.beta.39 and 3.7.beta.40
--------------------------------------------

Change 5225 on 2010/12/02 by chrisc@x8

  fix divide-by-zero crash in editor support code (refer crash report #50).

Change 5224 on 2010/12/02 by chrisc@x8

  change default update check period to one day in lead-up to final release.

Change 5223 on 2010/12/02 by chrisc@x8

  make sure simplevector.h pulls in pov_err.h.

Change 5222 on 2010/12/02 by chrisc@x8

  expand uses of FixedSimpleVector<64> to 127 elements. this doesn't fix the issue
  of course but will mitigate it a bit at the cost of increased memory usage.

Change 5221 on 2010/12/02 by chrisc@x8

  bump version to beta.40.

Change 5220 on 2010/12/01 by clipka@cli-pc-xp64

  fixed bug causing interpolated image maps to be shifted by half a pixel, as 
  described in news://news.povray.org:119/4bdad2a5@news.povray.org.

Change 5219 on 2010/12/01 by chrisc@x8

  mitigate issue with crackle sometimes chewing up huge amounts of RAM. see 
  FS#56 for more details.

  NB this fix is not ideal, in particular we ought to provide an INI setting to 
  allow the user to nominate how much RAM they want to use for the cache. 
  currently it's hard-coded to roughly 30mb per thread max during a block, and 
  15mb per thread when a block is cleaned up after it's done. if the size of 
  the cache would exceed the upper hard limit, new entries will not be cached.

Change 5218 on 2010/12/01 by chrisc@x8

  differentiate between hitting the limits of the fixed vector class and actual 
  memory allocation failure.

Change 5217 on 2010/12/01 by chrisc@x8

  improve reporting of uncategorized or unknown exception codes to aid in 
  tracking down the cause.

Change 5216 on 2010/11/30 by chrisc@x8

  add ovus.cpp/h to windows projects.

Change 5215 on 2010/11/30 by chrisc@x8

  integrate changes 5188 to head from jgrimbert branch into trunk.

Change 5214 on 2010/11/30 by jgrimbert@experiment

  adding the ovus code (#5200 & #5201) which was missing.

Change 5212 on 2010/11/29 by chrisc@x8

  integrate change 5183 to trunk.

Change 5211 on 2010/11/28 by clipka@cli-pc-xp64

  improved alpha premultiplication handling for pattern images

Change 5210 on 2010/11/28 by clipka@cli-pc-xp64

  metadata improvements:

  - Using boost::posix_time and boost::date_time::gregorian now for timestamp 
    computations rather than boost::date_time::c_time (which is not thread-safe 
    on some platforms).
  
  - Moved TGA file format-specific timestamp generation code out of Metadata 
    class.
  
  - PNG output now also writes a tIME chunk.
  
  - Modified PNG metadata handling to be thread-safe.
  
  - Fixed PNG chunk order to place tEXt chunks before image data, as required 
    according to PNG specification.

Change 5209 on 2010/11/28 by clipka@cli-pc-xp64

  minor code cleanup:

  - replaced min3/max3 macros in configbackend.h and MAX3 macro in octree.h 
    with new template functions min3/max3 in types.h
  
  - removed some obsolete constants from frame.h
  
  - eliminated a few unnecessary include statements, and made boost include 
    statements more consistent

Change 5208 on 2010/11/28 by jgrimbert@experiment

  fixed 5203: the map is now simpler (all centers of tile is at i/num, border 
  at (i+1)/num) (for i from 0 to num-1). The gradient on each tile is the same 
  for every tiles on the same tiling.

Change 5206 on 2010/11/28 by clipka@cli-pc-xp64

  Multiple changes to gamma handling:
	
	Removed file_gamma keyword. Input image file default can now be set via
	
	    default { image_map { gamma FLOAT } }
	
	or
	
	    default { image_map { gamma srgb } }
	
  For backward compatibility with legacy scenes, POV-Ray 3.7 will now mimick 
  all the gamma handling of POV-Ray 3.6 if the scene has a #version statement 
  specifying a version of 3.6x or earlier, and/or specifies an assumed_gamma, 
  with the following exceptions:

    * If the scene overrides the default input file gamma, POV-Ray will fall 
      back to the new gamma handling model.
  
    * If the scene is rendered using the File_Gamma INI file setting, or using 
      an INI file setting or command-line option to specify a version of 3.7 or 
      later, input file gamma handling will still mimick 3.6 behaviour, but 
      output file gamma handling will use the new model.
  
    * PNG input file handling is not fully backward compatible.
	
  Due to architectural changes, bug fixes and improvements, backward 
  compatibility for PNG input files is subject to the following exceptions:
  
    * For palette-based PNG files (an uncommon flavour of PNG), backward 
      compatibility is provided only if assumed_gamma is not specified. (This is 
      due to a POV-Ray 3.6 bug not mimicked by POV-Ray 3.7.)

    * For non-palette-based PNG files, backward compatibility is provided only 
      if assumed_gamma is specified. (This is due to an architectural change that 
      makes this overly difficult to mimick.)
  
    * For PNG files carrying both an sRGB chunk and a fitting gAMA chunk, 
      results will slightly differ. (This is due to POV-Ray 3.7 recognizing sRGB 
      chunks, which POV-Ray 3.6 did not do.)
  
    * For PNG files carrying an sRGB chunk but no gAMA chunk (or a wrong one), 
      backward compatibility is not provided. (Again this is due to POV-Ray 3.7 
      recognizing sRGB chunks.)

Change 5205 on 2010/11/28 by chrisc@x8

  Older platform SDK's don't have PROCESS_MODE_BACKGROUND_BEGIN defined.

Change 5203 on 2010/11/28 by jgrimbert@experiment

  Adding pavement & tiling patterns.
  
  tiling # (#: 1 to 24) provide 24 classical tiling pattern with 1 or more kind of tiles.
  The full map is used when rendering a tiling. 0 is the center of first tile.
  1 is the border of the only tile, or the center of another tile.
  When more than one kind of tile is used (#), the border are at 1/#, 2/#, ... #-1/# 
	
  (would it be simpler to have the border at 0/#, 1/#... #-1/# ? and center at 
   1/#-, 2/#-, #/#- ? might be amended later)
	
	pavement: (using polymino paving the plane)

   * number_of_sides (3,4,6) : the basic tile is a triangle, a square or an 
     hexagon
   
   * number_of_tiles (1 to 5 or 6): the number of basic tiles to combine together
     to make one real tile
   
   * pattern (depend on side & tile) (1 to ...): how the basic are combined 
     together
	
	 * exterior (1 to 3, irrelevant for hexagon)
   
   * interior (1 to 3)
   
   * form (1 to 3, or 1 to 4 for square)
	
  Variations on type of corner. 0 is plain, 1 is a straight cut, 2 is a curved cut.
	All complet sets are covered.

Change 5202 on 2010/11/26 by jgrimbert@experiment

  Add square & triangular pattern (2D, in xz plane, 4 & 6 area in shape of squares and triangles)

Change 5201 on 2010/11/26 by jgrimbert@experiment

  Adding bitwise operation (bitwise_and(), bitwise_or(), bitwise_xor()) Similar 
  to max(), not limited to 2 parameters.
  Also provide keywords for ovus object

Change 5200 on 2010/11/26 by jgrimbert@experiment

  Add the ovus shape. Documentation in french at http://jgrimbert.free.fr/pov/patch/ovus.html

  It's like a torus, but in egg shape ...
  
    ovus { base_radius, top_radius }
  
  (top_radius < 2.0*base_radius or else it's just a sphere)

  Retrofit of my old patch from povray 3.1; The code is mine (it was a fun time 
  with equations, eight years ago), so I can here license it for official 
  distribution. Egg, Avocado, Head... plenty of usage (for head, rotate it 
  upside down with a slant, the top radius is ready to match the jaws)


Change 5196 on 2010/11/22 by jgrimbert@grimbert

  Experimental, add exterior type 7 & 8 for fractal pattern, using the number 
  of actual iteration to get out (=e) and the factor (=n). 7 gives back 
  mod(e,n)/n (covering 0 to n-1/n), while 8 covers 0 to 1 with mod(e,n+1)/n. 
  Not protected against silly n (like n<1) so far.

Change 5195 on 2010/11/22 by chrisc@x8

  update support for file-backed RGBFT images to allow 64-bit seek offsets. 
  NOTE: platforms that do not implement fseek64() must provide one (either a 
  function or #define).

  add code to automatically switch to using file-backed intermediate images 
  when width >= 32 and pixel count >= 1024*1024.

Change 5194 on 2010/11/21 by chrisc@x8

  Add new option to set render priority to background (only available on Vista or later).
	Add note to crash handler dialog mentioning the continue option.
  Make standard minidump output more verbose as current dumps are a bit too 
  sparse to be helpful in some cases.

Change 5193 on 2010/11/21 by chrisc@x8

  fix issue where a shutdown after a render that allocated a lot of memory 
  blocks (or any other case where the shutdown takes more than five seconds) 
  could throw an uncaught exception. this could then cause the 'terminated in 
  an unusual way' windows error message.

Change 5192 on 2010/11/21 by clipka@cli-pc-xp64

  fix issue introduced with #4979 that would cause gamma to be screwed up with 
  non-transparent TGA input files

Change 5190 on 2010/11/21 by clipka@cli-pc-xp64

  fixed target platform metadata

Change 5189 on 2010/11/08 by jgrimbert@grimbert

  fixed #5183: the display of Frame Step was last frame when the Frame Step 
  option was not used.

Change 5188 on 2010/11/08 by jgrimbert@grimbert

  Revision of Fractal fields in pattern structure to allow deeper iterations 
  (past 32767, now upto 2^32-1) for fractal patterns. Footprint of structure 
  should stay the same, as the fields for types (interior & exterior) have been 
  reduced to unsigned char (only 0 to 6 used so far, whenever the number of 
  types reaches 255 it will be time to revert to a short)

Change 5183 on 2010/11/04 by jgrimbert@grimbert

  +STP / Frame_Step= , animation option inspired from megapov with two 
  restrictions: only positive step value are supported (forward, no backward 
  rendering) and the value is not available in the SDL (it won't be costly to 
  add it now as a #declare, but philosophicaly it should not be visible: we are 
  just rendering non consecutives frames, the clock & frame number (as well as 
  delta) should not affected).

  At the same patch, the return of the display of the Animation Options, right 
  after the Parser Options (well, inside the parser option in fact). (it does 
  not display the actual clock information when animation is on, only the 
  animation's parameters)

Change 5180 on 2010/11/02 by chrisc@x8

  turn a pov_base::Exception thrown during parse into a parse error. this 
  allows the line number of the error to be reported. see FS#80.

Change 5179 on 2010/11/01 by clipka@cli-pc-xp64

  fix FS#168 (noise_generator default broken)

Change 5177 on 2010/11/01 by chrisc@x8

  Add invalid parameter handler, will now throw kParamErr exception when the 
  RTL complains about invalid parameters.

Change 5176 on 2010/11/01 by chrisc@x8

  Merge changes 5167, 5168, 5169, 5170 and 5171 to trunk with a number of changes.
	
	All: Replace spaces with tabs where appropriate.

  #5169: Some bugfixes, formatting changes.
  
  #5170: Some bugfixes.
  
  #5170: Removed 'input_file_name' token; this is now implemented via an 
         automatically-inserted declare (see #5175).
  
  #5170: call to localtime_r changed to boost::date_time::c_time::gmtime() to 
         avoid platform portability issues (windows doesn't have the _r variant) and 
         to use GMT as the default timezone (so we can insert Z into the time string 
         rather than relying on strftime returning an ISO 8601 compliant string for '%z').
  
  #5170: Call to strftime wrapped with try/except and windows code modified to 
         raise kParamErr upon the vc RTL calling the CRT invalid parameter handler 
         (which would otherwise cause program termination when users pass an invalid 
         formatting string).

Change 5175 on 2010/11/01 by chrisc@x8

  Add support for passing ASCII strings via kPOVAttrib_Declare.
	Add pre-declared variable 'input_file_name' to vfe setup code.

Change 5171 on 2010/10/27 by jgrimbert@grimbert

  Addendum to #5170 (fs#134): protect the string returned by now("...format 
  string...") against error in format string ending in a too long answer for 
  the allocated array. Also use a #define for the size of that array, so it's 
  easier to change it if needed.

Change 5170 on 2010/10/26 by jgrimbert@grimbert

  fs#134 : provide SDL with "input_file_name", a token replaced by a string 
  which is the name of the input file of the scene; and a string returning 
  function "now()".
	
  now() can have a string parameter (but can also be used without; the 
  parenthesis are mandatory anyway). 
	
  When provided with a string, its value is used for formatting the current 
  local time. Formatting documentation is the one of strftime() C function. 
  (LC_TIME is taken into account too, so "%x" "%X" and "%c" might be different 
  from one system to another)
	
  Without parameter (that's not 'now("")', but 'now()' ), the format is 
  "%Y-%m-%d %T-%z"
	
  You can get the number of second from Epoch with "%s" (and for other 
  possibilities, have a look at the man page of strftime). (whatever can the 
  Epoch be on your system)
	
  The final string is limited to about 200 glyphs (or char), you should not 
  need as much for a printable time.

Change 5169 on 2010/10/25 by jgrimbert@grimbert

  FS#105: the return of the Output Options (with minor corrections about Jpeg 
  quality handling, and default row & columns start/end): The TODO about 
  filename/path are fixed using similar approach in Parser Options (going the 
  UCS2 way first, then converting to ascii).

Change 5168 on 2010/10/24 by jgrimbert@grimbert

  Rendering order replaced with distinct rendering options: pattern (-RP / 
  Render_Pattern) and block step (-RS / Render_Block_Step)

  Pattern is now (unsigned) positive, default to 0 (as previous)
  
  Block Step is as previously, reduced to a pseudoprime with height*width (in 
  block count)
  
  Now a given pattern and a block step can both be specified at the same time.

Change 5167 on 2010/10/18 by jgrimbert@grimbert

  Adding a final version for RenderOrder (-RO) option: default remain as previously
  (from left to right, then top to bottom). Default is 0 (as well as 1)

  with -1, it's top to bottom, then left to right
  
  with -2, it's closing from left & right to center, top & bottom alternatively 
  to middle
  
  with -3, it's the opposite from -2 (starting at center-middle, going left & 
  right, then to top & bottom)
  
  with -4 it's -2 rotated (like -1 is to 0): closing top & bottom to middle, 
  alternatively left & right to centre
  
  with -5, it's the opposite from -4 (starting at middle-center)
  
  with N > 0, it's about 1 square every N (about: N might get reduced to allow 
  clock arithmetic to cover the whole picture: N must be pseudo-prime with 
  number of blocks to render; at worst it is shrinked to 1... the default)

Change 5166 on 2010/10/15 by chrisc@x8

  merge changes 5162-5165 to trunk.
	
  fs#154 : get owner & group of $HOME to assert the ownership of povray.conf & 
           povray.ini in $HOME/... subtree during installation (should be now
           fine with both "sudo make install" from joe user, and "make install"
           from root user)
	
  fs#64 : add metatags to output image (excepted for BMP, there is no room in BMP
          format for comment).

  The date of creation, the software name and 4 lines of additional text 
  (recommended to stay under 80 char), all in ASCII.

  So far the 4 lines are just kind of constants depending from the compilation 
  option. If you have a better usage for these lines, just go for it.
	
  fs#167 : force the computation on resize() to happen on unsigned long int by 
           either adding ul qualifier to existing constant or by introducing a
           1ul factor in all resize (w * h ...) calls.

Change 5164 on 2010/10/13 by jgrimbert@grimbert

  fs#167 : force the computation on resize() to happen on unsigned long int by 
           either adding ul qualifier to existing constant or by introducing a
           1ul factor in all resize( w * h ...) calls.

Change 5163 on 2010/10/12 by jgrimbert@grimbert

  fs#64 : add metatags to output image (excepted for BMP, there is no room in 
          BMP format for comment).

  The date of creation, the software name and 4 lines of additional text 
  (recommended to stay under 80 char), all in ASCII.

  So far the 4 lines are just kind of constants depending from the compilation 
  option. If you have a better usage for these lines, just go for it.

Change 5162 on 2010/10/12 by jgrimbert@grimbert

  fs#154 : get owner & group of $HOME to assert the ownership of povray.conf & 
           povray.ini in $HOME/... subtree during installation (should be now fine
           with both "sudo make install" from joe user, and "make install" from root user)

Change 5157 on 2010/09/13 by chrisc@x8

  handle case where INI file has old paths due to setup changes.

Change 5156 on 2010/09/13 by chrisc@build

  add sse2 DLL's to setup.

Change 5155 on 2010/09/12 by chrisc@x8

  integrate changes from 32-bit installer.

Change 5154 on 2010/09/12 by chrisc@x8

  convert branched 32-bit installer to suit 64-bit platform.

Change 5153 on 2010/09/12 by chrisc@build

  update to beta 39, add crash dump submit binary, and fix install location issue.

Change 5148 on 2010/09/12 by chrisc@build

  update 32-bit install script to allow attempted install to program files even 
  if not elevated.

--------------------------------------------
Changes between 3.7.beta.38 and 3.7.beta.39
--------------------------------------------

Change 5140 on 2010/09/02 by jholsenback@jholsenback_aries

  update revision.txt and changes.txt prior to beta-39 release

Change 5139 on 2010/09/02 by chrisc@x8

  bump version to beta 39

Change 5136 on 2010/09/02 by chrisc@x8

  add max ray distance to camera definition, also marks mesh camera
  as experimental.

Change 5131 on 2010/09/01 by jholsenback@jholsenback_aries

  added mesh_camera demo scenes

Change 5130 on 2010/08/31 by clipka@cli-pc-xp64

  fix for bug introduced with change #5124

Change 5129 on 2010/08/30 by jholsenback@jholsenback_aries

  consistency change with recent built-in benchmark. reference change #5105

Change 5128 on 2010/08/30 by chrisc@x8

  Add mesh_camera to available camera types.

  The mesh camera is a special camera type that allows complete control of
  the ray origin and direction for each pixel of the output image. The basic
  concept is to associate pixels with faces defined within a mesh or mesh2
  object. The mesh need not be instantiated in the scene, though it can be
  (and doing so can lead to some interesting uses, such as texture baking
  or illumination calculations).
  
  In its simplest form, each pixel of the output image is assigned to a face
  of the mesh according to (width * (int) y) + (int) x. However, more complex
  mapping is possible via multiple meshes and multiple rays per pixel. The
  type of mapping in use is determined by the distribution method parameter
  in the camera declaration. Except for mapping #3, the ray origin will be
  set to the centriod of the face, and the direction will be that of the
  face's normal. For mapping #3, barycentric co-ordinates are determined
  from the UV co-ords of the first face to match the X and Y position, and
  those are then coverted to a position on the face which will serve as the
  ray origin. Support is provided to move the origin off the face along the
  normal, and to reverse the ray direction.
  
  For most of the distribution methods, any POV feature that causes sub-
  pixel positioning to be used for shooting rays (e.g. AA or jitter) will
  not do anything useful, because X and Y are converted to integers for
  indexing purposes. At this time, no warning is issued if AA etc is
  requested when rendering a non-applicable distribution; this may be
  added later.

  The syntax for the mesh camera is currently as follows:
  
  camera {
      mesh_camera {
        rays_per_pixel
        distribution_type
        MESH_OBJECT
        [MESH_OBJECT ...]
      }
      [location]
      [direction]
      [smooth]
  } 
  
  rays_per_pixel:
    This float parameter controls the number of rays that will be shot for each pixel
    in the output image. Each distribution allows different values, but the minimum is
    always 1.
  
  distribution_type:
    This float parameter controls how pixels are assigned to faces, as documented below.
  
    distribution #0:
      This method allows single or multiple rays per pixel, with the ray number 
      for that pixel allocated to each mesh in turn. The index into the meshes
      is the ray number (where rays_per_pixel > 1), and the index into the
      selected mesh is the pixel number within the output image. If there is no
      face at that pixel position, the resulting output pixel is unaffected.
  
      You must supply at least as many meshes as rays_per_pixel. Each pixel is
      shot rays_per_pixel times, and the results averaged. Any ray that does not
      correspond with a face (i.e. the pixel number >= face count) will not
      affect the resulting pixel color. Generally, it would be expected that
      the number of faces in each mesh is the same, but this is not a requirement.
  
      Using multiple rays per pixel is useful for generating AA (since standard AA
      won't work) or for special effects such as focal blur, motion blur, and so
      forth, with each additional mesh specified in the camera representing a
      slightly different camera position.
  
      Note that it is legal to use transformations on meshes specified in the
      camera body, hence it's possible to obtain basic AA by using a single mesh
      multiple times, with subsequent ones jittered slightly from the first,
      and a suitable rays_per_pixel count.
  
    distribution #1:
      This method allows both multiple rays per pixel and summing of meshes; i.e. 
      the faces of all the supplied meshes are logically summed together as if 
      they were one single mesh. In this mode, if you specify more than one ray 
      per pixel, the second ray for a given pixel will go to the face at (width * 
      height * ray_number) + pixel_number, where ray_number is the count of rays 
      shot into a specific pixel. If the calculated face index exceeds the total
      number of  aces for all the meshes, no ray is shot.
  
      The primary use for this summing method is convenience in generation of
      the meshes, as some modellers slow down to an irritating extent with
      very large meshes; using distribution #1 allows these to be split up.
  
    distribution #2:
      Distribution method 2 is a horizontal array of sub-cameras, one per mesh 
      (i.e. like method #0, it does not sum meshes). The image is divided 
      horizontally into #num_meshes blocks, with the first mesh listed being the 
      left-most camera, and the last being the right-most. The most obvious use 
      of this would be with two meshes to generate a stereo camera arrangement.
  
      In this mode, you can (currently) only have a single ray per pixel.
  
    distribution #3:
      This method will reverse-map the face from the UV co-ordinates. Currently,
      only a single ray per pixel is supported, however, unlike the preceding
      methods, standard AA and jitter will work. This method is particularly
      useful for texture baking and resolution-independant mesh cameras, but
      requires that the mesh have a UV map supplied with it.
  
      You can use the smooth modifier to allow interpolation of the normals at 
      the vertices. This allows for use of UV mapped meshes as cameras with the 
      benefit of not being resolution dependant, unlike the other distributions.
      The interpolation is identical to that used for smooth_triangles.
  
      NB if used for texture baking, the generated image may have visible seams
      when applied back to the mesh. This can be mitigated; see Jaime Vives
      Piqueres sample scripts. Also, depending on the way the original UV map
      was set up, using AA may produce incorrect pixels on the outside edge of
      the generated maps.
  
  mesh_object:
    One or more mesh or mesh2 objects to be used for the camera. These will be
    treated differently depending on the distribution method, as explained above.
    Transformations on the meshes can be used here, and will reflect on the
    resulting image as it would be expected for a regular camera.
  
  location:
    On this special camera, location doesn't affect where the camera is placed
    per se (that information is on the mesh object itself), but is used to
    move the origin of the ray off the face, along the normal of that face.
    This would typically be done for texture baking or illumination
    calculation scenes where the camera mesh is also instantiated into the
    scene (usually only a tiny amount of displacement is needed).

    The X and Y for location is not currently used, and the Z always refers
    to the normal of the face, rather than the real Z direction in the scene.

  direction:
    Like location, this doesn't correspond to the real direction vector of the
    camera. It serves only to reverse the normal of all the faces, if
    necessary. If the Z component is less than -EPSILON, then the rays will be
    shot in the opposite direction than they would otherwise have been.
    X and Y are not used.

  Potential uses of the mesh camera include:

    o Calculation of illumination on a surface represented by a mesh.
      This was the first use of the mesh camera; a NASA JPL project
      wished to calculated watts/m2 of illumination across a portion
      of the moon's surface, for which they had a detailed grid and
      hence were able to create a mesh.
  
    o Texture baking (creation of an image suitable to be used as a UV
      map). Given a mesh with UV co-ordinates defined, POV-Ray can generate
      an image that can be later used in either POV itself or any modelling
      application that can load UV-mapped textures. This means that any of
      POV-Ray's native textures may be baked to a map (however note that
      use of transparency on objects will give a confusing result).
  
    o Any arbitrary camera shape, including all existing POV-Ray cameras
      (though of course there is little point in replicating an existing
      camera).
  
    o Precise modeling of optical aberrations in lenses (presuming data is
      available to generate a mesh that follows the aberrations). It may
      also be possible to model a lens that reverses such abberations if
      the scene being rendered has an image map containing an image taken
      through the lens.
  
    o Modeling optical devices that employ filters, such as camera CCD's
      (by having a mesh that defines R, G and B image sensor elements and
      the color filters that are typically overlayed on them).
  
    o Any effect that could be achieved by shooting multiple rays for a
      single pixel from different locations (or in different directions)
      and averaging the results.
  
    o Simulation of compound eyes such as those of insects.
  
    o Certain types of animation (where only the camera moves), using
      distribution #2 and a post-processor to split the output image.
      This can be useful for scenes that take a very long time to parse
      compared to the time taken to render (which can be an impediment
      if using the traditional POV clock-based loop).
  
    o If a means of limiting the maximum ray length is added, then a mesh
      camera could be used to probe a scene to generate voxel or slice data
      (the latter is useful for generating STL data for 3d printers).
  
  Examples (placement macros not included for brevity):
  
  // Stereo camera:
  
  camera {
    mesh_camera {
      1 2 
      mesh {
        camera_mesh
        meshcam_placement(c_location_left,c_look_at)
      }
      mesh {
        camera_mesh
        meshcam_placement(c_location_right,c_look_at)
      }
    }
    location <0,0,-.01>
  }
  
  // Texture baking:
  
  camera {
    mesh_camera {
      1 3
      mesh2 {vase1}
      mesh2 {vase1}
      mesh2 {vase1}
    }
    location <0, 0, -0.01>
    direction <0, 0, 1>
  }

Change 5125 on 2010/08/30 by clipka@cli-pc-xp64

  Fix for a few Linux compiler warnings

Change 5124 on 2010/08/30 by clipka@cli-pc-xp64

  Fix for some Microsoft-isms and other flaws introduced with changes #5109
  and #5111.

Change 5123 on 2010/08/30 by chrisc@x8

  a few misc changes/fixes, including support (not enabled) for ASCII PPM
  output [handy for text processing of output image during testing].

Change 5119 on 2010/08/30 by chrisc@x8

  fix for use of templated version of min().

Change 5116 on 2010/08/29 by clipka@cli-pc-xp64

  fixed a bug in radiosity introduced with change #5112 that could cause
  samples to be re-used too far away

Change 5115 on 2010/08/29 by clipka@cli-pc-xp64

  Added support for focal blur with user-defined bokeh, using the
  following syntax:

      camera {
        // ... focal blur camera...
        bokeh {
          pigment { ... }
        }
      }
  
  If bokeh is specified, focal blur will use a custom sampling sequence based
  on the specified pigment's brightness in the range <0,0,0> to <1,1,0>, i.e.
  the unit square in the XY plane.

Change 5114 on 2010/08/29 by clipka@cli-pc-xp64

  Parser failed to eat away the parameter value after the obsolete
  "max_intersections" keyword, causing it to crash instead of gracefully
  ignoring it with a warning; fixed.

Change 5113 on 2010/08/29 by clipka@cli-pc-xp64

  fixed some dormant photons code that, according to code inspection, was
  broken with radiosity change #4761

Change 5112 on 2010/08/28 by clipka@cli-pc-xp64

  Radiosity improvements:

  - Removed the max 1600 count limit; if the count exceeds 1600, POV-Ray will
    now use a Halton sequence instead of the built-in sequence.

  - POV-Ray can now draw sample directions in a round-robin fashion from a
    larger pool, so that different samples can use different sets of sample
    directions, leveraging the benefit of the nearest_count mechanism.
    For this purpose, the count keyword syntax has been changed:

      count RAYS_PER_SAMPLE [, DIRECTION_POOL_SIZE ]

  - Added importance sampling to radiosity; full ray computations are
    performed only for a certain portion of sample rays, depending on the
    importance of the first object each ray encounters. Importance can be
    assigned on a per-object basis using the followng syntax (using a sphere
    as an example):

      sphere { ... radiosity { importance IMPORTANCE } }

    where IMPORTANCE is a value in the range from >0.0 to <=1.0 specifying the
    percentage of rays to actually compute on average. A particular ray will
    only be fully computed if it is within the first COUNT*IMPORTANCE rays of
    the sampling sequence; due to the low-discrepancy sub-random nature of the
    sequence, this is mostly equivalent to a per-ray weighted random choice,
    while maintaining a low-discrepancy uniform distribution on a per-object
    basis. Rays actually computed are weighted to compensate for those
    not computed.

    Objects derived from previously defined objects will default to the
    "inherited" importance. CSG components without an explicit importance will
    default to their parent object's importance. Other objects normally
    default to an importance of 1.0, but this can be changed in a
    default {} block:

      default { radiosity { importance DEFAULT_IMPORTANCE } }

    NOTE: The "radiosity on|off" feature for objects (specifying whether an
    object shall receive radiosity illumination) is currently NOT available.
    Depending on user feedback, it will be substituted with some keyword
    within the object-specific radiosity{} block, or dropped completely.

  - Some more minor modifications.

Change 5111 on 2010/08/28 by clipka@cli-pc-xp64

  Improved focal blur:

  - Modified code to generate extra samples in a circular rather than square
    pattern when blur_samples is not 4, 7, 19 or 37, leading to a circular
    rather than square bokeh.

  - Modified the code that re-placed an extra sample if it would be close to
    another one, in order to get rid of the lower-right bias the old
    code produced.

  - Extra samples are now generated from a halton sequence rather than a
    random stream.

  - Modified blur_samples syntax to optionally specify a minimum number of
    samples to be taken before testing against confidence/variance settings
    (default is 4 if blur_samples maximum is <7, otherwise 7), to provide a
    means to get rid of stray non-blurred pixels. The new syntax is:

      blur_samples [ MIN_SAMPLES, ] MAX_SAMPLES

  - Eliminated the VEC2 type in favor of Vector2d.

  - Simplified a few statements and did a bit of cleanup.

Change 5110 on 2010/08/28 by clipka@cli-pc-xp64

  SSLT improvements:

  - Fixed a bug in SSLT code that caused the single-scattering
    term to be ignored.

  - Using halton sequence instead of random generator for picking sampling
    directions, to reduce visible patterns in noise.

Change 5109 on 2010/08/28 by clipka@cli-pc-xp64

  Introduced new framework for internal random number generators, intended for
  reducing the memory footprint (by sharing precomputed values among
  generators with identical parameters) as well as easier replacement of
  implementations.

Change 5106 on 2010/08/27 by clipka@cli-pc-xp64

  minor code simplification in aoi pattern

Change 5105 on 2010/08/26 by jholsenback@jholsenback_aries

  changed Output_File_Type to type "n"  reference FS#155

Change 5102 on 2010/08/21 by clipka@cli-pc-xp64

  changed radiosity defaults to "always_sample off" and "recursion_limit 2"

Change 5099 on 2010/08/14 by jholsenback@jholsenback_aries

  corrected 1 pixel error in mosaic preview see FS#114

Change 5097 on 2010/08/08 by clipka@cli-pc-xp64

  fix for FS#162 "Character 101 (0x65) not found in /usr/share/fonts/truetype/freefont/FreeSans.ttf"

Change 5096 on 2010/08/08 by chrisc@cc-ubuntu-test

  Installer changes suggested in article <web.4c558a54f4269f7c380f8080@news.povray.org>

Change 5089 on 2010/08/05 by clipka@cli-pc-xp64

  fixed a preprocessor definition in Win32-SSE2 console project

Change 5086 on 2010/08/04 by clipka@cli-pc-xp64

  removed duplicate references to Windows system libraries

Change 5084 on 2010/07/26 by chrisc@cc-ubuntu-test

  Remove soft expiration from unixconsole.cpp.

Change 5081 on 2010/07/24 by jholsenback@jholsenback_aries

  fix parse warnings reported in FS#157

Change 5074 on 2010/07/23 by chrisc@x8

  fix name of editor DLL when building SSE2 binary.
  enable editor DLL build by default in solution.

Change 5071 on 2010/07/21 by clipka@cli-pc-xp64

  fixed bug FS#158 in render options output code, causing a wrong value to be
  reported for antialiasing gamma

Change 5059 on 2010/07/01 by chrisc@x8

  shellout fix.

--------------------------------------------
Changes between 3.7.beta.37 and 3.7.beta.38
--------------------------------------------

Change 5053 on 2010/07/01 by chrisc@x8

  fix error in windows version expiry test.

Change 5046 on 2010/06/29 by clipka@cli-pc-xp64

  modified code to avoid even more deprecation warnings with libpng 1.4;
  NEEDS TESTING with both 1.2 and 1.4!

Change 5045 on 2010/06/29 by jholsenback@jholsenback_aries

  properly allow for libpng 1.25 AND 1.4.3

Change 5044 on 2010/06/29 by jholsenback@jholsenback_aries

  Rollback //depot/povray/smp/unix/configure.ac to revision 41

Change 5043 on 2010/06/29 by clipka@cli-pc-xp64

  modified code to avoid deprecation warnings with libpng 1.4;
  NEEDS TESTING with both 1.2 and 1.4!

Change 5040 on 2010/06/28 by jholsenback@jholsenback_aries

  sample scene vector typo corrections FS#110

Change 5039 on 2010/06/28 by jholsenback@jholsenback_aries

  configure updates for libpng 1.4 you MAY want to defer this until
  change #5031 is completed.

Change 5036 on 2010/06/26 by clipka@cli-pc-xp64

  Added support for using the sRGB transfer function for output file gamma; 
  syntax is "File_Gamma=sRGB". ("SRGB" and "srgb" are supported as well.)
  
  Note: When "File_Gamma=sRGB" is used with PNG output file format, POV-Ray 
  writes an sRGB chunk, thereby claiming that the output conforms to the sRGB 
  color space; however, this claim is not necessarily true, as POV-Ray is 
  currently not color space aware; it depends on whether your scene input data 
  conforms to the sRGB color space.
  
  Note: The other gamma INI file parameters (Antialias_Gamma and DisplayGamma) 
  do NOT support the "sRGB" value at present.

Change 5033 on 2010/06/25 by clipka@cli-pc-xp64

  Changes regarding alpha handling, plus some cleanup:
  
  - Added "premultiplied BOOL" parameter to input image file syntax; like the 
    "gamma"/"file_gamma" parameter, it must immediately follow the filename 
    (though the order of "gamma"/"file_gamma" and "premultiplied" does not 
    matter). The boolean parameter specifies whether the file is stored in 
    premultiplied ("associated") or non-premultiplied ("straight") alpha format, 
    overriding the file format specific default. (This keyword has no effect on 
    files without an alpha channel.)
  
  - Prepared code for adding an INI-file parameter to override file format 
    specific alpha mode (premultiplied vs. non-premultiplied) for output files.
  
  - Cleaned up the lists of reserved words in reswords.cpp and reswords.h.

Change 5031 on 2010/06/23 by clipka@cli-pc-xp64

  Various changes related to PNG files:

  - modified png.cpp to be ready for libpng 1.4 (Needs Testing!)
  
  - fixed flaw in PNG input file gamma handling that caused unnecessary loss of 
    precision
  
  - fixed bug in change #4979 that screwed up image file input under certain 
    conditions (most particularly PNG files)

Change 5029 on 2010/06/21 by clipka@cli-pc-xp64

  Fixed uv mapping for bezier spline lathe.

Change 5028 on 2010/06/21 by clipka@cli-pc-xp64

  Minor change to radiosity adaptive pretrace code.

Change 5026 on 2010/06/20 by clipka@cli-pc-xp64

  Modified radiosity pretrace mechanism:
  
  - POV-Ray will now create only one set of threads for the whole pretrace, 
    instead of one set for each pretrace step; likewise, progress report will 
    pertain to the whole pretrace rather than each step; POV-Ray will no longer 
    wait for a pretrace step to be fully completed, and instead assign threads to 
    the next step as soon as all blocks of the previous step are either finished 
    or already assigned.
  
  - Implemented adaptive pretrace. When a second parameter is specified after 
    the "nearest_count" keyword, pretrace will stop re-iterating over areas 
    where, on average, that many (average-quality) samples are already present 
    per ray.
  
  - Refactored some related code.

Change 5025 on 2010/06/20 by thorsten@host26

  Adds "#declare atand = function (x) {degrees(atan(x))} " to "math.inc"

Change 5022 on 2010/06/19 by clipka@cli-pc-xp64

  fix for metallic phong highlights which were broken by change #4962

Change 5021 on 2010/06/18 by clipka@cli-pc-xp64

  added #elseif statement; the #if, #ifdef and #ifndef directives syntax is 
  changed as follows:
  
    IF_DIRECTIVE:
      #if ( Cond ) TOKENS... [ELSE_DIRECTIVE] #end
    IFDEF_DIRECTIVE:
      #ifdef ( IDENTIFIER ) TOKENS... [ELSE_DIRECTIVE] #end
    IFNDEF_DIRECTIVE:
      #ifndef ( IDENTIFIER ) TOKENS... [ELSE_DIRECTIVE] #end
  
    ELSE_DIRECTIVE:
      #else TOKENS... |
      #elseif ( Cond ) TOKENS... [ELSE_DIRECTIVE]
  
  Example:
  
    #if (Foo)
      #debug "Foo is true\n"
    #elseif (Bar)
      #debug "Foo is false, but Bar is true\n"
    #else
      #debug "Foo and Bar are both false\n"
    #end

Change 5010 on 2010/06/05 by chrisc@x8

  fix issue with windows insert menu preview loading of BMP's that contained DPI
  information, and expand number of available insert menu ID's to about 9000.

Change 5009 on 2010/06/05 by chrisc@x8

  avoid pulling in all of the std and boost namespaces in many places in favor 
  of some more specific uses. NB requires changes to platform header files, 
  already done for unix version, the mac port can clone the changes from the 
  windows syspovconfig.h.

Change 5004 on 2010/06/01 by clipka@cli-pc-xp64

  Added "emission" parameter to the finish block; syntax and effect are 
  virtually identicall to "ambient", except that "emission" is unaffected by 
  the global "ambient_light" parameter, which will now effectively be set to 0 
  if radiosity is active (except in legacy scenes having #version set to < 
  3.70). The intention is to simplify the use of materials designed for 
  non-radiosity scenes in scenes with radiosity, or the design of scenes that 
  can be rendered with or without radiosity.

Change 5003 on 2010/05/29 by chrisc@x8

  round out core shellout support for the time being.
  TODO: add support to simplefrontend.h.

Change 5001 on 2010/05/28 by chrisc@x8

  add special handling for INI lines that are shell-out commands.

Change 5000 on 2010/05/27 by jholsenback@jholsenback_aries

  eliminate dependancy on colors.inc in distro file.

Change 4999 on 2010/05/26 by chrisc@x8

  re-implement support for shellouts (WIP, INCOMPLETE).

Change 4998 on 2010/05/26 by chrisc@x8

  windows editor tab/indent settings are no longer per-file+global default; 
  changes affect all opened files.

Change 4997 on 2010/05/26 by chrisc@x8

  add display of filename on tab hover in windows editor, and add right-click 
  menu to tabs allowing opening of folder in explorer and copy of filename to 
  clipboard.

Change 4996 on 2010/05/25 by chrisc@x8

  windows: increase maximum number of insert menu sections to 8192, and ensure 
  that if no INI file exists, a default one that includes the insert menu for 
  output is made.

Change 4995 on 2010/05/25 by chrisc@x8

  add support for loading of JPG and PNG files as windows insert menu hints.

Change 4994 on 2010/05/24 by jholsenback@jholsenback_aries

  removed outdated information and corrected typos from some distro files.

Change 4993 on 2010/05/22 by clipka@cli-pc-xp64

  changed input file gamma syntax for individual files; as an alternative to 
  the "file_gamma" keyword, the parser will now also accept the "gamma" keyword 
  originally introduced for specifying gamma in color values. (To specify the 
  default input file gamma in the global_settings section, "file_gamma" is 
  still mandatory though, as "gamma" would be ambiguous and misleading.)

Change 4992 on 2010/05/22 by clipka@cli-pc-xp64

  fix FS#116 "assertion fails when using 'filter all' with small-palette images"

Change 4991 on 2010/05/21 by clipka@cli-pc-xp64

  Changed antialiasing to compare gamma-adjusted colours instead of linear 
  colours, to improve antialiasing of darker regions.
  
  Note that this gamma-adjustment is only applied to copies of the sample 
  values, and does not affect averaging of the sample values, which is still 
  performed on the original linear data. It is also independent of both preview 
  display and output file gamma.
  
  The antialiasing gamma-adjustment is controlled by the new ini-file / 
  command-line options "Antialias_Gamma=x" and "+AGx" respectively, defaulting 
  to 2.5. Note that this differs from Display_Gamma and File_Gamma defaults, as 
  it is intended to fit human vision rather than typical CRT characteristics. 
  Nevertheless, the value specified is once again the inverse of the gamma 
  actually applied, in order to use the more familiar value range.

Change 4990 on 2010/05/21 by clipka@cli-pc-xp64

  fix FS#114 "Mosaic Preview not displaying properly" for unix systems.

Change 4987 on 2010/05/20 by clipka@cli-pc-xp64

  Fixed a bug introduced with change #4979 that caused semi-transparent objects 
  visible against a default background to be displayed wrong in the preview 
  window when alpha output was off. (File output was unaffected though.)

Change 4986 on 2010/05/20 by clipka@cli-pc-xp64

  Added "gamma" keyword to specify gamma pre-corrected colours.
  
  The colour syntax is extended as follows:
  
    COLOR_BODY:
      COLOR_VECTOR [GAMMA] |
      COLOR_KEYWORD_GROUP |
      COLOR_IDENTIFIER [GAMMA]
    ...
    COLOR_KEYWORD_ITEM:
      COLOR_IDENTIFIER       |
      red Red_Amount         |
      blue Blue_Amount       |
      green Green_Amount     |
      filter Filter_Amount   |
      transmit Transmit_Amount |
      GAMMA
    GAMMA:
      gamma Gamma_Value |
      gamma srgb
  
  Specifying "gamma Gamma_Value" indicates that the colour components are 
  gamma-precorrected for a display gamma of Gamma_Value, instructing POV-Ray to 
  automatically convert the colour components to linear values using the 
  following formula:
  
    Effective_Red_Amount      = pow ( Red_Amount,   Gamma_Value )
    Effective_Green_Amount    = pow ( Green_Amount, Gamma_Value )
    Effective_Blue_Amount     = pow ( Blue_Amount,  Gamma_Value )
    Effective_Filter_Amount   = Filter_Amount
    Effective_Transmit_Amount = Transmit_Amount
  
  Likewise, specifying "gamma srgb" indicates that the colour components are 
  gamma-precorrected using the sRGB transfer function (being roughly, but not 
  quite, equivalent to a Gamma_Value of 2.2).
  
  Note that gamma is NOT an additional component, but rather modifies the 
  interpretation of the other colour keywords. For instance, the following 
  statements are all fully equivalent:
  
    #declare Foo = colour rgbt <0.2, 0.3, 0.4, 0.5> gamma 2;
    #declare Foo = colour rgbt <0.04,0.09,0.16,0.50>;
    #local Fnord = colour rgbt <0.2, 0.3, 0.4, 0.5>; #declare Foo = colour Fnord gamma 2;
  
  Also note that specifying gamma does not affect the filter or transmit components.

Change 4984 on 2010/05/16 by clipka@cli-pc-xp64

  more changes to input image transparency handling:
  
  - For material_map, /no/ alpha premultiplication handling is done whatsoever; 
    instead, the data as stored in the file is used.

  - For bump_map and image_pattern, images with alpha channel are treated as if 
    they had a black background (unless the alpha channel itself is used).

Change 4983 on 2010/05/14 by clipka@cli-pc-xp64

  fix FS#113 "Multi-layered reflections broken"

Change 4982 on 2010/05/14 by clipka@cli-pc-xp64

  Added comments & fixed a few flaws in the GammaCurve class

Change 4979 on 2010/05/13 by clipka@cli-pc-xp64

  Changed alpha handling for image file in- and output:
  
  * Previous versions of POV-Ray always expected straight (non-premultiplied) 
    alpha for file input, while always writing associated (premultiplied) alpha 
    for output; this has been changed on a per-file-format basis to use the same 
    alpha handling mode for in- and output alike:

    - PNG will use straight alpha as per specification;
  
    - OpenEXR and TIFF will use associated alpha as per specifications;
  
    - TGA and BMP 32-bit RGBA (an inofficial extension to BMP) will use 
      straight alpha, retaining file input compatibility for now, until a final 
      decision has been made on these formats.
  
  * When generating non-premultiplied alpha output to a classic 
    low-dynamic-range file format (e.g. PNG), transparency of particularly bright 
    areas will now be reduced, in order to better preserve highlights on 
    transparent objects. (Note that this mechanism has some limitations with 
    colored highlights.)
  
  * When used with file formats for which alpha output is currently not 
    supported by POV-Ray (or only via an inofficial extension, as with BMP), 
    turning on alpha output via Output_Alpha=on or +UA will now generate a 
    warning.
  
  * Fixed various bugs in image.cpp found during code inspection.

Change 4977 on 2010/05/10 by clipka@cli-pc-xp64

  fix FS#111 "Remove_Bounds=off / -UR does not work properly"

Change 4976 on 2010/05/10 by clipka@cli-pc-xp64

  Fixed FS#112 "OpenEXR alpha is only written when it shouldn't be"

Change 4975 on 2010/05/10 by clipka@cli-pc-xp64

  Changes to sky_sphere handling:
  
  - Using filter in a sky_sphere with layered pigments now has the same effect 
    as in a large sphere with a multi-layered texture. (For compatibility with 
    legacy scenes, specifying a #version < 3.70 will revert to the old, poorly 
    specified behavior.)
  
  - Using Output_Alpha=on with legacy scenes (#version < 3.70) will now 
    suppress sky spheres and background except in reflections, for backward 
    compatibility with v3.6.

Change 4972 on 2010/05/09 by clipka@cli-pc-xp64

  Parser now checks for plausible relation between radiosity minimum_reuse and maximum_reuse:

  - If ony one value is specified, parser will warn if minimum_reuse > maximum_reuse/2,
    and adjust the unspecified value accordingly.
  
  - If both values are specified, parser will warn if minimum_reuse > maximum_reuse/2,
    but not modify any of the values; if minimum_reuse >= maximum_reuse; the parser will
    raise an error.

Change 4971 on 2010/05/08 by clipka@cli-pc-xp64

  Replaced virtually all occurrences of Colour type with RGBColour, using 
  separate filter and/or transmit variables/parameters where needed, to get a 
  clearer picture of where these values are actually used and processed, and 
  where they were just plain ballast.
  
  Consolidated a few duplicate constants.
  
  Changed effect of filter in a layered-pigment sky_sphere to match the 
  behavior of a corresponding layered-texture large regular sphere. (The old 
  behavior, though probably having been unintentional, is automatically 
  re-activated for backward compatibility when #version < 3.7 is specified.)
  
  Partial fix for broken alpha channel output; v3.6 behavior is now reproduced 
  exactly (including bugs), regardless of version. Further changes will address 
  the premultiplied-alpha issue (which was already handled wrong in 3.6) and 
  possibly add options for use cases where v3.6 behavior might be undesired.

Change 4969 on 2010/05/06 by chrisc@x8

  Fix crash reported in http://news.povray.org/4bd949b3@news.povray.org

Change 4968 on 2010/05/05 by chrisc@build

  beta 37a install scripts.

Change 4967 on 2010/05/05 by chrisc@x8

  change version to beta 37a.

Change 4965 on 2010/05/03 by clipka@cli-pc-xp64

  fixed an issue with SSLT that could cause rendering threads to hang

Change 4964 on 2010/05/02 by clipka@cli-pc-xp64

  fix for FS#107 "Failed to parse INI file, over network"

Change 4963 on 2010/05/02 by clipka@cli-pc-xp64

  follow-up to change #4962 to suppress excessive parse warnings about ignored 
  filter & transmit components

Change 4962 on 2010/05/02 by clipka@cli-pc-xp64

  Yet more code refactoring:
  
  - replaced lots of COLOUR parameters & variables with Colour or RGBColour

  - replaced various Colour parameters & variables with RGBColour
  
  - replaced a few int parameters & variables with bool
  
  - declared several more parameters as const
  
  - removed a few obsolete parameters and pieces of code
  
  - refactored image interpolation for better performance and (hopefully) ease 
    of understanding
  
  - eliminated references to "ray.h" include file (except in ray.cpp)
  
  *PLUS*:

  - Implemented bicubic image interpolation as interpolation type 3

Change 4961 on 2010/04/28 by clipka@cli-pc-xp64

  various output file type-related changes:

  - When specifying an input image in SDL without a file type (neither via type 
    keyword nor via extension), parser would not fall back to system default 
    (broken since change #4932); fixed.
  
  - When specifying an IFF input image in SDL, POV-Ray would instead attempt to 
    read it as a TIFF file; should be fixed (not that anybody would probably care 
    these days...).
  
  - Some code pertaining to histogram output was not updated with change #4932; 
    fixed. (no symptoms there, as histogram output is presently out of order 
    anyway)
  
  - Some code pertaining to logging of output settings was not updated with 
    change #4932; fixed. (no symptoms there either, as logging of output settings 
    is presently out of order as well)
  
  - Validity check for Grayscale_Output setting was broken with change #4932; fixed.
  
  - Changed default output file format for Windows version to PNG (note that 
    "sys" format still remains mapped to BMP)

  - Unix config was not updated properly with changes #4932 and #4948; fixed.
  
  - Some minor code refactoring pertaining to the #4932 changes.

Change 4958 on 2010/04/28 by clipka@cli-pc-xp64

  fix for FS#104 "Output file gamma broken for File_Gamma=1.0"

Change 4957 on 2010/04/28 by clipka@cli-pc-xp64

  disabled chroma sub-sampling in JPEG output; reduced default quality setting 
  from 95% to 85% to retain same overall quality & file size.

Change 4956 on 2010/04/27 by clipka@cli-pc-xp64

  fix FS#103 "JPEG output does not conform to baseline JFIF standard"

Change 4955 on 2010/04/26 by clipka@cli-pc-xp64

  Changed a wagonload of function parameters to const, plus some other minor 
  code refactoring

Change 4953 on 2010/04/24 by chrisc@build

  update install scripts for beta 37.

Change 4951 on 2010/04/24 by chrisc@x8

  Update changes.txt/revision.txt.

Change 4949 on 2010/04/24 by chrisc@x8

  bump version to beta 37.

--------------------------------------------
Changes between 3.7.beta.35 and 3.7.beta.37
--------------------------------------------

Change 4948 on 2010/04/24 by chrisc@x8

  fix issue where parse fails if output file type not specified (see change #4932).

Change 4947 on 2010/04/22 by clipka@cli-pc-xp64

  preliminary workaround for FS#81 "sphere_sweep generating artifacts"

Change 4946 on 2010/04/21 by clipka@cli-pc-xp64

  partial fix for FS#102 "#switch directive parsing problem": POV-Ray will now 
  complain if the first #case or #range after a #switch is missing the hash 
  sign ("#")

Change 4944 on 2010/04/19 by clipka@cli-pc-xp64

  fix for FS#92 "Sphere_Sweep Bug": Modified quadratic polynom solver to 
  "normalize" polynoms first before checking for optimizations, to prevent 
  problems when all coefficients are small

Change 4943 on 2010/04/19 by clipka@cli-pc-xp64

  fixed FS#100 "cutaway_textures"; removed some obsolete code along the way

Change 4942 on 2010/04/18 by clipka@cli-pc-xp64

  modified #break semantics; the #break directive can now be used...:
    - anywhere within a #case or #range block, to skip to the end of the 
      #switch directive (previously, #break was only useful right before the next 
      #case, #range or #else directive, to indicate that a slip-through was not 
      desired);

    - anywhere within a loop block (both #while and #for), to preliminarily 
      terminate the loop; and

    - anywhere within a #macro block, to preliminarily terminate the macro.
  
  Example for the use in a loop:
  
    #local R = seed(4711);
    #for (I, 1, 100)
      #if (rand(R) < I/1000)
        #break // terminate loop early
      #end
      #debug concat(str(I,0,0), " iterations and counting\n")
    #end
  
  Where multiple #switch, loop and/or #macro blocks are nested, #break will 
  leave only the innermost of these.

Change 4941 on 2010/04/16 by clipka@cli-pc-xp64

  implement FS#84 "A for-loop construct":
  
    #for (Identifier, Start, End [, Step])
      //...
    #end
  
  is now available for simple loops incrementing Identifier from Start to End 
  (inclusive) with the given Step size (default: +1.0). Basically, it works the 
  same as the classic #while pattern:
  
    #local Identifier = Start;
    #while (Identifier <= End)
      //...
      #local Identifier = Identifier + Step;
    #end
  
  Some additional notes:
    - If Step is negative, comparison will be automatically adjusted to match a 
      "countdown" pattern.

    - Start, End and Step are evaluated only *once*.
  
    - The loop counter is a full-fledged local variable. Any local variable of 
      the same name already defined before the loop *will* be overwritten without 
      warning (note that in the main scene file, all local variables outside of 
      macros are effectively global); inside the loop, any tampering with the 
      variable is possible for effect, as long as it is defined as a local numeric 
      variable at the end of each iteration.
  
    - After the loop has terminated, the variable will remain defined, typically 
      holding the value End+Step.
  
    - The loop counter must *not* be an array element.

Change 4940 on 2010/04/15 by clipka@cli-pc-xp64

  fixed FS#97 "Forward-slash pathnames not fully supported in Windows version", plus:
  
  - some code refactoring pertaining to path handling
  
  - fixed FS#83 "redundant code in pvengine.cpp" (removed apparently duplicate 
    code from pvengine.cpp handler for KEYWORD_LOOKUP_MESSAGE)

Change 4939 on 2010/04/14 by clipka@cli-pc-xp64

  some photons changes:
  
    * Partially fixed FS#93 "Photons are unnaturally amplified by pass_through objects"
  
      NOTE: As the error is also present in POV-Ray 3.6, behavior has necessarily 
      changed with this fix; pass_through objects will now affect the color of 
      photons on their way to their target, according to pigment filter/transmit, 
      interior fade, and media (which implies that opaque objects will block 
      photons even when declared pass_through); it needs to be seen whether this 
      new behavior will be accepted by the users, or whether some additional 
      mechanism will have to be implemented to choose between old and new 
      behavior for compatibility with legacy scenes. At present, behavior can 
      only be changed at compile time with the preprocessor defines PT_FILTER_BEFORE_TARGET
      and PT_AMPLIFY_BUG in photons.cpp.
  
  * Fixed FS#95 "Photons are over-attenuated by semi-transparent surfaces"
  
  * Some minor code refactoring & comment changes in photons-related code

Change 4938 on 2010/04/12 by clipka@cli-pc-xp64

  fix FS#94 "Unexpected refraction angle in interfaces with changing IOR <> 1.0"

Change 4937 on 2010/04/02 by clipka@cli-pc-xp64

  Cosmetic Code & Comment Changes

Change 4936 on 2010/04/02 by clipka@cli-pc-xp64

  Radiosity code changed:
  
    - When a new sample has been gathered after sample lookup returned 
      insufficient samples, sample lookup is no longer run again; instead, the new 
      sample is interpolated with the results of the earlier lookup.
  
    - The actual number of samples required to satisfy the reuse_count setting is 
      now influenced by sample quality, with high-quality samples reducing the 
      effective number of samples required (down to 1/4 of the parameter value in 
      extreme cases) and low-quality samples increasing the number. Note that this 
      may change the balance between speed and quality for some scenes.
  
    - Fixed some bugs & flawed comments found during code inspection.

Change 4935 on 2010/03/28 by clipka@cli-pc-xp64

  - Implemented AOI pattern (thanks to Grimbert Jerome for most of the code); 
    the syntax is as follows:
  
      pigment { aoi pigment_map { ... } }
      normal { aoi normal_map { ... } }
      texture { aoi texture_map { ... } }
  
    The pattern gives a value proportional to the angle between the ray and the 
    surface; for consistency with the slope pattern, values range from 0.5 where 
    ray is tangent to the suftace, to 1.0 where perpendicular; in practice, 
    values below 0.5 may occur in conjunction with smooth triangles or meshes.
  
    (Note that this differs from the current MegaPOV implementation, where the values
    range from 0.5 down to 0.0 instead.)
  
  - Extended slope pattern to specify a reference point instead of a direction; 
    the new syntax is as follows:
  
      slope { point_at <ReferencePoint> [, Lo_Slope, Hi_Slope] }
  
    (Note that this variant currently does *not* allow for the "altitude" keyword to be used.)
  
    The functionality is similar to MegaPOV's "aoi <ReferencePoint>" pattern, 
    except that the values are reversed, i.e. range from 0.0 for surfaces 
    facing away from the point in question, to 1.0 for surfaces facing towards 
    that point; thus, "slope { <Vector> }" and "slope { point_at 
    <Vector>*VeryLargeNumber }" have virtually the same effect.
  
  - Fixed FS#90 "POV-Ray accepts additional patterns after "slope""
  
  - Various purely cosmetic code changes (comments and formatting) to photons.cpp

Change 4934 on 2010/03/26 by clipka@cli-pc-xp64

  fix for FS#78 "Wrong rendering of BeamTest-Scene in 3.7.beta.35a"

Change 4933 on 2010/03/26 by clipka@cli-pc-xp64

  fix for FS#67 "alpha channel in image map is ignored for shadows"

Change 4932 on 2010/03/26 by clipka@cli-pc-xp64

  Various changes to image file output:
  
  Code refactoring:
  
  - Image file output now uses the GammaCurve mechanism already in use for 
    image file input, to allow for arbitrary transfer functions (e.g. as used by 
    sRGB) in the future.

  - Output/histogram file type is now identified by the command line / INI 
    options parser, removing some uglies from the code and allowing for easier 
    maintenance of file type letters.
  
  Fixes:
  
    - Fixed FS#88 "File output code does not properly handle negative color values"

    - Fixed FS#89 "PPM output garbled for bit depths other than 8 bits"

    - Fixed a benign coding flaw in HDR image input code (wrong parameter type in function prototype)

    - Fixed file type names in some error messages
  
  Changes:
  
    - Radiance HDR image output no longer writes the proprietary GAMMA header 
      field.
  
    - PPM image output now supports 16-bit greyscale output (effectively 
      writing a PGM file instead), to be activated via the "Greyscale_Output=on" 
      option or the "+FPg" file type switch.

Change 4930 on 2010/03/15 by chrisc@x8

  Add manual update check menu item for Windows UI.

Change 4929 on 2010/03/14 by calimet@lavender

  Unix beta.35a config: require boost >= 1.37 and (for now) libpng < 1.4

Change 4928 on 2010/03/13 by chrisc@x8

  update for beta 36, add hard expiry and remove standard timeout from windows version.
  activate update checks in windows version.

Change 4927 on 2010/02/11 by clipka@cli-pc-xp64

  Minor radiosity changes:
  
    - maximum_reuse parameter now governs the maximum effective radius of a 
      sample more directly.

    - Removed obsolete code.

    - Trimmed down radiosity sample memory footprint a bit.

    - Improved robustness of code

    - Improved pretrace "pixel" coordinates computation

    - Eliminated some "magic numbers"

Change 4926 on 2010/02/08 by chrisc@x8

  Fix to changes.txt/revision.txt.

Change 4925 on 2010/02/08 by chrisc@x8

  Update about.bmp for windows source dist.

Change 4924 on 2010/02/08 by chrisc@x8

  Update windows source dist.

Change 4915 on 2010/01/11 by chrisc@x8

  Fix cone axis bug
  Fix crash caused by PossibleError function being called with invalid first parameter.
  Change version to beta 35a.

-------------------------------------------
Changes between 3.7.beta.34 and 3.7.beta.35
-------------------------------------------

Change 4906 on 2009/12/31 by chrisc@x8

  Fix FS#73 (Blend map cannot get 256 entries).
  
  Thanks to J\E9r\F4me Grimbert for the proposed fix.

Change 4905 on 2009/12/31 by chrisc@x8

  Fix FS#59 (Cone intersection test broken)
  
  Implement suggested fix from J\E9r\F4me Grimbert.
  NB this fix should be back-ported to 3.6.

Change 4904 on 2009/12/31 by chrisc@x8

  Fix FS#51 (POV-Ray crashes hard on missing parenthesis).
  
  The cause of this bug was a pointer to the include file input stream being 
  retained in the token structure after the stream was closed. The fix involves 
  comparing the token filehandle pointer to the input file pointer when it is 
  about to be closed, and setting it to NULL if this is the case. Additionally, 
  if the include file stack is popped, the token filehandle is set to the 
  handle of the enclosing file. This will result in any parse errors that occur 
  for the current token being reported as being in the enclosing file (assuming 
  that an error occurs before a new token is started). Typically this will be 
  just after the include or macro statement that opened the file.

Change 4903 on 2009/12/31 by chrisc@x8

  Set expiry to March 1 2010, bump version to beta 35.

Change 4902 on 2009/12/31 by chrisc@x8

  change hard-coded timeout to 2011.

Change 4900 on 2009/11/08 by clipka@cli-pc-xp64

  Proper fix for FS#32 "tiff file extention error" and other changes to file 
  extension handling:
  
  When trying to load a file of a certain type, the unchanged filename is now 
  tried first IF it ends in one of the default extensions for the type; 
  otherwise it is tested only after trying to append one of the defailt 
  extensions.
  
  When trying to infer a file type from the file name, all of the default 
  extensions are now compared against, instead of just the first (so that e.g. 
  "foo.jpeg" will now be identified as a jpep file name).
  
  Some additional code refactoring regarding file extension handling.

Change 4899 on 2009/11/08 by clipka@cli-pc-xp64

  Updated list of contributors (console only; bitmaps need to be updated accordingly)

Change 4898 on 2009/11/07 by clipka@cli-pc-xp64

  a few trivial changes

Change 4897 on 2009/11/07 by clipka@cli-pc-xp64

  Fix FS#53 "Blob trace level":
  
  Trace level increment is now performed on rays being reflected or refracted 
  at a surface, rather than on rays hitting a potentially refracting or 
  reflecting object, to do away with the need to figure out beforehand which 
  objects should increment the trace level and which shouldn't.
  
  Note that slight discrepancies with previous versions may occur regarding 
  maximum trace level statistics; e.g. a scene without any reflective or 
  refractive surfaces will report a maximum trace level of 1 instead of 0.
  
  Trace level for radiosity secondary rays will now be incremented according to 
  the same rules, instead of being incremented for every object surface they 
  encounter.
  
  Note that this change does not pertain to photons, the trace level of which 
  is still incremented at every object surface they encounter, including purely 
  transparent, non-refracting surfaces.

Change 4896 on 2009/10/25 by clipka@cli-pc-xp64

  Minor fix for change #4890: Gamma correction was not always forced on when 
  global file_gamma was used after assumed_gamma.

Change 4895 on 2009/10/25 by clipka@cli-pc-xp64

  Dispersion changes:
    - fixed FS#61 ("Dispersion does not give proper results")
    - improved results with low dispersion sample count
    - refactored code for future improvements

Change 4892 on 2009/10/01 by chrisc@cc-luggable

   GUIEXT updates from Hugo Arnaut.

Change 4890 on 2009/09/15 by clipka@cli-pc-xp64

  Improve input image file gamma handling.
  
  Input image files not carrying unambiguous gamma information will now be 
  assumed to match a common gamma setting, and gamma-adjusted accordingly; this 
  common input file gamma setting can be specified in the scene file using the 
  following syntax:
  
    global_settings {
        file_gamma GAMMA
    }
  
  where GAMMA is either a numeric expression specifying the approximate display 
  gamma for which input files are assumed to be gamma pre-corrected, or the 
  keyword 'srgb' indicating that input files are assumed to match the sRGB 
  standard. (In the latter case, gamma adjustment is applied according to the 
  sRGB standard, instead of approximating with a gamma 2.2 power-law function.) 
  The default setting is sRGB.
  
  Regardless of this global setting, gamma correction is not applied if the 
  image input file is obviously used as a mere data container, such as when 
  immediately used in a height field.
  
  FS#10 "Add support for specifying input images' gamma pre-correction":

  Default gamma handling rules for any image input file can be overridden by 
  specifying 'file_gamma GAMMA" immediately after the file name, e.g.:
  
    image_map {
        jpeg "foobar.jpg" file_gamma 1.8
        interpolate 2
    }
  
  This also applies to contexts where gamma adjustment is not normally applied, 
  e.g. file formats that are defined to be encoded linearly, or files used in 
  height fields, to simplify handling of files not conforming to standards.

    * Various bug fixes and minor improvements in input file reading code.
  
    * Added "out-of-the-box" transparency support for GIF files.
  
    * Added support for PNG sRGB chunks.
  
    * NOTE: Gamma handling for PNG input files has changed as follows in legacy ('#version 3.6') scenes:

  - In the absence of an 'assumed_gamma' statement, non-indexed PNG files with 
    a gAMA chunk (i.e. virtually all PNG files) will appear far brighter than 
    with POV-Ray 3.6.

  - In the presence of an 'assumed_gamma 1.0' statement, indexed PNG files 
    (uncommon) will appear darker than with POV-Ray 3.6.

  - In the presence of an 'assumed_gamma 2.2' statement, PNG files with a gAMA 
    lower than 2.2 (uncommon) will appear darker than with POV-Ray 3.6.

  - PNG files with an sRGB chunk but no gAMA chunk may appear significantly 
    different than with POV-Ray 3.6.

  - PNG files may generally appear slightly different than with POV-Ray 3.6.

  A warning will be printed in these cases, except for the latter.
  
  NOTE: Non-legacy scene default gamma handling for image input files has 
  changed significantly from previous betas, affecting all file formats except 
  OpenEXR, Radiance HDR and (with minor differences) most flavors of PNG; there 
  will be NO corresponding warnings.

Change 4889 on 2009/09/14 by calimet@lavender

  SDL preview display: temporarly disable the window title; see http://bugs.povray.org/23

Change 4887 on 2009/09/10 by clipka@cli-pc-xp64

  Update libtiff from version 3.6.1 to 3.8.2.
  This fixes FS#57 "Compressed TIFF image_map renders all transparent".

Change 4886 on 2009/09/09 by clipka@cli-pc-xp64

  Fix FS#55 "Output_Alpha=on doesn't work as documented"

Change 4885 on 2009/09/08 by clipka@cli-pc-xp64

  Subsurface Light Transport improvements:
  
  - Illumination samples for diffuse contribution are now shared among R, G and 
    B color components; this eliminates color noise, and also appearently reduces 
    RNG-induced patterns. Although this comes at a cost of increasing luminance 
    noise, the performance increase should allow to fully counter this effect by 
    increasing the sample count accordingly.
  
  - Fixed some asserts that did not compile on Linux.

Change 4884 on 2009/09/08 by clipka@cli-pc-xp64

  Modified ray-object-intersection postcondition handling.
  
  Those postconditions effectively rejected whole objects based on whether the 
  closest intersection would match the condition, instead of filtering out 
  individual intersections before determining the closest one. This would lead 
  to artifacts, e.g. small-scale smoothed mesh objects would fail to 
  self-shadow near edges where the normal would be almost perpendicular to a 
  group light source.
  
  Changed this so that compliance with the postcondition is now tested on all 
  intersections of a particular object when trying to determine the closest 
  intersection point with that object.

Change 4883 on 2009/09/07 by calimet@lavender

  Configure errors on missing NON_REDISTRIBUTABLE_BUILD=yes when required

Change 4882 on 2009/08/29 by clipka@cli-pc-xp64

  Improved integration of subsurface code within POV-Ray.
  
  Subsurface light transport code should now properly handle light attenuation 
  due to distance, spotlight falloff or intervening non-opaque objects 
  (including media and projected_through objects). Diffuse ambient illumination 
  is also supported to some extent (multiple-scattering term only) when 
  radiosity is turned on (however, it does not actually call radiosity code at 
  present).

Change 4881 on 2009/08/29 by clipka@cli-pc-xp64

  Fixed FS#52 "inside() function does not accept meshes despite valid inside_vector"

Change 4880 on 2009/08/29 by clipka@cli-pc-xp64

  Some code refactoring.
  
  pov::Trace::RadiosityFunctor and pov::RadiosityFunction:
    - Removed some unused method parameters.
  
  pov::Trace:
    - Added more comments to the declaration

    - Modified method parameters to consistently be const where feasible, and 
      use reference types in favor of pointers.

    - Modified area light code handling to leave the original LightSource data 
      unchanged; extracted all except the initialization part of 
      TraceAreaLightShadowRay() into new method TraceAreaLightSubsetShadowRay(); 
      slightly simplified the code

    - Renamed some parameters and variables for consistency.
  
  Various:
    - Defined a few function/method parameters as const

    - Cleaned up some macros

Change 4876 on 2009/08/24 by clipka@cli-pc-xp64

  Fixed and re-enabled change #4845 ("moved media handling code..."; see also #4860).
  
  This may significantly speed up scenes using both "heavyweight" averaged or 
  pattern-mapped textures (e.g. micronormals) and interior media.

Change 4870 on 2009/08/22 by clipka@cli-pc-xp64

  Fix FS#49 "number_of_waves default value not properly initialized"

Change 4869 on 2009/08/22 by clipka@cli-pc-xp64

  Some code refactoring and commenting:
  
  pov::Intersection: Added some doxygen-compatible comments; removed some 
  unused members; moved Intersection::GetLocalIPoint() functionality to 
  pov::Blob (the only place where it was used).
  
  pov::Blob: moved Intersection::GetLocalIPoint() functionality to here.
  
  pov::RadiosityFunction (and related): Eliminated some members that duplicated 
  SceneRadiositySettings values; renamed some local variables.
  
  pov::Trace: Added some doxygen-compatible comments; removed an unused 
  parameter from Trace::ComputeOneWhiteLightRay().

Change 4867 on 2009/08/20 by clipka@cli-pc-xp64

  Fix bug FS#48 "CSG bounding box computation broken with shearing transformation"

-------------------------------------------
Changes between 3.7.beta.33 and 3.7.beta.34
-------------------------------------------

Change 4861 on 2009/08/06 by clipka@cli-pc-xp64

  Refactoring of Trace class for more consistent use of types:
  - replacing DBL with double
  - replacing Colour with RGBColour where suitable
  - replacing COLOUR / RGB macros with Colour / RGBColour method calls
  - replacing colour component math with colour class math where suitable
  - replacing array-style colour component access with accessor method calls
  - declaring Colour& / RGBColour& parameters as const where appropriate
  - replacing VECTOR macros with Vector3d method calls where suitable
  - simplifying some unnecessarily complicated code

Change 4858 on 2009/07/30 by clipka@cli-pc-xp64

  added sample scene "advanced/diffuse_back.pov" to illustrate diffuse backside
  illumination (see changelist #4854)

Change 4856 on 2009/07/29 by clipka@cli-pc-xp64

  added support for diffuse backside illumination:
  
  To model thin, diffusely-translucent objects (e.g. paper, curtains, leaves etc.),
  an optional 2nd float parameter has been added to the "diffuse" finish statement
  to control the effect of illumination from the back of the surface. The default
  value is 0.0, i.e. no diffuse backside illumination. For realistic results, the
  sum of both parameters should be between 0.0 and 1.0, and the 2nd parameter should
  be the smaller of the two.
  
  Note: This feature is currently experimental and may be subject to change. In
  particular, the syntax as well as interoperation with double_illuminate, multi-layered
  textures or conserve_energy are still under investigation.

Change 4846 on 2009/07/20 by calimet@lavender

  fix FS#40 (FreeBSD lacking POSIX CLOCK_PROCESS_CPUTIME_ID) using the simple workaround
  proposed in http://news.povray.org/4a5f8092@news.povray.org

Change 4843 on 2009/07/15 by clipka@cli-pc-xp64

  added option to speed up radiosity pretrace:
  
  As some computations don't contribute to the generation of radiosity samples, they can
  safely be skipped during radiosity pretrace to gain some speed if the pretrace's other
  role as a coarse preview is not required.
  
  The following .ini file / command line options control whether pretrace performs all
  computations so it can double-feature as a coarse preview ("vain pretrace"):
  
      Radiosity_Vain_Pretrace=bool   turns vain pretrace on/off
      +RVP                           turns vain pretrace on (default)
      -RVP                           turns vain pretrace off
  
  Note that with vain pretrace off, preview will look remarkably odd during the radiosity
  pretrace phase; this is normal, and no reason to be alarmed.
  
  At the moment, turning vain pretrace off will affect only classic lighting computations
  (diffuse lighting, higlights and iridescence); other features expendable during pretrace
  may follow in future versions.

Change 4842 on 2009/07/15 by clipka@cli-pc-xp64

  FS#39 - "cats" and "life" sample scenes broken (follow-up)
  
  NOTE: Only the line ending of the very last line of each file changed (CR to CR+LF); some
  programs may consider this a non-change, so be sure to get the updated version!

Change 4835 on 2009/06/21 by chrisc@x8

  windows console version now sends stream output to stderr by default.

-------------------------------------------
Changes between 3.7.beta.32 and 3.7.beta.33
-------------------------------------------

Change 4828 on 2009/06/17 by calimet@lavender

  [unix] config: fix FS#34 (http://bugs.povray.org/task/34) and update generic autoconf macros

Change 4825 on 2009/06/15 by chrisc@x8

  improve support for image output to stdout/stderr for supported file types. the  BANNER_STREAM
  output will still be a problem if writing the image to stdout as currently this cannot be turned
  off. however note that the linux and winconsole versions write these streams to STDERR so this
  should be OK on those platforms.

  NOTE: this submission does not implement progressive output; the image is only written 
  after the render completes. progressive output will be added in a later submission.

Change 4824 on 2009/06/15 by chrisc@x8

  don't fclose stream if it's stdout, stderr or stdin, plus add support for output to stderr.

Change 4823 on 2009/06/14 by chrisc@x8

  fix FS#14 (coincident transparency issue)

  The postcondition in intersection tests had no means of taking SMALL_TOLERANCE into 
  account on those occasions it's needed (such as when doing shadow tests). This is now 
  implemented.

Change 4822 on 2009/06/14 by chrisc@x8

  fix FS#17 (square blotches in transparency).
  shadow cache assignment was testing for transparancy against CSG member rather than CSG itself.

Change 4820 on 2009/06/08 by chrisc@x8

   more cleanly handle circumstance where the VFE session closes unexpectedly (e.g. 
        due to an exception).

Change 4819 on 2009/06/08 by chrisc@x8

  add support for an exception during message dispatch being forwarded all the way to the 
  front-end code (see #4817) and provide a means to automatically stop a render when such 
  an exception occurs. this is a bit hacky in that it's possible to get multiple instances 
  of the exception before the render stop takes effect (due to POVMS messages already 
  queued or that get queued before the request is received).

Change 4818 on 2009/06/08 by chrisc@x8

  optimize the way imageProcessing handles creating new images; should reduce the chance 
  of an out-of-memory error.

Change 4817 on 2009/06/08 by chrisc@x8

  add support for file-backed RGBFT image container and use it for intermediate image 
  storage if allocating a memory-backed one fails. this implementation is basic in that it 
  doesn't support large files (anything more than what fseek/fwrite etc can handle) and 
  only buffers a single line. the proper solution to the intermediate image storage issue 
  is to go away from using an image container and cache the render blocks on disk instead, 
  using a class that can stream fully-completed rows to the image output code (required for 
  writing to stdout to work properly again).

  add support for an exception during message dispatch being forwarded all the way to the 
  front-end code. previously such exceptions were discarded, meaning that if e.g. an image 
  write operation failed due to lack of disk space, the front-end wouldn't know (and the 
  render would continue).

  NOTE: this has changed the semantics of POVMS_ProcessMessages: previously, it would 
  never throw an exception or allow one to reach the caller. VFE insulates callers from 
  this but platforms not using VFE need to be prepared to handle an exception if one 
  occurs.

Change 4816 on 2009/06/07 by clipka@cli-pc-xp.rad

  Add some more radiosity stats for performance tweaking

Change 4815 on 2009/06/07 by chrisc@x8

  fix FS#33 (parse accepting invalid vector float components).
  the parser will now throw an error if an additional period ('.') is found in a floating-point literal.
  see http://bugs.povray.org/task/33.

Change 4814 on 2009/06/07 by chrisc@x8

  fix bug FS#16
  code introduced in change #4452 did not iterate the blend map or materials to check for reflection.
  this could result in a render with infinitely increasing trace level (until stack 
  overflow) due to maxTraceLevel not being incremented.
  See http://bugs.povray.org/task/16.

Change 4813 on 2009/06/07 by clipka@cli-pc-xp.rad

  preliminary fix for FS#32 (tiff file extention error):
  Exact specified filename is now always searched for, if only as a last resort

Change 4811 on 2009/06/07 by chrisc@x8

  fix bug FS#15 (using trace or inside with a julia fractal causes a crash).
  See http://bugs.povray.org/task/15.

Change 4809 on 2009/06/05 by chrisc@x8

   fix bug FS#13 (files of exactly 4k cause editor crash in 64-bit windows)
  see http://bugs.povray.org/task/13

Change 4806 on 2009/05/31 by chrisc@x8

   fix editor crash on 64-bit systems.

Change 4801 on 2009/05/29 by calimet@lavender

  [unix] fix "FS#21 - unix scripts have wrong version set"

Change 4800 on 2009/05/29 by calimet@lavender

  [unix] config: drop support for --with-boost-src configure option.
  The workaround offered by this option has been marked unsafe since the first
  POV 3.7 source release (beta.28).  Moreover, installing Boost from sources
  got much easier since at least version 1.35.
  Note: with this change, the libraries/ folder is no longer distributed.

Change 4794 on 2009/05/27 by calimet@lavender

  [unix] get rid of --disable-vsnprintf-check and unimplemented SVGA support (--with-svga); misc tweaks

Change 4791 on 2009/05/24 by clipka@cli-pc-xp.rad

  Fix "FS#31 - function pattern in image map" (transmit component was inverted in pigment function images)

Change 4790 on 2009/05/24 by clipka@cli-pc-xp.rad

  Fixed "FS#24 - isosurface, bounding box & threads"; added some debug assertions to make 
  sure similar issues with IStack pop up early in future

Change 4783 on 2009/05/18 by clipka@cli-pc-xp.rad

  Fix ARRAYS_WriteDF3 macro:

    - Fix 16-bit depth output
    - Fix a parse warning

Change 4781 on 2009/05/18 by calimet@lavender

  [unix] config: Boost >= 1.36 required

Change 4780 on 2009/05/18 by calimet@lavender

  [unix] config: generic updates from GNU automake 1.11

Change 4774 on 2009/05/13 by clipka@cli-pc-xp.rad

  add no_radiosity keyword, as known from MegaPOV:
  Specifying "no_radiosity" in an object block makes that object invisible to radiosity 
  rays, in the same way as "no_image", "no_reflection" and "no_shadow" make an object 
  invisible to primary, reflected and shadow test rays, respectively.

Change 4765 on 2009/04/26 by chrisc@x8

  combine IntStats and FPStats into RenderStats class; this allows for more convenient access.
  introduce new thread-local storage macro; this is intended to replace use of boost's 
  thread_specifc_ptr such that we can get more direct (i.e. faster) access to the data 
  being referred to. currently this isn't used for anything new (CurrentTaskCooperate uses 
  it as before), but over time more uses will be enabled.

  NOTE: there is a default implementation of the TLS macro named DECLARE_THREAD_LOCAL_PTR in frame.h.
  This uses the syntax that GCC expects, and thus should work for unix and mac platforms, 
  however I've not tested it.

Change 4764 on 2009/04/25 by chrisc@x8

  remove reference to uninitialized local variable causing radiosity stats to be 
  displayed when they should not be.

Change 4762 on 2009/04/25 by chrisc@x8

  statistics re-work to provide support for floating-point values as well as int.
  also change ThreadData arguments in most places to no longer be const.

Change 4761 on 2009/04/20 by clipka@cli-pc-xp.rad

  Revival of Radiosity Load/Save + various other radiosity code changes:
  
  the following .ini / command line parameters are recognized:
  
    Radiosity_File_Name=<name>" or "+RF<name>" to set the cache file name;
    Radiosity_From_File=<on/off>" or "+RFI" to enable reading the radiosity file at startup
    Radiosity_To_File=<on/off>" or "+RFO" to enable writing new samples to the radiosity file
  
  NOTE: The parameter names are preliminary, and may still be subject to change; there is 
  a potential conflict between the shorthand forms)
  
  If both +RFI and +RFO are specified, new samples gathered are appended; otherwise, +RFO 
  causes the file to be overwritten if it exists.
  
  New samples gathered are written whenever an SMP block is completed. Tests indicate 
  that this is almost neutral regarding performance, compared to operation with radiosity 
  file output disabled.
  
  ---------------------
  Accompanying changes:
  
    - moved most of the radiosity parameters out of povrayold.h; overhauled handling of 
      per-recursion settings
  
    - each thread now has its own sample cache block allocation pool, reducing thread 
      synchronization overhead; according to tests, this gives a slight performance benefit.
  
  ---------------------
  Unrelated changes:
  
    - changed structure of the code computing sample ray directions, as initial preparations
      for future "smart" sampling algorithms
  
    - now using different "waveforms" to average nearby samples, using a more smoothly blurring
      function for top-level samples during final render, while using a faster function for
      deep-recursion samples and/or pretrace
  
    - slightly tweaked individual per-recursion parameters

Change 4760 on 2009/04/10 by clipka@cli-pc-xp.rad

  fixed duplicate color names in glass.inc

Change 4759 on 2009/04/10 by clipka@cli-pc-xp.rad

  Various Radiosity improvements:
  
    - further cleaned up code; improved performance for "bounce depth" >= 2 again
  
    - new "high reproducibility" mode: when specifying "High_Reproducibility" or "+HR" on the
      command line, POV-Ray will spend extra effort to make sure renders are deterministic despite
      SMP (currently, radiosity is the only code to use this flag; in HR mode, radiosity pretrace
      starts out with fewer threads, and some extra rules are imposed on sample re-use that may cause
      surplus samples to be gathered)

-------------------------------------------
Changes between 3.7.beta.31 and 3.7.beta.32
-------------------------------------------

Change 4753 on 2009/03/31 by clipka@cli-pc-xp.rad

  added ARRAYS_WriteDF3 macro to arrays.inc for writing an array to a df3 file

Change 4748 on 2009/03/28 by clipka@cli-pc-xp.rad

  fix bug creating artifacts in output file when mosaic preview is used with +EP2 and -A

Change 4747 on 2009/03/28 by clipka@cli-pc-xp.rad

  Added experimental support for subsurface light transport (aka subsurface scattering).
  
  Currently, SSLT is activated for a particular object by adding the following statement to
  its finish (note that this is very likely to change):
  
    subsurface { COLOR, COLOR }
  
  specifying the (reduced) scattering coefficients (sigma'[s]) and absorption coefficients
  (sigma[a]), respectively, in units of 1/mm, for each of the three basic colors. The object's
  IOR will also affect the results.
  
  The algorithm is designed to give realistic results at a scale of 10 mm per POV-Ray unit by
  default; for other scales, place the following statement in the global_settings section:
  
    mm_per_unit NUMBER
  
  To tune the algorithm for quality or performance, the number of samples for the diffuse
  scattering and single-scattering approximation, respectively, can be specified by placing
  the following statement in the global_settings section:

    subsurface { samples NUMBER, NUMBER }
  
  SSLT is still in alpha stage.

Change 4743 on 2009/03/27 by clipka@cli-pc-xp.rad

  added radiosity octree performance stats; fixed stats for max trace level & parse time

Change 4742 on 2009/03/25 by clipka@cli-pc-xp.rad

  implement binary #write

Change 4733 on 2009/03/14 by chrisc@x8

  alter the return type of GetThreadID() related functions to be POVMS_Sys_Thread_Type.
  Change POVMS_Sys_Thread_Type to be unsigned long (needed for 64-bit Macintosh x86 build).

Change 4731 on 2009/03/09 by chrisc@x8

  improvements to performance in crackle cache. in particular, avoid calling malloc() for
  each cached entry, and rely on performance of unordered_map's default allocator to not hammer
  the heap. NB I tried using boost's pool allocator but this gave particularly poor performance
  on render shutdown (during destruction of the allocated entries).
  
  optimised the management of the crackle cache size by setting limits in megabytes (currently
  per-thread and not user-settable: this needs looking at).
  
  NB there is some scope for investigation of whether or not the crackle cache could be efficiently
  turned back into a single cache per scene, rather than per thread; cache efficiency seems fairly
  high and thus most accesses are reads.
  
  optimised crackle cache entry setup a little by avoid branches during main loop at cost of extra
  memory lookups.
  
  changed crackle to use the boost hash.
  
  renamed the standard POV 'Rectangle' class to 'Rect' due to a long-standing and rather annoying
  clash with a Windows definition of the same same name. unfortunately some boost headers (such as
  pool allocators, and also the mutex code) pull in windows.h and contaminate the namespace with
  windows crap. while I could work around it by explicitly specifying pov_base::Rectangle it's
  cleaner just to change the definition to avoid this.

Change 4726 on 2009/02/25 by calimet@lavender

  unix config: changes for beta.31
    - require boost >= 1.35 to build latest radiosity changes
    - add check whether the selected C++ compiler works to fix issue reported in
      http://news.povray.org/web.494ffd924e4b35bcedb0f3170%40news.povray.org
    - add more robust check to detect boost
    - add support for ICC's -xHost flag (version 11.0 and above) and preliminary support for SSE4

Change 4725 on 2009/02/25 by calimet@lavender

  unix config: ax_test_compiler_flags.m4 checks current flag with all previously selected flags;
    does not use AC_TRY_COMMAND anymore

Change 4720 on 2009/02/22 by chrisc@x8

  tweak randomsequences.h to make visual studio 2005 happy.

Change 4710 on 2009/02/18 by chrisc@x8

  tweak display of render shutdown and file warnings on Windows.

Change 4709 on 2009/02/18 by chrisc@x8

  change 'render shutdown' to 'shutdown' in shutdown messagefactory.

-------------------------------------------
Changes between 3.7.beta.29 and 3.7.beta.31
-------------------------------------------

Change 4708 on 2009/02/17 by chrisc@x8

  fix inconsistent usage of int/long in line numbers within POVMS messages.
  implement filename display in message output where name is supplied.

Change 4707 on 2009/02/16 by chrisc@x8

  introduce means for objects to submit a message on shutdown. this is
    currently only implemented for isosurfaces (the max_gradient warning), but
    can be implemented for any object type by providing an implementation of
    ObjectBase::DispatchShutdownMessages.

Change 4706 on 2009/02/15 by chrisc@x8

  auto-size progress bar to fit in remaining status panel space; if not enough
    room, don't show it at all.

Change 4703 on 2009/01/19 by clipka@cli-pc-xp.rad

  fixed bug that caused wrong radiosity illumination on transformed mapped textures

Change 4696 on 2009/01/16 by calimet@lavender

  config: ax_x86_arch.m4 does not use AC_TRY_COMMAND anymore;
  add preliminary support for SSE4x and newer Core i7, Phenom CPUs

Change 4695 on 2009/01/16 by calimet@lavender

  config: ax_fix_incorrect_path.m4 does not use AC_TRY_COMMAND anymore

Change 4694 on 2009/01/16 by calimet@lavender

  config: rewrite ax_compiler_version.m4 macro for better logging;
  do not use autoconf's undocumented/deprecated/dangerous AC_TRY_COMMAND anymore

Change 4693 on 2009/01/15 by calimet@lavender

  remove a non-ASCII character (radiosity updates, change 4687) 

Change 4692 on 2009/01/15 by calimet@lavender

  install script: fix non-POSIX 'read' options as reported in
    http://news.povray.org/web.496e790f156c502e2adf27b40@news.povray.org

Change 4691 on 2009/01/12 by calimet@lavender

  config: fix issue reported in http://news.povray.org/web.494fe25d9d9e24ec569d0e9f0@news.povray.org
  updates/fix for newer GNU autoconf versions (tested with 2.63)

Change 4690 on 2009/01/12 by calimet@lavender

  config: updates from the Autoconf Macro Archive; minor mod for ax_compare_version.m4

Change 4689 on 2009/01/12 by calimet@lavender

  config: generic updates from GNU automake 1.10.2

Change 4688 on 2009/01/10 by chrisc@x8

  ported SSLT code by Sarah Tariq and Lawrence (Lorenzo) Ibarria from v3.5
    proof-of-concept source files.
  code is not active currently. lots more work to do.

Change 4687 on 2009/01/08 by chrisc@x8

  Radiosity updates from Christoph Lipka, with some minor re-formatting and
    updates to suit changes in the boost::thread library.

Change 4685 on 2009/01/06 by chrisc@x8

  various minor changes mostly related to building the code with boost v1.37.0

Change 4683 on 2009/01/03 by chrisc@x8

  add Visual Studio 2008 project.

Change 4680 on 2008/10/18 by chrisc@x4

  fix install issue where SSE2 binary was always used even if system didn't
    have SSE2.

Change 4673 on 2008/10/05 by chrisc@x4

  update windows readme.txt, add HTML version (readme.txt is now derived from
    the HTML one).

Change 4668 on 2008/09/30 by calimet@lavender

  fix bashism is various scripts; see http://news.povray.org/48c1d1b9$1@news.povray.org

Change 4667 on 2008/09/30 by calimet@lavender

  fix bashism is various scripts; see http://news.povray.org/48c1d1b9$1@news.povray.org

-------------------------------------------
Changes between 3.7.beta.28 and 3.7.beta.29
-------------------------------------------

Change 4662 on 2008/09/27 by chrisc@x4

  allow 'save as' to succeed without 'file is already open in editor' error if
    case of current file is being changed.

Change 4661 on 2008/09/27 by chrisc@x4

  add CPU count code from Intel Corp.
  this allows us (at least on Intel CPU's) to get a more accurate count of
  actual CPU cores installed. this is particularly useful for fixing the
  issue with the stats (Windows counts virtual processors as physical ones,
  which mucks up the CPU vs elapsed time ratio calculation).

Change 4659 on 2008/09/27 by chrisc@x4

  update teapot sample scene.
  change flat_enough to 0.0001 (was 0.01).
  change teapot texture, checker color, and background color.
  fix error on line 179 where incorrect y-coordinate was given (reported by
    Yannick Patois).

Change 4658 on 2008/09/27 by chrisc@x4

  add colored text output to message window. warning and debug messages get
    different colors than error messages and standard text.
  change default background to be a plain color.

Change 4657 on 2008/09/27 by chrisc@x4

  add deprecation to glass_old.inc and related changes (from Jim Holsenback).

Change 4656 on 2008/09/25 by chrisc@x4

  add ability to declare an identifier as deprecated.
  
    #declare deprecated Col_Glass_Old=color rgbf <0.8, 0.9, 0.85, 0.85>;
    #declare deprecated once Col_Glass_Old=color rgbf <0.8, 0.9, 0.85, 0.85>;
    #declare deprecated "Some message" Col_Glass_Old=color rgbf <0.8, 0.9, 0.85, 0.85>;
  
  A deprecated identifier generates no message at the time it is declared: a
  warning is only issued if it is used.
  
  If the optional 'once' keyword is present it must immediately follow the
  'deprecated' keyword and indicates that the warning should only be displayed
  once per parse.
  
  If the optional message string is present, it will be used as the warning to
  be displayed if the identifier is used. Otherwise, a message of the form
  "Identifier 'FOO' was declared deprecated." is used.
  
  An identifier is considered 'used' if it is referenced anywhere (even if in
  another #declare).

Change 4655 on 2008/09/25 by chrisc@x4

  add some extra libraries to the link for installations that don't already
    imply them.

Change 4653 on 2008/09/22 by chrisc@x4

  updated objects and portfolio files from Sabrina Kilian.
  See <48876483@news.povray.org> for details.

Change 4652 on 2008/09/21 by chrisc@x4

  work around crackle hash issue reported by Yvo by reverting to old hash function.
  Issue: new hash function returns large range of possible values, causing
    memory used by cache to grow quickly.

Change 4651 on 2008/09/21 by chrisc@x4

  move assumed location of user-editable files into a subdir of 'My Documents'.

Change 4649 on 2008/09/21 by chrisc@x4

  update sample INI files to read 3.7.

Change 4648 on 2008/09/21 by chrisc@x4

  scenes and include updates from Jim Holsenback and Stephen Shonfield.
  See <48876483@news.povray.org> for details.

Change 4645 on 2008/09/20 by chrisc@x4

  bump version to beta 29, expiry to 1 November 2008.

Change 4644 on 2008/09/20 by chrisc@x4

  a few tweaks to the project files; in particular, allow boost path to be
    specified via $(BOOST_ROOT).

Change 4643 on 2008/09/20 by chrisc@x4

  fixes two crashes reported in thread <web.48b1839e38b6f50ec03ef3130@news.povray.org>.
  also be a little more conservative with the cache allocations (min 1 entry
    even if no lights).

Change 4642 on 2008/09/20 by chrisc@x4

  fix sphere_sweep parse crash reported in <web.48bc447cc2ccad1e8510f03f0@news.povray.org>.

Change 4640 on 2008/09/16 by chrisc@x4

  change Ascii to USC2 function such that ASCII codes > 127 are not sign-extended.
  change UCS2 to Ascii function such such that UCS2 codes between 128 and 255 are
    now accepted.

Change 4639 on 2008/09/16 by chrisc@x4

  change media confidence test to accept 0.0 as per docs.

Change 4626 on 2008/08/11 by chrisc@x4

  thanks to Yvo for picking this lurking error up (could cause crashes in JPEG code).

Change 4624 on 2008/08/04 by calimet@lavender

  include Solaris patch by John Martin as reported in <web.47e9bdccd4b82d06c7064b8c0%40news.povray.org>.
  Update VERSION to beta.28

-------------------------------------------
Changes between 3.7.beta.27 and 3.7.beta.28
-------------------------------------------

Change 4620 on 2008/07/26 by chrisc@x4

  about box and status panel changes.
  set XP icon as default.
  add PSD for about box.

Change 4618 on 2008/07/21 by chrisc@x4

  change way parse warnings are dispatched internally if not optimized for
    console.

Change 4617 on 2008/07/20 by chrisc@x4

  fix 'white outlines in df3 patterns with interpolate 2' issue reported in
    <483d2920@news.povray.org>.
  NB fix solves problem by clamping the return value to no less than 0. a more
    correct approach might be to work out why the (very small) negative values
    were being generated in the first place.

Change 4616 on 2008/07/20 by chrisc@x4

  fix 'clock not working in functions' issue reported in
    <486c3c98$1@news.povray.org>.

Change 4613 on 2008/07/20 by chrisc@x4

  make sure windows exception handler body only gets executed once no matter
    how many threads are running.

Change 4611 on 2008/07/19 by chrisc@x4

  fix str() crash reported in <web.4880f0adaf19f856c59235590@news.povray.org>.

Change 4609 on 2008/07/14 by chrisc@x4

  fix bounding box calculation flaw that caused in some cases major slow-downs
    in scenes using difference (e.g. abyss.pov).

Change 4608 on 2008/07/13 by chrisc@x4

  re-implement light color cache for textures. without this, each subsequent
    layer (after the first) in a multi-layered texture will cause an unnecessary
    call to TraceShadowRay and its subsequent intersection test to determine the
    light color at that point.
  
  NOTE 1: the original 3.6 code did not re-initialise the 'Tested' flag in
    ComputeShadowColour; I presume this is to re-use the cache at that level ...
    need to check if this is the case. the current code does the same.
  
  NOTE 2: there's more work to do on this. it's just a first step; there are
    other places where caching is needed.

Change 4606 on 2008/07/01 by chrisc@x4

  work around boost::regex-related problem.
  bugfix for INI directory exclusion in IO permissions.

-------------------------------------------
Changes between 3.7.beta.26 and 3.7.beta.27
-------------------------------------------

Change 4605 on 2008/06/30 by chrisc@x4

  more work on splitting program data/user data.
  revert to using INI file for pvengine options.
  improve 3.6 migration code.

Change 4602 on 2008/06/21 by chrisc@x4

  fix issue whereby manual bounds, clips, patterns, UV, and interior were left
  behind when a transformation was applied to a CSG object.

Change 4600 on 2008/06/15 by chrisc@x4

  add handling of std::bad_alloc() to parser, rather than letting it fall
  through to task. this allows the file and line number that was being parsed
  at the time to be displayed. also, the bad_alloc handler in task attempts to
  raise a POV_EXCEPTION, which could fail due to insufficient memory for the
  exception object; this is no longer attempted.

Change 4599 on 2008/06/15 by chrisc@x4

  alter pvmem.cpp to throw std::bad_alloc() upon memory allocation failure.

Change 4594 on 2008/05/25 by chrisc@x4

  add support for specifying grayscale output via INI file or command-line.
  
  this is intended to replace the use of hf_gray_16 in global_settings. 
  hf_gray_16, if encountered, has no effect on the output type and will 
  additionally generate a warning message (as before).
  
  currently only PNG file support is provided with grayscale output; others 
  will be added over time.
  
  grayscale output may be specified via 'Grayscale_Output=true' as an INI 
  option, or '+Fxg' (for output type 'x') as a command-line option. For 
  example, '+Fng' for PNG grayscale output.
  
  caveat: grayscale output implies the maximum bit-depth the format supports; 
  for PNG this is 16. it is not valid to specify bits per color channel with 
  'g' (e.g. '+Fng16' is not allowed, and nor for that matter is '+Fn16g'). if 
  bits per channel is provided via an INI option, it is ignored.
  
Change 4593 on 2008/05/19 by chrisc@x4

  fix crash with inverse and CSG reported in <web.4828b51b6d261ebff3e4f6a20@news.povray.org>.

Change 4592 on 2008/05/19 by chrisc@x4

  fix incorrect flag test which would have resulted in issues with cutaway 
  textures and CSG or objects with double_illuminate set.

-------------------------------------------
Changes between 3.7.beta.25 and 3.7.beta.26
-------------------------------------------

Change 4591 on 2008/05/11 by chrisc@x4

  Fix for "no_image and transparency" problem reported in <web.46f84a9cd032f3c7cb86afba0@news.povray.org>.
  NB: there might be other circumstances where we need to honor the NO_IMAGE
  flag at this point in the code; this fix just added refraction to the test.

Change 4590 on 2008/05/11 by chrisc@x4

  Fix the animation frame number issue reported in <478561e3@news.povray.org>;
  beware of side-effects (hopefully none).

Change 4588 on 2008/05/08 by chrisc@x4

  Re-enable Include_Header thanks to patch from Stefaan De Roeck (see <47fb5d65@news.povray.org>).
  Also fix unrelated bug discovered when testing above: if an attempt to open
  an include file threw an exception (e.g. due to file I/O restrictions), POV-Ray
  would crash if the include stack element had not been previously used.

Change 4587 on 2008/05/08 by chrisc@x4

  Fix 'library path accumulation' issue reported in <481da512$1@news.povray.org>.

Change 4586 on 2008/05/07 by chrisc@x4

  apply isosurface cache fix suggested by Lukas Winter in <47c5b8b6$1@news.povray.org>.

Change 4584 on 2008/05/07 by chrisc@x4

  Workaround for race condition that would cause 'timed out waiting for worker thread' error.

Change 4582 on 2008/04/25 by calimet@lavender

  [unix] fix the --prefix ignored issue reported by Warp
  http://news.povray.org/47f28cfe@news.povray.org

Change 4581 on 2008/04/20 by calimet@lavender

  dd two missing includes; after reports by Sean McGrath on
    http://news.povray.org/web.47e7abdfb582dec03803aa600@news.povray.org
    http://blogs.sun.com/smg/entry/povray_3_7_on_solaris

Change 4580 on 2008/04/08 by calimet@lavender

  apply gentoo patch for build failure with gcc 4.3
  http://bugs.gentoo.org/show_bug.cgi?id=216684

Change 4544 on 2008/02/09 by chrisc@x4

  a raft of changes, mostly related to our default class name, registry location, and migration.
  as of this checkin, POVWIN now uses its own registry branch instead of sharing the one used by 3.6.
  support has been added for automatically migrating INI-based settings from a prior 3.6 install.
  other misc changes also included.

Change 4533 on 2008/02/08 by chrisc@x4

  fix file drop crash reported in <47ac0f69$1@news.povray.org>.

Change 4532 on 2008/02/05 by chrisc@x4

  stub out windows video capture support code (needs re-implementation).

-------------------------------------------
Changes between 3.7.beta.24 and 3.7.beta.25
-------------------------------------------

Change 4524 on 2008/01/30 by chrisc@x4

  remove last vestiges of pvengine.ini support (with exception for compatibility in GUIEXT).
  NB this doesn't affect pov-ray's own INI file handling.
  
  Move pvtools.ini to logged-in user's Application Data\POV-Ray for Windows directory.

  As of this checkin, version 5 of the common control DLL is required. This was 
  supplied with IE5, so it's highly unlikely that it won't be present on any 
  version of windows that we still support.

Change 4523 on 2008/01/29 by calimet@lavender

  add auto setting of thread count and rework --benchmark for linux platform.

  The number of threads is now set as the number of detected CPUs, or
  4 otherwise.  The built-in benchmark now accepts +Lpath command-line
  options and does no longer read any INI file but the provided one.

Change 4521 on 2008/01/29 by chrisc@x4

  moves all settings that used to be in pvengine.ini into the registry.

Change 4519 on 2008/01/19 by warp@warp

  fixed double-illumination problem with the area_illumination feature.

Change 4518 on 2008/01/19 by chrisc@x4

  irid, ground fog, and constant fog were using noise generator 0 rather than 
  the default generator.

Change 4513 on 2008/01/01 by calimet@nx

  build system: fix problems in detecting Athlon64 X2 cpus and OpenEXR < 1.4.
  Thanks to Jaime for the reports.

Change 4511 on 2008/01/01 by chrisc@x4

  add fix for the 'area lights and transform' bug reported in 
  <web.4639ad4565c782bbc717c9af0@news.povray.org>.

Change 4510 on 2007/12/31 by chrisc@x4

  changes to parser error message handling intended to reduce the incidence of 
  duplicate messages.

-------------------------------------------
Changes between 3.7.beta.23 and 3.7.beta.24
-------------------------------------------

Change 4494 on 2007/11/27 by nkopp@lightspeed

  Update photon code to take advantage of multiple threads.
  
Change 4493 on 2007/11/16 by warp@warp

  Fixed superellipsoid bug reported in <6p8nj3tckhrd1pihpofmvltqrfrs4lish8@4ax.com>

Change 4492 on 2007/11/12 by warp@warp

  Added a new warp: cubic. It maps an area in the x-y plane between <0,0>
  and <1,1> in the same way as box uv-mapping does.

Change 4488 on 2007/11/09 by warp@warp

  A new pattern type: 'cubic'. It takes six texture elements and maps each
  one to each pyramid centered at each half-axis (thus effectively mapping
  each texture element to each side of a origin-centered cube).

Change 4486 on 2007/11/07 by warp@warp

  Added support for reading the pixel resolution of an image map. This is done
  by giving an image map pigment identifier to max_extent(), which will then
  return the resolution of the image map as the x and y value of the returned vector.

Change 4483 on 2007/11/03 by warp@warp

  Added support for full area light diffuse and specular illumination. By default
  this is off, but can be turned on with the new keyword 'area_illumination [on|off]'
  inside the light_source definition block.

-------------------------------------------
Changes between 3.7.beta.22 and 3.7.beta.23
-------------------------------------------

Change 4470 on 2007/10/20 by chrisc@x4

  POVWIN now allows an expired beta to be extended by up to one week at a time,
  up to a maximum of 12 months.

Change 4457 on 2007/09/15 by nkopp@lightspeed

  Fix photon issues with refraction and dispersion

Change 4454 on 2007/09/05 by warp@warp

  Comparison ('=', '!=', '<', '<=', '>', '>=') support for strings.

--------------------------------------------
Changes between 3.7.beta.20b and 3.7.beta.22
--------------------------------------------

Change 4452 on 2007/08/28 by warp@warp

  The trace level in the trace() function is now incremented only if
  an object was hit and the object is marked to increment the trace
  level, or if the ray was a radiosity ray. Objects which do not use
  reflection nor ior (but which might be semi-transparent) are marked
  as not incrementing the trace level.

Change 4447 on 2007/08/09 by chrisc@cc-vm-xp

  Workaround for the temp file mapping not being completed.
  Temp files are now created as before (in the place specified).
  
Change 4445 on 2007/08/09 by chrisc@cc-vm-xp

  Fix issue whereby an I/O restrictions error would be displayed rather than 
  'input file not found' in certain cases where POVWIN was asked to render a 
  source file that was not present.

Change 4431 on 2007/05/13 by calimet@nx

  Multi-threaded signal handler, replaces the basic implementation.
  The signal handler is now running its own thread waiting to receive signals
  via sigwait().  Cancelling the benchmark before it starts is now handled via
  the handler as well, and returns proper exit value.

Change 4430 on 2007/04/30 by nkopp@lightspeed

  Further fix for media_attenuation bug
  (fix new bug that was introduced in changelist 4394)

Change 4420 on 2007/04/19 by chrisc@x4

  Fix SDL crash reported in <4617c41e$1@news.povray.org>.

Change 4412 on 2007/04/17 by chrisc@x4

  Add Control-A support in commandline input box (select all).
  change render window keypress code to hand focus to main window for any key, not just escape.

Change 4394 on 2007/04/14 by nkopp@lightspeed

  Fix fog (and participating media) shadow attenuation issues.
  
  Media computation was ignoring the lightsource's media_attenuation
  flag under some circumstances, and was attenuating shadow rays if
  the shadow ray had intersected an object.

Change 4389 on 2007/04/14 by chrisc@x4

  Fix jpeg temp file issue reported in thread <web.46168c053403448a4f02351a0@news.povray.org>.

Change 4378 on 2007/04/10 by calimet@lavender

  Fix incorrect exit value when closing the display window (user abort)

Change 4377 on 2007/04/09 by chrisc@x4

  Temporarily hard-code INI keywords into editor syntax table for INI files.

--------------------------------------------
Changes between 3.7.beta.20 and 3.7.beta.20b
--------------------------------------------

Change 4375 on 2007/04/09 by chrisc@x4

  add 'alternate render file' feature to povwin IDE. the purpose of this 
  feature is to make working on include files and macros more convenient.
  
  if the user requests that a file which is not a '.pov' or '.ini' file, 
  povwin consults an internal list of include file to source file mappings 
  which is accumulated for each render (note this is not persistent). if 
  the file that is to be rendered is in this list, the user is asked if 
  they would prefer to render the source file that most recently included 
  it instead. their decision is stored for the remainder of the session.
  
  additionally, add extensions .MCR and .MAC to list of files POV 
  considers include files (i.e. which are filtered as such in the various 
  file dialogs and assigned the POV file type for the editor syntax 
  highlighting).
  
  add .INI file type to editor syntax highlighting. currently does not 
  recognise POV keywords; this is to be added.
  
Change 4374 on 2007/04/08 by chrisc@x4

  add window menu to IDE. entries are MRU-sorted.
  also some other misc changes, including removing links to IRTC CD etc.

Change 4371 on 2007/04/07 by chrisc@x4

  Activate new memory statistics code; update win mem stats code to suit.
  
  NOTE: This is a work in progress. Currently it only gives global memory 
  stats (not per-thread). Per-thread stats are planned and are more useful 
  than global stats since we can then determine the memory usage of e.g. 
  the parse stage vs the render stage, plus ignore any allocs from non-core
  related threads (e.g. the UI).
  
  NB this feature requires non-trivial platform-specific code to function. 
  I'd advise holding off doing other platform support until the windows 
  code is done, as the interface will probably change.

Change 4370 on 2007/04/01 by calimet@nx

  fix problems in running the internal benchmark (setting the number of 
  threads; aborting the benchmark before it starts)

Change 4368 on 2007/04/01 by calimet@nx

  better error checking for timers; pretend the CPU time is always right for 
  now.

Change 4367 on 2007/04/01 by calimet@nx

  configure.ac: always check getrusage() and gettimeofday()

Change 4365 on 2007/04/01 by calimet@nx

  various changes and fixes including:
    - the display PauseWhenDone() method now takes a parameter that signals
      whether we need to exit immediatly (for instance if ctrl+c is hit)
    - set expiry to 2007-04-16
    - better handling of render cancel (text display; within animation)
    - read session status a bit more often (200ms instead of 250)
    - immediatly notify a change in the backend state (set event mask)
      to better synchronize the relevant console messages
    - exit code now returns 0=ok | 1=error | 2=user abort

Change 4359 on 2007/03/31 by chrisc@x4

  fix issue with editor window splitting not being restored 
  (<45620b9e$1@news.povray.org>).

  fix issue with file type not being set on initial save if 'save as' was 
  not used (reported many times, including <45602a08@news.povray.org> and 
  <46092c8a@news.povray.org>).

Change 4358 on 2007/03/31 by chrisc@x4

  fix uv mapping issue reported in <45602a08@news.povray.org> and 
  <46092c8a@news.povray.org>.

  note that the core issue here could have had effects in other places. 
  [Copy_Object was not properly initializing/clearing some fields that are 
  usually, but not always, copied by the object-specific copy function.
  in particular it was not clearing llights].

Change 4356 on 2007/03/29 by calimet@lavender

  tentative implementation for CPU and wall-clock timers using the POSIX 
  clock_gettime() function or getrusage() as a fallback; misc changes such 
  as code cleanup.
  
  Note: On Linux at least, the per-thread CPU time is likely to be wrong, 
  i.e. equivalent to the process wall-clock time, due to how glibc 
  implements clock_gettime() with CLOCK_PROCESS_CPUTIME_ID or 
  CLOCK_THREAD_CPUTIME_ID (see http://sources.redhat.com/ml/libc-alpha/2004-10/msg00008.html).
  Linux  kernels >= 2.6.10 should implement those calls internally; however 
  I seem to get wrong results when the number of threads exceeds the number 
  of cores/cpus.  Needs further testing and/or workarounds.

Change 4355 on 2007/03/29 by calimet@lavender

  reorganize configure.ac to perform library checks before language 
  constructs and functions checks; add tests for availability of librt and 
  clock_gettime() for POSIX timers, as well as getrusage() and 
  nanosleep(); move again the variable expansion for directories after the 
  call of AC_OUTPUT.

Change 4354 on 2007/03/28 by calimet@lavender

  fix PNG gamma issue reported in <45aa976e$1@news.povray.org> and 
  <45c11eed$1@news.povray.org>.  If supported, the gAMA chunk is always 
  written, thus following the HDR (radiance) output behavior.

Change 4353 on 2007/03/28 by calimet@lavender

  Restrict display and file gamma to be at least 0.001

Change 4352 on 2007/03/27 by calimet@lavender

  activate interframe pause thanks to change 4345 (closes bugzilla bug #22)
  and add basic signal handler

-------------------------------------------
Changes between 3.7.beta.19 and 3.7.beta.20
-------------------------------------------

Change 4350 on 2007/03/25 by chrisc@x4

  change a number of instances of POV_EXCEPTION_STRING() to be POV_EXCEPTION() 
    with error code and string.

Change 4349 on 2007/03/25 by chrisc@x4

  cease use of longjmp in png error handlers.
  note that this change throws exceptions from 'extern C' functions. if you 
    have told your compiler that this does not happen, be sure to change that 
    setting for png.cpp.

Change 4348 on 2007/03/25 by chrisc@x4

  remove embedded LF in message generated for #error.

Change 4347 on 2007/03/25 by chrisc@x4

  add 'file modified' indicator to filename shown in main window caption.
  add feature notification for when auto-reload results in files being auto-saved.

Change 4345 on 2007/03/24 by chrisc@x4

  some vfe changes to assist resolution of the 'pause after render' problem.

Change 4344 on 2007/03/22 by calimet@lavender

  unix: add support for --benchmark (works together with +wt) and print
    built-in features with --version

Change 4343 on 2007/03/20 by calimet@lavender

  sanitize a few unix HTML files and port the lastest 3.6 changes
    (w3c conformance, folded menu entries, improved keyword index)

Change 4342 on 2007/03/20 by calimet@lavender

  sanitize a few generic HTML files

Change 4341 on 2007/03/18 by calimet@nx

  port the latest changes in the 3.6 build system to 3.7

Change 4340 on 2007/03/16 by calimet@lavender

  workaround the "1 thread busy after completing" issue reported in
    <45dda26c$1@news.povray.org> by replacing a wait event with polling.

-------------------------------------------
Changes between 3.7.beta.18 and 3.7.beta.19
-------------------------------------------

TODO

-------------------------------------------
Changes between 3.7.beta.17 and 3.7.beta.18
-------------------------------------------

TODO

-------------------------------------------
Changes between 3.7.beta.16 and 3.7.beta.17
-------------------------------------------

Change 4298 on 2006/11/16 by chrisc@x4

  fix vidcap handling of video source pins that are not RGB8 (it now ignores them).

Change 4297 on 2006/11/16 by chrisc@x4

  disable RTR support on Win64 for now.
  make sure pause button state reflects frontend state when pause/resume fails.
  include version ID and system time in crash dump filename.
  open explorer window with crash dump file selected after a crash dump.

Change 4295 on 2006/11/14 by chrisc@x4

  fix issue with sys output file extension on windows (<455a0770@news.povray.org>).

Change 4294 on 2006/11/14 by chrisc@x4

  fix 'Subset_Start_Frame not working' issue (<web.454b67a8defacc9bf2985afc0@news.povray.org>).

Change 4289 on 2006/11/12 by chrisc@x4

  remove local index vectors from bsp tree build code to avoid slowdowns due to 
  heap locking. on win32, this roughly doubles build speed for complex trees
  (e.g. isocacti.pov).

Change 4288 on 2006/11/11 by calimet@nx

  Some display-related improvements.
  Do not close the display window between the frames of an animation.
  Use PACKAGE_NAME and VERSION_BASE for the window title.
  Fix unwanted pause_when_done if the render is canceled.
  Decrease the GetStatus() wait time from 1s to 250ms.

Change 4287 on 2006/11/10 by chrisc@x4

  fix for BSP missing objects and speckled rendering (cornell.pov gave a good 
  example of both).

Change 4285 on 2006/11/05 by chrisc@x4

  fix infinite loop in radiosity pre-trace code that would occur with small 
  values of pretrace end.

  add temporary workaround to distribute radiosity pre-tracing amongst all 
  threads. this needs to be removed once we work out the best way of co-ordinating
  the worker threads during pre-trace.

Change 4283 on 2006/11/04 by calimet@lavender

  Fix missing definition for FILENAME_SEPARATOR that caused run failure with
  absolute filenames (reported by Warp).

Change 4281 on 2006/11/03 by chrisc@x4

  enable multi-threaded radiosity. includes some basic locking on radiosity 
  cache, but see note in source.

  radiosity is still a WIP.

Change 4280 on 2006/11/02 by chrisc@x4

  fix bug that stopped radiosity from being activated when it should have been.

Change 4275 on 2006/10/30 by chrisc@x4

  implement clockless animation support for real-time raytracing.

Change 4274 on 2006/10/30 by chrisc@x4

  some more RTR changes. windows capture code now supports options as follows:
  
    width=nnn
    height=nnn
    double-buffer=yes|true|1|no|false|0
    skip-initial=nnn
    gamma=fff
  
  if omitted, defaults are:
  
    width and height - the first found pin in the video capture device graph
    double-buffer    - on
    skip-initial     - 0 frames (i.e. off)
    gamma            - 1.0
  
  it is possible to specify just the width or height, in which case the code 
  will default to the first found pin with that size, and won't care what the 
  other dimension is. specifying '-1' as a width or height is also a way of 
  saying it is a "don't-care". if the requested size is not available, the 
  render will fail.
  
  skip-initial is the number of frames to skip before returning from the 
  initialization. this is needed on some webcams that need a number of frames 
  to perform their setup (such as auto exposure and auto white-balance). this 
  matters mostly if the vidcap input is being used for something other than 
  real-time rendering.
  
  double-buffer and gamma do what their name imply.
  
  example specification:
  
    image_map {sys  ":vidcap:width=640:height=480:double-buffer=0:skip-initial=5:gamma=2.2" map_type 1}

Change 4273 on 2006/10/29 by chrisc@x4

  add double-buffering to video capture implementation.

Change 4272 on 2006/10/29 by chrisc@x4

  some preliminary RTR support. still a WIP.

Change 4271 on 2006/10/28 by chrisc@x4

  fix issue caused by failure to clear ray interiors during focal blur sample loop.
  see <web.45424a798f1b3f6c1bd6cd0c0@news.povray.org>.

Change 4270 on 2006/10/25 by chrisc@x4

  implement video capture. still need to add options parsing for setting e.g. 
  resolution etc.

Change 4266 on 2006/10/23 by chrisc@x4

  fix issue with trace returning an incorrect intersection point in some 
  circumstances (see <web.45367d932f1ac4de72d86b490@news.povray.org>).
  
  The issue was caused by the noise function using a different noise generator 
  during the parse than afterwards, since f_noise3d passed a NULL pattern to 
  Noise(), which tells noise to use the default noise generator. However this 
  is not assigned prior to parse completion.
  
  The fix was to give the VM access to the actual noise generator via 
  scenedata, so that it may be passed to Noise(). In the process I took the 
  opportunity to get rid of the global gNoiseGenerator, since its main reason 
  for existance is to allow Noise() to work when it isn't passed a noise 
  generator explicitly (via tpat). Noise() - and also a few other functions 
  that used to take a TPATTERN * - now directly accept the noise generator 
  instead.

Change 4265 on 2006/10/23 by chrisc@x4

  fix material assignment issue (see bugzilla bug #21).

Change 4264 on 2006/10/23 by chrisc@x4

  improve handling of debug messages in vfe.

Change 4263 on 2006/10/21 by chrisc@x4

  fix crash reported in <web.453677b9876cd74e72d86b490@news.povray.org>.

Change 4261 on 2006/10/17 by thorsten@host27i

  Adds stat for camera count as well as variable for sending camera index to 
  View::StartRender (however, does not implement selecting that camera yet)

Change 4260 on 2006/10/15 by calimet@lavender

  change default file gamma from 1.0 to 2.2

Change 4258 on 2006/10/14 by chormann@chho

  correcting 'FileGamma' and 'DisplayGamma' to 'File_Gamma' and 'Display_Gamma' 
  in warning messages

-------------------------------------------
Changes between 3.7.beta.15 and 3.7.beta.16
-------------------------------------------

Change 4256 on 2006/10/14 by chrisc@x4

  work around an issue caused by apparent resource starvation within windows.
  this would show itself as non-updating editor windows when switching tabs or
  focus - usually when running several instances of POVWIN - and is caused by
  CreateCompatibleBitmap() failing. substituting calls to CreateDIBSection()
  fixes the problem. NB I not been able to replicate the error on systems that
  do not have windowblinds installed, though I cannot say definitively if that
  is the cause.

Change 4252 on 2006/10/13 by calimet@lavender

  add support for 'pause when done' (closes bugzilla bug 5)

Change 4251 on 2006/10/13 by thorsten@host27i

  set background color in parser

Change 4248 on 2006/10/12 by thorsten@host27i

  changes alpha handling for rays not going straight to the background

Change 4246 on 2006/10/10 by chrisc@x4

  fixes 'Initial_Frame is ignored' issue (bugzilla bug #20).

Change 4244 on 2006/10/07 by chormann@chho

  improvements/fixes for the install script:
    - fixing problem with the install log (uninstall now works after user install)
    - added warning about existing povray executables.
    - some changes in the text messages.
    - changed a few -f tests to -r
    - preparation for different target platforms
      (TARGET_PLATFORM and TARGET_PLATFORM_NAME - AMD64 version commented out)

Change 4243 on 2006/10/05 by chrisc@x4

  improve temp file handling under windows vfe platform implementation.
  code now uses its own subdir under the windows temp dir, and also keeps
  track of temp filenames handed out so as to delete them on exit in case
  the core code doesn't do so. also now automatically permits read/writes
  in the temp dir when I/O restrictions are turned on.

Change 4242 on 2006/10/05 by chrisc@x4

  change WorkThreads INI option to Work_Threads for consistency.
  change bounding method command-line option from +b2 to +bm2 for the same reason.

Change 4241 on 2006/10/05 by chrisc@x4

  fix major (e.g. 100x or more when rendering menger.pov) slowdown when using
  BSP bounding, an orthographic camera (or any camera with non-constant origin),
  and large numbers of slow objects. this was due to InitRayContainerState() not
  having BSP support written for it yet.
  also added BSP support to CheckCameraHollowObject().

Change 4240 on 2006/10/04 by chrisc@x4

  add ability to close edit tab by middle-clicking on it.
  Improve parsing of POVWIN-specific command-line filenames containing single
    quotes.
  Add /EDITDLLPATH command-line parameter which allows the user to override the
    default DLL locations.
  Changed edit DLL filenames to include 'd' for debug builds; e.g. cmedit32.dll
    becomes cmedit32d.dll.

  NOTE: the above change means that if you are debugging POVWIN and haven't 
  built and installed the debug DLL's, the editor won't load. Either build and 
  install the debug editor DLL's (codemax and cmedit projects), or copy 
  cmedit32.dll and povcmax32.dll to cmedit32d.dll and povcmax32d.dll 
  respectively, and place them into the default POVWIN install bin dir.
  Ditto  for the 64-bit ones if you're using Win64.

Change 4239 on 2006/10/02 by chrisc@x4

  add SEH and minidump generation to windows code.

Change 4233 on 2006/09/30 by chrisc@x4

  some code for experimental vidcap support.
  add 'beta_feature_flag' which works like 'experimental_flag' but also warns 
  feature may go away entirely.
  
  the vidcap code is an outgrowth of a real-time-raytracing experiment done 
  for IDF fall 2006, where a live image from a webcam was mapped onto a moving 
  curved reflective surface in real-time. the original code was a quick hack; 
  this is an attempt to provide it in a more usable framework that doesn't 
  break standard use of POV as I think it's worth further experimentation.
  
  currently this feature only works with image maps but there's no reason why 
  it can't work with other things that use images. the implementation returns 
  a pov::Image which is updated either continuously or when a UpdateImage() 
  request is made. no double-buffering is used in the windows implementation 
  yet.
  
  to implement this on other platforms, define the macro POV_VIDCAP_IMPL in 
  your syspovconfig.h file. the value of this macro should be the name of a 
  class which has a default constructor. it should also implement the methods 
  Init(), UpdateImage(), and WaitFrame(). see syspovimage.h in this submission 
  for an example, as well as the other files in the windows rtrsupport 
  directory.

Change 4232 on 2006/09/30 by chrisc@x4

  fix for error line/col reporting.

Change 4229 on 2006/09/29 by chrisc@x4

  change default number of threads to number of CPU's (was number of CPU's * 2).

Change 4213 on 2006/09/16 by chrisc@x4

  add ability to specify thread count from render menu. NB this value is not saved.
  tweak process priority for normal priority selection.

Change 4208 on 2006/09/14 by chrisc@x4

  fix for bugzilla bug #15 ('non-terminating unix POV-Ray').

Change 4204 on 2006/09/09 by nkopp@lightspeed

  Fix problem with photons in grenadine.pov
  It turns out that somehow when rendered with +b2 (BSP tree partitioning),
  we end up with LOTS of photons in the exact same spot (locaton 
  -0.865566,1.846830,-0.464796).  The code finds the average density of
  the scene by sampling points, and whenever it would sample that point,
  it would compute a density of infinity (because it would reach the maximum
  number of photons, and return a zero-radius surface area for those
  photons).
  
  The current fix is to make the system ignore samples that give zero-radius
  (infinite density) results.
  
  The "real" fix will be to figure out why we end up with over 100 photons
  in one spot when rendering with BSP, but not when rendering with the old
  block partitioning.

Change 4203 on 2006/09/04 by chormann@chho

  changed density file fix (change 4195) to use 'size_t' instead of 'long'.

Change 4201 on 2006/09/04 by chrisc@x2

  Fix nasty heap overwrite in BVH code. See <web.44e5a00bfcc26e0fc717c9af0@news.povray.org>.
  
  This bug caused delayed crashes and would not show up in debug mode.
  It's been in the codebase since at least version 3.5, if not earlier.

Change 4195 on 2006/08/31 by chormann@chho

  fixed the density file size limitation by changing 'int' to 'long' for
  various index variables in DF3 reading, pattern evaluation and data structure.
  See <web.44f40e4698b0d9e4b399450c0@news.povray.org>

Change 4194 on 2006/08/30 by calimet@nx

  fix "Crash when assigning materials" issue reported in <44f596fa$1@news.povray.org>

Change 4193 on 2006/08/29 by calimet@nx

  [docs] [unix] fix navigation problems (malformed <a name></a> tags); add
  'id' attribute together with 'name' and post-process their values for better
  w3c conformance; workaround to missing images (gif->png) when building the docs
  using the default "skip ta" makedocs option.

Change 4191 on 2006/08/23 by calimet@nx

  fix broken RLE Targa (+FC) output causing program abort (pixel overflow)

Change 4190 on 2006/08/23 by calimet@nx

  fix PNG output: corrupted file (missing IEND chunk) and potential memory leak

Change 4181 on 2006/07/27 by chrisc@x2

  benchmark.cpp fix.

Change 4173 on 2006/07/21 by chrisc@x2

  gamma changes, revert to beta.10 behaviour with some tweaks for more 
  extensive version checking.
  
  In particular, specifying -MV3.7 or later via an INI file or the 
  command-line is taken at higher precedence than a #version 3.6 (or 
  lower) in the scene file when it comes to assigning the default state of 
  gamma correction (on/off, not its actual value if on). the value used 
  when it is on is determined by either Display_Gamma (if given) or 
  DEFAULT_DISPLAY_GAMMA otherwise. Similar steps are taken for the new 
  File_Gamma option.
  
  The actual value of assumed_gamma is not passed on; this prevents its 
  use for anything other than turning gamma on or off (which is what the 
  majority of scenes did with it). Those scenes that (mis)used 
  assumed_gamma to adjust the scene appearance outside of the needs of the 
  user's actual display gamma will need to either be altered to suit, or 
  to be run with an adjusted Display_Gamma and File_Gamma.
  
  NB users are warned that assumed_gamma support will be removed entirely 
  in a later 3.7 revision.

Change 4170 on 2006/07/20 by thorsten@host27

  Adds gamma correction to file output. Need to determine if gamma 
  correction of alpha channel makes sense (3.6 and earlier manipulated 
  gamma in some strange way when merging filter and transmit). Further 
  added DEFAULT_ASSUMED_GAMMA macro to provide full backward compatibility 
  features for assumed_gamma (includes a strong warning).

Change 4169 on 2006/07/19 by thorsten@host27

  Changes display gamma to consider assumed_gamma for legacy scenes and 
  issue extensive warning messages to inform users about the change and 
  how to fix their scene file

Change 4168 on 2006/07/03 by thorsten@host27

  Adds "WorkThreads" INI option and "WT" command-line option to set 
  MaxRenderThreads

Change 4163 on 2006/06/22 by nkopp@lightspeed

  fix media photons (gather); also refactor some photon shooting code

Change 4161 on 2006/06/22 by chormann@chho

  implementing most of the functionality of old unix.cpp in a new 
  UnixOptionsProcessor class.  This provides options processing for the 
  standard options as well as for the display subsystems.
  
  This adds to the Unix frontend:
  
    - io-restrictions
    - povray.ini file processing
    - help display
  
  Further minor tweaks.

Change 4152 on 2006/06/18 by thorsten@host27

  Adds FileGamma option
Change 4141 on 2006/05/10 by chrisc@x2

  fix default blend map destruction issue.

Change 4132 on 2006/05/01 by chrisc@x2

  fix object count when no bounding is used, rendering empty file leaves stop 
    icon, and winpov exit command not working issues as reported in 
    <442df1da$1@news.povray.org>.

Change 4131 on 2006/05/01 by chrisc@x2

  fix photon memory issue referred to in <web.444b4f4ed5b924f08b9c27240@news.povray.org>.

Change 4129 on 2006/05/01 by chrisc@x2

  don't send mem usage stats as they are not accurate. have to fix this before
    release.

Change 4128 on 2006/05/01 by chrisc@x2

  make render failure messages a little more informative.

Change 4121 on 2006/04/05 by chrisc@x2

  ensure first texture is supplied when parsing tiles declaration.

Change 4120 on 2006/04/05 by chrisc@x2

  add exception translation (native windows to pov_base::Exception).
  reconfigure backend to report some exceptions more clearly.

Change 4117 on 2006/04/03 by chrisc@x2

  fix issue with ray interior being removed during evaluation of area lights.
  fix issue with intersection min depth being too coarse (e.g. the liquid in 
    the glass in balcony.pov did not render).

Change 4116 on 2006/04/03 by chrisc@x2

  check for zero-sized area light array parameters.

Change 4114 on 2006/04/02 by chrisc@x2

  fix sombrero.pov bug reported in <web.442c3cd3ccb62fd8c7294af50@news.povray.org>.

Change 4113 on 2006/04/02 by chrisc@x2

  improve error reporting when exception is caught in renderbackend.
  also add range-checking of start/end column/row against render width/height.

Change 4112 on 2006/04/02 by chrisc@x2

  bugfix for printing of max depth stopped nodes per node.

Change 4111 on 2006/04/01 by chrisc@x2

  make sure parse and bounding times are included in stream output.
  implement debug output to stream.

Change 4107 on 2006/04/01 by chrisc@x2

  fix render percentage error when a large number of pixels are being rendered.
  a few other tweaks.

Change 4100 on 2006/03/29 by chrisc@x2

  change default BSP child access cost to 5.0.
  tweak index insertion to massively speed up build of large trees
    (e.g. abyss.pov build was 45s now 3s).
  more changes to BSP tree reading.

Change 4098 on 2006/03/28 by chrisc@x2

  small but important fix to BSP tree traversal - fixes occasional missing 
  object which could occur where the ray origin lay exactly on the splitting 
  plane.

Change 4096 on 2006/03/27 by chrisc@x2

  BSP tweak, seems to speed things up a little.
  also implement more robust support for reading externally-generated BSP trees.

Change 4092 on 2006/03/26 by chrisc@x2

  should fix startup problems reported for initial release of beta.12.

Change 4089 on 2006/03/26 by chrisc@x2

  some fixes to bounding and object count statistics. fix typo in attribute name.

Change 4088 on 2006/03/26 by chrisc@x2

  no longer use intel's math library (too much hassle for too little gain).

Change 4086 on 2006/03/26 by chrisc@x2

  fix bug where some feature advice dialogs would be shown off-screen.

Change 4084 on 2006/03/26 by chrisc@x2

  fix spheresweep copy bug reported in <43fbaf97$1@news.povray.org>.

Change 4083 on 2006/03/26 by chrisc@x2

  fix 'aa incorrectly reported to be on' issue reported in
    <43fc75f9$1@news.povray.org>.

Change 4082 on 2006/03/07 by thorsten@host27i

  Adds progress and stats reporting for BSP bounding

Change 4081 on 2006/03/07 by thorsten@host27i

  Fixes camera inside media/interior mostly lost bug

Change 4079 on 2006/03/02 by chrisc@x2

  add means of setting BSP cost-function constants via INI file.
  this is possibly temporary.

Change 4063 on 2006/02/25 by chrisc@x2

  fix bug in BoundingTask::SendFatalError that was hiding real cause of
    some errors.

Change 4062 on 2006/02/25 by chrisc@x2

  some fixes for BSP code.
  now works much better. code changed to read more like Eric Haine's
    article so I can follow it more easily.
  still work to be done to improve it.

Change 4061 on 2006/02/19 by chrisc@x2

  fix debug message output.

Change 4060 on 2006/02/19 by chrisc@x2

  AA method 1 block artifact fix (see <43ebe0bc@news.povray.org>).
  also correct some jitter option issues and add slight optimization if
    jitter is turned off.
  NB it is still technically possible that block-boundary AA artifacts
    could occur but they are much less likely.

Change 4058 on 2006/02/18 by chrisc@x2

  fix bug in generation of lit intervals for media.

Change 4057 on 2006/02/17 by chrisc@x2

  fix "light doesn't pass through transparent image_map" issue
    (<43a97c75$1@news.povray.org>).

Change 4055 on 2006/02/17 by chrisc@x2

  Fix 'trace fails with no_image object in union' bug reported in
    <43f57a9d$1@news.povray.org>.

Change 4054 on 2006/02/17 by chrisc@x2

  fix issue where cancelling a render may not work if all CPU resources
    are committed to a render.

Change 4049 on 2006/02/12 by thorsten@host27i

  Adds smarter handling of bbox test for trivial objects
    (boxes, spheres, etc)

Change 4041 on 2006/02/10 by thorsten@host27i

  Adds new BSP code
  Threading control uses condition variable
  Changes platform-config include file logic
  Misc tweaks to error messages
  Enables parser stats (incomplete)
  Fixes generic timer bugs

Change 4040 on 2006/02/10 by chrisc@x2

  a few fixes for the new-style povwin render window.

Change 4039 on 2006/02/08 by chrisc@x2

  fix 'unrecognized file format' warning when HDR output is selected.

Change 4038 on 2006/02/08 by chrisc@x2

  fix flipped image HDR reading bug (<43e8190e@news.povray.org>)

Change 4037 on 2006/02/08 by chrisc@x2

  fix dispersion bug (long render times).

Change 4034 on 2006/02/05 by chrisc@x2

  (re-)implement display retention and bitmap preservation during animation.

Change 4029 on 2006/01/30 by chrisc@x2

  fix to image filename generation and rendered pixel counting.

Change 4026 on 2005/12/07 by chrisc@x2

  add LF to lineoutput.
  infer input directory from input file path if not supplied.

Change 4025 on 2005/12/07 by chrisc@x2

  fix gamma assignment in PNG output.

Change 4023 on 2005/12/05 by chrisc@x2

  version 3.7.beta.11a.

Change 4001 on 2005/11/08 by chrisc@x2

  change Cone_Tolerance to 1.0e-9 as per suggestion from DKB.

Change 4000 on 2005/10/22 by chrisc@x2

  hack fix into findfile stuff to accomodate relative filenames.

Change 3999 on 2005/10/22 by chrisc@x2

  fix a few problems in option parsing WRT unrecognized keywords.
  also mark Buffer_Output and Buffer_Size as superceded keywords (generates
    parse error but doesn't stop render).

Change 3995 on 2005/10/19 by chrisc@x2

  fix delayed crash caused by double-free of POVMS data.

Change 3994 on 2005/10/19 by chrisc@x2

  work around crash when All_File is turned on.

Change 3993 on 2005/10/18 by chrisc@x2

  a few misc changes.

Change 3992 on 2005/10/18 by chrisc@x2

  provides for output gamma correction.

Change 3990 on 2005/10/17 by chrisc@x2

  second part of gamma changes, still have file output to do.

Change 3987 on 2005/10/17 by chrisc@x2

  improve responsiveness by using events for control thread waits
  (esp. useful on fast animations).

Change 3986 on 2005/10/16 by chrisc@x2

  fix input image file default type selection.

Change 3985 on 2005/10/16 by chrisc@x2

  first part of gamma correction changes.

Change 3981 on 2005/10/13 by chrisc@x2

  some speedups for BSP tree iteration.

Change 3980 on 2005/10/13 by chrisc@x2

  fix for truetype objects within CSG.

Change 3979 on 2005/10/12 by thorsten@host27i

  Adds bounding method setting
  SceneData stores output file type for use

Change 3978 on 2005/10/12 by chrisc@x2

  this gets rid of the visual artifacts in bsptree tracing. still
  need to optimize the bbox tests and more.

Change 3975 on 2005/10/11 by chrisc@x2

  one bsp fix; helps somewhat but some issues still remain.
  temporarily make bsptree a void* for faster rebuilds.

Change 3973 on 2005/10/10 by thorsten@host27i

  Intersection test with bounds for BSP tree like for BVH

Change 3969 on 2005/10/09 by thorsten@host27i

  Adds experimental BSP tree tracing

Change 3949 on 2005/10/08 by thorsten@host27i

  Unified handling of file names and paths as UCS2

Change 3944 on 2005/10/06 by chrisc@x2

  find file now looks in current dir.
  fix logic in output filename generation code.

Change 3941 on 2005/10/02 by chrisc@x2

  some perl modules (+ example and generator) for helping
  makefile generation.

Change 3940 on 2005/09/30 by chrisc@x2

  a few tweaks to improve error display location in source files.

Change 3939 on 2005/09/30 by chrisc@x2

  fix cancel state in windows frontend.

Change 3934 on 2005/09/28 by thorsten@host27i

  Adds Path class
  Adds stream to file redirection
  TaskQueue now processes one Task per call
  File searching is now done by frontend
  Fixes misc typos

Change 3932 on 2005/09/23 by chrisc@x2

  fix some memory leaks in radiosity code.

Change 3930 on 2005/09/23 by chrisc@x2

  tiny but important fix to BSP cost function.

Change 3929 on 2005/09/22 by thorsten@host27i

  Changes BSP cost algorithm to work almost right

Change 3928 on 2005/09/22 by thorsten@host27i

  Adds exception handler support to Task class
  Fixes comments and semicolons in misc places
  Adds a missing method to renderbackend

Change 3926 on 2005/09/22 by thorsten@host27i

  Adds failed state for view

Change 3925 on 2005/09/22 by chrisc@x2

  fix uninitialized variable.
  make default parse or render fail error less confusing.

Change 3924 on 2005/09/22 by chrisc@x2

  fix crash in read_image_file.

Change 3923 on 2005/09/21 by chrisc@x2

  add visual bounding volumes to bsptree dump.

Change 3922 on 2005/09/21 by chrisc@x2

  a fix and more debugging stuff for bsptrees.

Change 3920 on 2005/09/20 by thorsten@host27i

  Completes BSP cost function (needs testing)
  Adds automatic recursion limit to BSP building

Change 3912 on 2005/09/20 by thorsten@host27i

  Changes BSP code to use multiset

Change 3911 on 2005/09/20 by chrisc@x2

  some fixes to bsptree bounding. this checkin does not fix the issue
  with duplicate keys in the min/max sets.

Change 3910 on 2005/09/19 by chrisc@x2

  windows changes - remove rerun handler.
  add stack walker, radiosity progress, display gamma.
  also misc fixes.

Change 3909 on 2005/09/18 by thorsten@host27i

  Adds gamma correction support to display

Change 3906 on 2005/09/18 by thorsten@host27i

  Adds more frequent stop-checking to all render tasks
  Adds two tiny radiosity speed optimisations
  Adds progress reporting for radiosity
  Adds radiosity progress output in frontend

Change 3905 on 2005/09/18 by chrisc@x2

  fix issue causing acne in e.g. cornell scene (with or without radiosity).
  [SHADOW_TOLERANCE was not being taken into account in blocking object intersection tests].

Change 3904 on 2005/09/17 by chrisc@x2

  radiosity now working a lot better.

Change 3900 on 2005/09/13 by chrisc@x2

  add Render_Block_Size INI option (+BS as command-line option).

Change 3899 on 2005/09/13 by chrisc@x2

  fix crash caused by resource exhaustion (too many threads); refer <4303d267$1@news.povray.org>.

Change 3897 on 2005/09/13 by chrisc@x2

  address state issue referred to in <web.42af2f04951c51e46a3607400@news.povray.org>.

Change 3895 on 2005/09/13 by chrisc@x2

  tweak editor handling of missing files.
  prevent multiple message-box display when switching focus and a file is modified or updated.

Change 3893 on 2005/09/13 by thorsten@host27i

  Mosaic preview now computes pixels rendered just like regular rendering,
    which will cause the counters to loop for each preview step but they will
    otherwise be correct. More information may be added latter for more accurate
    progress reporting

Change 3892 on 2005/09/13 by chrisc@x2

  Fix output file reporting issue reported in <web.430dc75ff23d654e726bd13c0@news.povray.org>.
  few other minor tweaks.

Change 3891 on 2005/09/13 by chrisc@x2

  ImageProcessing::WriteImage() now returns the name of the file it wrote.

Change 3890 on 2005/09/10 by thorsten@host27i

  Adds dispersion (still to be tested)
  Fixes misc little issues

Change 3889 on 2005/09/10 by thorsten@host27i

  Attempt to fix a mosaic preview related pointer problem

Change 3888 on 2005/09/10 by chrisc@x2

  fix render window re-display problem.
  ensure local povray.ini search location is in source file dir.
  add handler to throw std::bad_alloc on out-of-memory during operator new*.
  misc changes to vc.net project file.

Change 3887 on 2005/09/10 by chrisc@x2

  use FileMappedImageAllocator in windows project.

Change 3886 on 2005/09/10 by chrisc@x2

  improve error reporting when image allocation fails.

Change 3882 on 2005/09/10 by chrisc@x2

  handle out-of-memory condition when calling Image::Create().

Change 3881 on 2005/09/10 by chrisc@x2

  a few fixes for mosaic preview.

Change 3880 on 2005/09/10 by chrisc@x2

  radiosity fix.

Change 3879 on 2005/09/09 by thorsten@host27i

  Adds support for file-mapped image memory
  Requires FILE_MAPPED_IMAGE_ALLOCATOR to be defined to be a standard STL
    allocator that will be used when file-mapped image is required.
  Adds support for mosaic preview.

Change 3878 on 2005/09/08 by chrisc@x2

  focal blur bugfix.

Change 3876 on 2005/09/08 by thorsten@host27i

  Force finding free grid places in focal blur

Change 3875 on 2005/09/07 by thorsten@host27i

  Fixes of by one error in focal blur code

Change 3870 on 2005/09/06 by thorsten@host27i

  Fixes trace depth returning for radiosity

Change 3869 on 2005/09/06 by thorsten@host27i

  First version with radiosity sort of working (it is a "bit" too dark)

Change 3868 on 2005/09/05 by thorsten@host27i

  Concludes some major reorganisation:
    All dependencies on global variables in the radiosity
      code have been identified. However, the code cannot work
      as is until the variables are passed along properly.
      Vector and color classes had a rather serious (but easy
      to overlook) bug that did never cause any problems before
      because the features were never used before.
    Misc little tweaks to previous changes

Change 3867 on 2005/09/04 by thorsten@host27i

  Mostly compiling major reorganisation of tracing, photons and radiosity
    Media has been decoupled from tracing fairly cleanly
    Media has been mostly decoupled from photon tracing (but not completely)
    Radiosity has a structure better separating data and operations (but doesn't compile yet)
    Misc header dependencies have been removed

Change 3864 on 2005/09/04 by thorsten@host27i

  Misc changes preparing for radiosity
    Cleans up quality settings use
    Cleans up max trace level and adc bailout use
    Cleans up dependencies on output file name in backend
    Cleans up dependencies on output file type in backend
    Reverts to set in block tracking
    Adds fixmes to various places
    Adds operators to colour classes
    Adds warnings for non-longer available global settings
    Fixes misc dependencies on global stuff or marks it

Change 3863 on 2005/08/18 by chrisc@x2

  fix AA method 2 crash reported in <430358ed@news.povray.org>.

Change 3861 on 2005/08/17 by chrisc@x2

  animation handling tweak for windows.

Change 3860 on 2005/08/17 by chrisc@x2

  a bit more work on crackle.

Change 3857 on 2005/08/14 by thorsten@host27

  Adds back buffering of samples to AA method 2 (should be as fast as in 3.6 now)

Change 3855 on 2005/08/13 by chrisc@x2

  implement per-thread crackle cache.

Change 3853 on 2005/08/13 by thorsten@host27

  Adds parsing task queue
  Moves bounding into parsing task queue (bounds don't for each view change)
  New bounding location needs testing!

Change 3847 on 2005/08/09 by chrisc@x2

  add HDR file support (RGBE).

Change 3841 on 2005/08/01 by chrisc@x2

  exr support now uses the supplied streams and thus the correct filenames.

Change 3839 on 2005/07/29 by chrisc@x2

  adds EXR file support using OpenEXR library.
  very rough first pass, no options supported yet.
  currently input and output file names are hard-coded; this has to be fixed.

Change 3836 on 2005/07/26 by thorsten@host27

  Should fix an animation clock jump error

Change 3835 on 2005/07/22 by chrisc@x2

  temporary change to SMALL_TOLERANCE just for beta.7. Need to change it back later.

Change 3834 on 2005/07/22 by chrisc@x2

  windows output stream changes.

Change 3833 on 2005/07/22 by chrisc@x2

  fix version number display.

Change 3831 on 2005/07/20 by chrisc@x2

  bump version to 3.7.beta.7.

Change 3829 on 2005/07/17 by thorsten@host27

  Adds clock extraction to backend and clock use parser

Change 3828 on 2005/07/17 by chrisc@x2

  animation support under windows, first pass.
  needs core code support for clock to work.

Change 3825 on 2005/07/17 by chrisc@x2

  make render cancellation more responsive in the presence of a large number of threads.

Change 3824 on 2005/07/17 by chrisc@x2

  fix continue code, also change logic a bit.
  also the old behaviour of skipping a render if a completed output file is
    present is not yet implemented.

Change 3823 on 2005/07/16 by chrisc@x2

  get code from last few changes building under windows.
  fix a few bugs in continue code. this is a WIP as continue still won't work under
    certain skip list conditions.

Change 3821 on 2005/07/14 by thorsten@host27

  Adds basic animation support
  Makes misc pointers smart

Change 3819 on 2005/07/14 by thorsten@host27

  Adds continue-trace feature.  Currently consumes about 16*pixels bytes for
    continue-trace file. Compression with zlib probably should be added as an option.
  Fixes a bug in reading of message objects
  Tweak to file ids

Change 3818 on 2005/07/12 by thorsten@host27

  Adds backend support for continue trace
  Adds partial frontend support for continue trace

Change 3817 on 2005/07/10 by thorsten@host27

  Replaces POV_RAND with a new pseudo-random engine that is thread-safe
  as it just generates a predefined sequence of random numbers. This may
  cause visual differences in some places. However, noise tables are still
  initialised using the old random number algorithm, so there should be no
  visual difference when rendering *plain* noise.

Change 3816 on 2005/06/17 by chormann@chho

  core code changes required to build with gcc on linux:
    - backend/povray.cpp: changing "boost\version.hpp" to "boost/version.hpp" commenting
      hardcoded input file parameters.
    - base/pov_err.h: some small, hopefully uncritical changes to make it compatible to gcc.

Change 3815 on 2005/06/17 by chormann@chho

  fix for problem with C99_COMPATIBLE_RADIOSITY

Change 3813 on 2005/06/14 by chrisc@x2

  fix memory leak in photon code introduced in change #3804.

Change 3811 on 2005/06/13 by chrisc@x2

  csg merge fix from Massimo Valentini.

Change 3810 on 2005/06/13 by chrisc@x2

  quadric bounding fix from Massimo Valentini.

Change 3809 on 2005/06/13 by chrisc@x2

  add windows thread startup/cleanup support.
  set ideal processor for each thread.

Change 3800 on 2005/05/20 by chrisc@x2

  fix bug reported in <428de855@news.povray.org> re:sunsethf.pov.

Change 3796 on 2005/05/19 by chrisc@x2

  work around SMP bug in trace related to lighting code altering lightsources during render.
  for now each thread has its own copy of the lightsources. the lighting code should perhaps be
  fixed to treat lightsources as const, in which case this workaround can go away.

Change 3795 on 2005/05/19 by chrisc@x2

  add fixed allocator useful for stack-based stl collections, and modify Ray to use it.
  add some infrastructure support for call profiling (more to come).
  fix bug in photon code related to previous fix (see #3785).

Change 3791 on 2005/05/17 by chrisc@x2

  small but important fix for photon building that fixes one speed issue.

Change 3785 on 2005/05/13 by chrisc@x2

  fix scattering media problem reported in <427ca163@news.povray.org>.
  This was two separate bugs; the media was sometimes being evaluated twice,
  causing the result to be too dark, and the aa_threshold was not being set
  correctly, causing artifacts. This also fixes <427c0121@news.povray.org>.

Change 3784 on 2005/05/13 by chrisc@x2

  parser now honors Split_Unions and Remove_Bounds options.

Change 3783 on 2005/05/13 by chrisc@x2

  undo changes to SMALL_TOLERANCE and MAX_DISTANCE submitted in #3320.
  This fixes the lathe artifacts bug reported in <427c0f95@news.povray.org>.
  It also fixes the sphere_sweep issue alluded to in #3759.

Change 3781 on 2005/05/10 by chrisc@x2

  Fix no_image and no_reflection issues reported in <427c1900@news.povray.org>.

Change 3780 on 2005/05/10 by chrisc@x2

  fix area light orient issue reported in <427c14ef@news.povray.org>.

Change 3778 on 2005/05/07 by chrisc@x2

  fix issue where a new clip statement would overwrite a previous one rather than appending to it.
  fix speed issue with quadrics by reverting to old bbox calculation method.
  note however that this method is faulty in some circumstances (see comments in quadrics.cpp).

Change 3776 on 2005/05/06 by chrisc@x2

  fix a swathe of memory leaks.
  add boost library to library usage list.

Change 3775 on 2005/05/06 by chrisc@x2

  fix leak of transform memory in numerous shapes.
  Note: some shapes (notably CSG) do not copy the source transform. Have to check why.

Change 3768 on 2005/05/05 by chrisc@x2

  fix indexed PNG alpha problem reported in <42765ef3$1@news.povray.org>.

Change 3767 on 2005/05/05 by chrisc@x2

  fixes area lights.

Change 3766 on 2005/05/05 by chrisc@x2

  fix crash during trace() of lathe reported in <42796797@news.povray.org>.

Change 3765 on 2005/05/04 by chrisc@x2

  improve handling of cancel_render() a bit (provide retry).
  other windows tweaks.

Change 3764 on 2005/05/04 by chrisc@x2

  fix for max_trace_level calculation and display (see <42769105@news.povray.org>).
  Also apply texture list fixes from #3761 to shadow rays.

Change 3763 on 2005/05/04 by chrisc@x2

  fix memory leak.

Change 3762 on 2005/05/04 by chrisc@x2

  make code more responsive to cancel/pause requests.

Change 3761 on 2005/05/04 by chrisc@x2

  fix speed issues reported in <42769f6d@news.povray.org>.
  ComputeTextureColour() was tracing a full series of rays (potentially up to Max_Trace_Level)
  for each detected texture in multi-component objects (e.g. blobs) even when the multi_texture
  flag was not set.

Change 3760 on 2005/05/03 by chrisc@x2

  fix for shadow problem mentioned in <42769f6d@news.povray.org>.
  (other issues from <42769f6d@news.povray.org> still remain outstanding).

Change 3759 on 2005/05/03 by chrisc@x2

  fix sphere_sweep bug reported in <42773e51@news.povray.org>.
  There still seems to be a minor accuracy problem that was not visible in 3.6.

Change 3758 on 2005/05/03 by chrisc@x2

  fix 'inverting pre-declared union' crash reported in <42769b59@news.povray.org>.

Change 3756 on 2005/05/03 by chrisc@x2

  focal blur fix, part 2 of 2.

Change 3750 on 2005/05/03 by chrisc@x2

  partial fix for focal blur problem.

Change 3749 on 2005/05/03 by chrisc@x2

  fix omnimax camera bug reported in <42775c1b$1@news.povray.org>, plus several other related camera issues.

Change 3746 on 2005/05/03 by chrisc@x2

  fix for facets pattern crash reported in <42773fab$1@news.povray.org>.

Change 3744 on 2005/05/01 by chrisc@x2

  fix recursive memory leak when a CSG declare is redefined.

Change 3743 on 2005/05/01 by chrisc@x2

  fix render area selection.

Change 3742 on 2005/05/01 by thorsten@host27

  Should fix partial render area problems
  Should fix state errors in frontend due to missing information in backend messages

Change 3732 on 2005/04/30 by chrisc@x2

  fix CSG merge issue reported in <42645c3b@news.povray.org>.
  also re-implement some of the TODO code in Link_To_Frame.
  re-implement error message when photon file fails to load in photons.cpp.

Change 3730 on 2005/04/30 by chrisc@x2

  add warning and better progress reporting to photons.

Change 3729 on 2005/04/30 by chrisc@x2

  update to beta.3, set windows expiry date to 15 May.

Change 3728 on 2005/04/29 by chrisc@x2

  hopefully final part of hollow media fixes.
  misc other tweaks.

Change 3727 on 2005/04/29 by chrisc@x2

  work in progress; some fixes for hollow object media issue.
  add CheckCameraHollowObject() method to View (this needs more work).
  various minor changes.

Change 3726 on 2005/04/29 by chrisc@x2

  centralise handling of filter/transmit<->alpha conversion in Colour class.
  add methods allowing colours and images to be initialised from iterators.

Change 3725 on 2005/04/28 by chrisc@x2

  re-enable alpha display in render window for windows port.

Change 3724 on 2005/04/28 by chrisc@x2

  fix alpha bug reported in <web.426402d627a031d914107e060@news.povray.org>
  fix no_image bug reported in <web.426402d627a031d914107e060@news.povray.org>
  pass render settings to trace task (more to do on this subject).
  add basic RGBFT<->RGBA conversion support to image classes.
  turn Test_Ray_Flags and Test_Ray_Flags_Shadow into inline functions to make debugging easier.
  change default bounding threshold back to 3 as per v3.6.
  fix alpha inversion bug in BMP, Targa, and PNG file reading/writing.
  numerous changes to ensure that RGBA or GrayA images have the alpha channel initialised to 1.0, not 0.0.
  NB there is still a difference in alpha output compared to v3.6 which I have to chase down.

Change 3723 on 2005/04/26 by chrisc@x2

  fix for crash mentioned in <42689685@news.povray.org>.
  This was caused by a trace() intersecting a blob where the threaddata's blob intervals array had not been resized.
  N.B. we need to check other objects that use cached arrays for the same behaviour.

Change 3722 on 2005/04/26 by chrisc@x2

  fix noise generator default issue reported in <426898db@news.povray.org>.
  this was also causing differences elsewhere in the code (e.g. in the appearance of the irid in the previous fix).
  
Change 3721 on 2005/04/25 by chrisc@x2

  fixed irid problem reported in <42680b39@news.povray.org>.
  Also fixed similar issue with DepositMediaPhotons.
  We need to audit codebase to check for more of these (class Colour being passed by value).

Change 3720 on 2005/04/25 by chrisc@x2

  partial fix for hollow media issue reported in <42680e58@news.povray.org>.
  also tweaked ComputeShadowMedia() as it didn't seem to make sense when called from TraceShadowRay().

Change 3719 on 2005/04/25 by chrisc@x2

  fix for area light problem from Massimo Valentini.

Change 3718 on 2005/04/25 by chrisc@x2

  make quick_colour work again as it should (more or less).
  also fix problem where language version was being extracted from quality setting.

Change 3715 on 2005/04/24 by chrisc@x2

  misc windows changes, mostly related to using intel emt64 compiler.

Change 3713 on 2005/04/24 by chrisc@x2

  changes mostly to ensure that math.h isn't included before config.h.
  this is to allow config.h to optionally include a compiler-specific math library such as Intel's mathimf.h.

Change 3707 on 2005/04/19 by _abx_@_abx_

  Build fix for MinGW.

Change 3700 on 2005/04/18 by thorsten@host27

  CSG inversion bug fixes
  Misc other changes

Change 3698 on 2005/04/18 by thorsten@SMP

  Fixes shadow flag copying bug

Change 3696 on 2005/04/18 by thorsten@host27

  Adds max trace level check and trace level incrementing to TraceShadowRay

Change 3693 on 2005/04/18 by chrisc@x2

  I/O restrictions stuff.

Change 3692 on 2005/04/18 by chrisc@x2

  fix crash reported in <4263125b@news.povray.org> and one related bug.

Change 3691 on 2005/04/18 by chrisc@x2

  fix render quality options output.
  change references to 'CPU(s)' to 'thread(s)'.
  update render time output to include fractional seconds.

Change 3690 on 2005/04/17 by chrisc@x2

  tweak output filename and path logic.

Change 3689 on 2005/04/17 by thorsten@host27

  Fixes AA method selection and enabling
  Fixes image percentage size computation

Change 3686 on 2005/04/17 by chrisc@x2

  fix for BMP reading.

Change 3685 on 2005/04/17 by chrisc@x2

  add 'bmp' token to parser.

Change 3684 on 2005/04/17 by chrisc@x2

  file output should default to on.

Change 3683 on 2005/04/17 by chrisc@x2

  add output file type '+FB' (bmp).
  add macro to equate SYS file type to internal file type where supported.

Change 3677 on 2005/04/17 by thorsten@host27

  Fixes AA method 2 brightness issue

Change 3675 on 2005/04/17 by thorsten@host27

  Fixes rendering area bug

Change 3674 on 2005/04/17 by thorsten@host27

  Fixes no-display crash
  Fixes image closing bug
  Tweak to some radiosity local vars

Change 3673 on 2005/04/17 by chrisc@x2

  windows stuff: customise error/warning message handling.
  restore ability to open error file in editor (note: missing column number).
  introduce helper class for error/warning messages.
  remove some old code.

Change 3672 on 2005/04/16 by nkopp@impulse

  add initialization for lots of photon-releated variables

Change 3665 on 2005/04/15 by thorsten@host27

  Timing information

Change 3655 on 2005/04/15 by thorsten@host27

  Adds shadow ray cache stat

Change 3652 on 2005/04/15 by thorsten@host27

  we now have a shadow cache again

Change 3651 on 2005/04/15 by thorsten@SMP

  AA method 1 and 2 fully functional now

Change 3649 on 2005/04/15 by thorsten@host27

  Restores AA method 2

Change 3644 on 2005/04/15 by thorsten@host27

  Temporary solution for removed identifiers

Change 3642 on 2005/04/15 by chrisc@x2

  implement cleanup when parse fails.

Change 3640 on 2005/04/15 by chrisc@x2

  update built-in benchmark.

Change 3639 on 2005/04/15 by chrisc@x2

  make sure photon task exits promptly if requested.
  allow exception to be passed to Error() and ErrorAt() for throwing.
  clean up parser on parse error.
  ensure language version gets set to MessageFactory when changed.
  fix apparent bug in old tokenizer warning code.

Change 3637 on 2005/04/14 by thorsten@host27

  Adds photon stats and rendering timing output

Change 3636 on 2005/04/14 by thorsten@SMP

  Enable radiosity in view

Change 3629 on 2005/04/14 by thorsten@host27

  Adds version warning
  Adds basic radiosity support code

Change 3628 on 2005/04/14 by thorsten@host27

  Adds shadow stat counter and adds misc stats outputs

Change 3627 on 2005/04/14 by chrisc@x2

  fix for another bbox issue.

Change 3625 on 2005/04/13 by nkopp@impulse

  fix the photon "shadow blocking" problem for both
    media and surface photons

Change 3620 on 2005/04/13 by chrisc@x2

  add some more stats back in.

Change 3619 on 2005/04/13 by thorsten@host27

  Some changes to fix shadow bounding box test of shadowless objects
  Adds back trace level statistic
  Adds Cooperate call to photons (so building can be interrupted)

Change 3618 on 2005/04/13 by thorsten@host27

  Adds back basic stats

Change 3617 on 2005/04/13 by thorsten@SMP

  Focal blur is back! Should work with AA, too now!
  Fixed what seems like a bug in refraction, too.

Change 3615 on 2005/04/13 by chrisc@x2

  small but important interior fix!

Change 3614 on 2005/04/13 by thorsten@host27

  Noise generator global variable access no longer needed

Change 3613 on 2005/04/13 by thorsten@host27

  Noise setting, focal blur, bounding for show-rays

Change 3612 on 2005/04/13 by nkopp@impulse

  mostly fixed media photons.

Change 3608 on 2005/04/12 by thorsten@host27

  Adds splitting of unions

Change 3607 on 2005/04/12 by thorsten@SMP

  Adds image output support to Windows code

Change 3605 on 2005/04/12 by thorsten@host27

  Adds image output support

Change 3604 on 2005/04/12 by thorsten@host27

  Adds ComputeShadowMedia
  Adds clipping to image output

Change 3603 on 2005/04/12 by nkopp@impulse

  more photon-related fixes

Change 3600 on 2005/04/12 by chrisc@x2

  fix object copy bug

Change 3599 on 2005/04/11 by nkopp@impulse

  re-enable media photons

Change 3598 on 2005/04/11 by chrisc@x2

  restore support for POT files.

Change 3597 on 2005/04/11 by chrisc@x2

  eliminate globals and shared variables from parametric object.

Change 3596 on 2005/04/11 by chrisc@x2

  remove global from fractal code.

Change 3595 on 2005/04/10 by chrisc@x2

  temporary fix for problem where quadrics return clip 
  region smaller than clipping object even when original bbox 
  was larger (this is particularly visible when bounding slabs 
  are turned off).
  also add support for multiple clipping objects back.

Change 3594 on 2005/04/10 by chrisc@x2

  fix torus artifact.

Change 3590 on 2005/04/10 by nkopp@impulse

  further changes of photon

Change 3588 on 2005/04/09 by thorsten@host27

  Adds rainbow

Change 3587 on 2005/04/09 by thorsten@SMP

  Some cutting on light tests in media

Change 3584 on 2005/04/09 by thorsten@SMP

  This at last renders media correectly

Change 3583 on 2005/04/09 by chrisc@x2

  add platform-specific thread startup and cleanup macros.
  note that this change expects that boost::threads is modified 
  for win32 to not catch exceptions.

Change 3581 on 2005/04/09 by thorsten@host27

  Fixes to media lit interval computation

Change 3579 on 2005/04/09 by nkopp@impulse

  Re-enable photons afterlatest round of changes

Change 3578 on 2005/04/09 by chrisc@x2

  fix for interior uninitialised variables.

Change 3577 on 2005/04/09 by thorsten@host27

  Removes misc global variables and some general code cleanup

Change 3576 on 2005/04/09 by chrisc@x2

  image filter fixes.

Change 3574 on 2005/04/09 by thorsten@host27

  Adds fog support

Change 3573 on 2005/04/09 by chrisc@x2

  temporary work-around to stop boost:threads catching access violation etc exceptions.

Change 3571 on 2005/04/09 by thorsten@host27

  Unified image types for colour maps
  Added methods to get and set whole colour maps

Change 3570 on 2005/04/09 by chrisc@x2

  fix problem with blend maps

Change 3569 on 2005/04/08 by thorsten@host27

  Simplifies AA method 1 code

Change 3567 on 2005/04/08 by chrisc@x2

  ensure gammacorrect is specified when reading image files.

Change 3565 on 2005/04/08 by chrisc@x2

  ensure image files are closed after they are read.

Change 3560 on 2005/04/07 by thorsten@SMP

  Another AA method 1 change. Note that this
  method is currently not identical to AA method 1
  from POV-Ray 3.6 as there are a few odd things
  in that algorithm...

Change 3554 on 2005/04/06 by chrisc@x2

  exception handling changes

Change 3552 on 2005/04/04 by chrisc@x2

  more correct handling of inverse keyword for CSG objects.

Change 3551 on 2005/04/04 by thorsten@host27

  Rays now carry various important flags.
  Adds atmospheric media

Change 3549 on 2005/04/04 by thorsten@host27

  Media code is basically complete

Change 3548 on 2005/04/04 by thorsten@host27

  media (re)integration part two - cleanups and more cleanups
  in particular now color and vector components are properly accessed
  rather than using indices 0, 1 and 2!

Change 3547 on 2005/04/03 by chrisc@x2

  more internal blob tweaks

Change 3545 on 2005/04/03 by thorsten@host27

  Changes INTERIOR to Interior and various variables named Interior to interior
  Also changes IMEDIA to Media.

Change 3544 on 2005/04/03 by chrisc@x2

  partial cleanup of blob code

Change 3541 on 2005/04/02 by thorsten@host27

  Adds back bound sphere code
  Makes sort function Axis a template

Change 3538 on 2005/04/02 by thorsten@host27

  Fixes use of max trace level and adc bailout

Change 3537 on 2005/04/02 by thorsten@SMP

  Eliminates a message "race" (no, not really,
  but close) condition that prevented proper stopping

Change 3526 on 2005/04/01 by thorsten@host27

  Three arrays in Trace are now pooled/cached as well

Change 3521 on 2005/04/01 by thorsten@host27

  Changes Ray and IStack to be passed by reference hopefully everywhere

Change 3517 on 2005/04/01 by thorsten@host27

  Tweaks to use of bounding code
  Tweaks to camera ray interior finding

Change 3512 on 2005/03/31 by thorsten@host27

  Enables bounding slabs again (as a temporary bounding)

Change 3510 on 2005/03/30 by chrisc@x2

  remove half-pixel offset from CreateCameraRay(). 
  
Change 3508 on 2005/03/30 by thorsten@host27

  Progress reporting for parsing and rendering

Change 3506 on 2005/03/30 by thorsten@SMP

  Isosurfaces are now multithread-safe

Change 3503 on 2005/03/29 by thorsten@host27

  Extensive attempt to resolve all but one isosurface threading issue
  What remains is the use of eval and it modifying max_gradient - while
   the serious problems with this have been resolved, storing a new
   max_gradient involves a max() call, which is of course not thread-safe
   and could result in a higher max_gradient getting overwritten. However,
   it seems only a slight chance this could have a very serious impact - 
   only testing will tell. Either way, it won't cause visual problems
   but could result in incorrect max_gradient being reported to the user
   in case of using eval.  It can however cause a slight slowdown under
   very odd race conditions.  Note that the other reporting is not
   thread-safe either, but that should not be a major issue either...

Change 3502 on 2005/03/29 by chrisc@x2

  save povwin settings before each render.

Change 3501 on 2005/03/29 by chrisc@x2

  remove lathe and SOR mutexes by creating thread-local shared bounding arrays.

Change 3500 on 2005/03/29 by chrisc@x2

  stop the thread_specific_ptr in Task from deleting TaskData.

Change 3498 on 2005/03/29 by chrisc@x2

  changes mostly related to temp file handling.

Change 3488 on 2005/03/25 by chrisc@x2

  remove weighting from TraceRay.
  Restore time statistics output to message display (temporary).
  Initialise default thread count to nCPU's*2.
  Allow number of threads to be specified on command-line with '/THREADS n' parameter.

Change 3486 on 2005/03/25 by chrisc@x2

  add progress bar.

Change 3482 on 2005/03/24 by thorsten@host27

  Adds ability to pause parsing as well as proper return messages
  upon a user canceling parsing/rendering

Change 3480 on 2005/03/24 by thorsten@host27

  Fixes problem with function pattern contexts in parser

Change 3479 on 2005/03/24 by thorsten@host27

  Disables duplicate deletion of light sources

Change 3478 on 2005/03/24 by thorsten@host27

  Adds VM internal function thread pointer passing via context

Change 3477 on 2005/03/24 by thorsten@host27

  Eliminates need for function VM mutex
  Reorganises thread specific data

Change 3461 on 2005/03/19 by thorsten@host27

  Adds exception class and helper macros (pov_err.h)
  Moves task and task queue to support
  Enables Pause/Resume of parser
  Adds message factory for easier output abstraction

Change 3455 on 2005/03/19 by chrisc@x2

  wrap windows code in namespace povwin.

Change 3451 on 2005/03/19 by chrisc@x2

  windows preview display

Change 3435 on 2005/03/18 by thorsten@host27

  POVMS now supports sequences of ints, longs, floats and types,
  which makes transmitting i.e. blocks of colors much more efficient
  than using POVMS lists!
  Further finished transmission of pixel blocks

Change 3434 on 2005/03/18 by thorsten@host27

  Parser now runs in its own thread rather than the
  message receiver thread (which was just a hack)

Change 3432 on 2005/03/18 by thorsten@host27

  Integrates the new render task queue into the rendering process

Change 3431 on 2005/03/18 by thorsten@host27

  Adds render task queue and render task classes. These will
  allow to create a queue of individual threaded actions, i.e.
  first run a bounding task, then a photon task and then a radiosity
  task, and then run a render task. It also allows to start multiple
  of these tasks and wait in between for a set of tasks to be
  completed.

Change 3429 on 2005/03/17 by thorsten@host27

  Adds handling of pixel blocks to frontend

Change 3403 on 2005/03/06 by thorsten@host27

  Image read/write now take an options block

Change 3401 on 2005/03/06 by thorsten@host27

  Adds gamma and easier handling of colour maps

Change 3397 on 2005/03/05 by chrisc@x2

  add BMP to new image code. note that portable BMP support is now part of the core.

Change 3390 on 2005/03/05 by chrisc@x2

  adds pgm and iff support for new image handling

Change 3389 on 2005/03/04 by chrisc@x2

  jpeg support for new image handling

Change 3388 on 2005/03/04 by chrisc@x2

  add PNG support for new image handling

Change 3387 on 2005/03/04 by chrisc@x2

  add gif support to new image code

Change 3385 on 2005/03/03 by thorsten@host27

  Adds universal indexed image support

Change 3384 on 2005/03/03 by chrisc@x2

  clean up targa support a bit.

Change 3383 on 2005/03/03 by chrisc@x2

  add targa support to new image code

Change 3380 on 2005/03/02 by thorsten@host27

  Adds image class to base/image/

Change 3379 on 2005/03/02 by nkopp@impulse

  make photon code more object-oriented and more thread-safe

Change 3365 on 2005/02/24 by chrisc@x2

  work around fact BCyl code uses many temporaries shared between threads.

Change 3364 on 2005/02/24 by chrisc@x2

  massage bbox and mesh stuff to ensure shared bounding tree data is const.

Change 3363 on 2005/02/24 by chrisc@x2

  add code for bounding trees.

Change 3362 on 2005/02/24 by chrisc@x2

  remove global mesh queue.

Change 3348 on 2005/02/23 by chrisc@x2

  some tweaks to mesh to remove a few globals.

Change 3345 on 2005/02/23 by thorsten@host27

  Adds background/skysphere support back.

Change 3341 on 2005/02/23 by thorsten@host27

  Removes plenty of stuff from "opts"

Change 3338 on 2005/02/23 by chrisc@x2

  cleanup core header use in windows files.

Change 3334 on 2005/02/22 by thorsten@SMP

  Adds partial preview back

Change 3332 on 2005/02/21 by chrisc@x2

  can now use fractal istack in threaddata.

Change 3327 on 2005/02/21 by thorsten@host27

  Removed dispersion code as it cannot be repaired but needs to be rewritten
  Added back camera ray creation code, now rendering works much better again

Change 3322 on 2005/02/21 by thorsten@host27

  Lighting enabled

Change 3321 on 2005/02/21 by chrisc@x2

  remove the need for the intersections array in the prism
  object by merging the code from Intersect() into All_Intersections.

Change 3314 on 2005/02/12 by chrisc@x2

  remove Sx, Sy, Sz, Sw globals from quatern and hcmplx code.
  Note that there is a temp. global that needs to be removed once access to threaddata
  is available to the run-time fractal code.

Change 3311 on 2005/02/12 by chrisc@x2

  get rid of Distance and Precision global variables from fractal code.

Change 3304 on 2005/02/11 by thorsten@host27

  Turns RAY, ISTACK and INTERSECTION into the classes
  Ray, IStack and Intersection. This makes several dozen
  support and initialisation functions obsolete. There no
  longer is a max_intersections ISTACK limit either. As such,
  no more ISTACK overflows and thee global setting
  'max_intersections' is no longer needed.

Change 3302 on 2005/02/10 by chrisc@x2

  some work with Max_Trace_Level/Highest_Trace_Level and stats.

Change 3301 on 2005/02/10 by chrisc@x2

  update code to not use global stats variable.

Change 3299 on 2005/02/10 by chrisc@x2

  update shape code to accept thread data pointer.

Change 3296 on 2005/02/09 by chrisc@x2

  implement thread-safe local POVMS support in windows code.

Change 3293 on 2005/02/09 by chrisc@x2

  split reserved words global into its own file so it can be linked
  separately from the core code by e.g. a UI for syntax highlighting purposes.

Change 3292 on 2005/02/09 by chrisc@x2

  clean out old render thread from pvengine.cpp
  modify core project to include sub-categories of back-end code

Change 3282 on 2005/02/07 by chrisc@x2

  project file changes, and in pvengine

Change 3278 on 2005/02/06 by thorsten@host27

  Some major reorganisation of files

Change 3271 on 2005/01/28 by chrisc@x2

  first step in introducing new stats collection structure.

Change 3263 on 2005/01/22 by chrisc@x2

  changes to avoid literal copying of base class members.

Change 3245 on 2005/01/10 by thorsten@host27

  Changes methods&structs to classes.
